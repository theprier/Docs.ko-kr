---
uid: identity/overview/getting-started/adding-aspnet-identity-to-an-empty-or-existing-web-forms-project
title: ASP.NET Id는 비어 있는 또는 기존 웹 폼 프로젝트 추가 | Microsoft Docs
author: raquelsa
description: 이 자습서에서는 ASP.NET 응용 프로그램에 ASP.NET Id (ASP.NET에 대 한 새 멤버 자격 시스템)를 추가 하는 방법을 보여 줍니다. 만들 때 새 Web Forms 또는 MVC...
ms.author: aspnetcontent
manager: wpickett
ms.date: 10/23/2013
ms.topic: article
ms.assetid: 1cbc0ed2-5bd6-4b62-8d34-4c193dcd8b25
ms.technology: ''
msc.legacyurl: /identity/overview/getting-started/adding-aspnet-identity-to-an-empty-or-existing-web-forms-project
msc.type: authoredcontent
ms.openlocfilehash: eb2605043be49754b0641f0e919a5bd7c2f639b1
ms.sourcegitcommit: 953ff9ea4369f154d6fd0239599279ddd3280009
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/03/2018
ms.locfileid: "37393282"
---
<a name="adding-aspnet-identity-to-an-empty-or-existing-web-forms-project"></a><span data-ttu-id="c3f85-104">추가 ASP.NET Id는 비어 있는 또는 기존 웹 폼 프로젝트</span><span class="sxs-lookup"><span data-stu-id="c3f85-104">Adding ASP.NET Identity to an Empty or Existing Web Forms Project</span></span>
====================
<span data-ttu-id="c3f85-105">[Raquel Soares De Almeida](https://github.com/raquelsa)</span><span class="sxs-lookup"><span data-stu-id="c3f85-105">by [Raquel Soares De Almeida](https://github.com/raquelsa)</span></span>

> <span data-ttu-id="c3f85-106">이 자습서에서는 추가 하는 방법을 보여 줍니다 [ASP.NET Id](introduction-to-aspnet-identity.md) (ASP.NET에 대 한 새 멤버 자격 시스템) ASP.NET 응용 프로그램에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-106">This tutorial shows you how to add [ASP.NET Identity](introduction-to-aspnet-identity.md) (the new membership system for ASP.NET) to an ASP.NET application.</span></span>
> 
> <span data-ttu-id="c3f85-107">개별 계정을 사용 하 여 Visual Studio 2013 RTM에서 새 Web Forms 또는 MVC 프로젝트를 만들 때 Visual Studio를 모든 필요한 패키지를 설치 하면에 대 한 모든 필요한 클래스를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-107">When you create a new Web Forms or MVC project in Visual Studio 2013 RTM with Individual Accounts, Visual Studio will install all the required packages and add all necessary classes for you.</span></span> <span data-ttu-id="c3f85-108">이 자습서에서는 기존 Web Forms 프로젝트 또는 새로운 빈 프로젝트를 ASP.NET Id 지원을 추가 하는 단계를 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-108">This tutorial will illustrate the steps to add ASP.NET Identity support to your existing Web Forms project or a new empty project.</span></span> <span data-ttu-id="c3f85-109">살펴보도록는 및에 추가 해야 하는 클래스를 모든 NuGet 패키지를 설치 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-109">I will outline all the NuGet packages you need to install, and classes you need to add.</span></span> <span data-ttu-id="c3f85-110">새 사용자를 등록 하 고 사용자 관리 및 인증에 대 한 모든 주요 항목 지점 Api를 강조 표시 하는 동안 로그인에 대 한 샘플 Web Forms를 통해으로.</span><span class="sxs-lookup"><span data-stu-id="c3f85-110">I will go over sample Web Forms for registering new users and logging in while highlighting all main entry point APIs for user management and authentication.</span></span> <span data-ttu-id="c3f85-111">이 샘플은 Entity Framework을 기반으로 하는 SQL 데이터 저장소에 대 한 ASP.NET Id 기본 구현을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-111">This sample will use the ASP.NET Identity default implementation for SQL data storage which is built on Entity Framework.</span></span> <span data-ttu-id="c3f85-112">이 자습서에서는 LocalDB는 SQL database에 대 한 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-112">This tutorial, we will use LocalDB for the SQL database.</span></span>
> 
> <span data-ttu-id="c3f85-113">이 자습서가 작성 하 여 Raquel Soares De Almeida 및 Rick Anderson ( [ @RickAndMSFT ](https://twitter.com/#!/RickAndMSFT) ).</span><span class="sxs-lookup"><span data-stu-id="c3f85-113">This tutorial was written by Raquel Soares De Almeida and Rick Anderson ( [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT) ).</span></span>


## <a name="getting-started-aspnet-identity"></a><span data-ttu-id="c3f85-114">ASP.NET Id 시작</span><span class="sxs-lookup"><span data-stu-id="c3f85-114">Getting Started ASP.NET Identity</span></span>

1. <span data-ttu-id="c3f85-115">설치 및 실행 하 여 시작 [Visual Studio Express 2013 for Web](https://go.microsoft.com/fwlink/?LinkId=299058) 하거나 [Visual Studio 2013](https://go.microsoft.com/fwlink/?LinkId=306566)합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-115">Start by installing and running [Visual Studio Express 2013 for Web](https://go.microsoft.com/fwlink/?LinkId=299058) or [Visual Studio 2013](https://go.microsoft.com/fwlink/?LinkId=306566).</span></span>
2. <span data-ttu-id="c3f85-116">클릭 **새 프로젝트** 시작 페이지 또는 사용자 메뉴를 사용 하 여 선택할 **파일**를 차례로 **새 프로젝트**합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-116">Click **New Project** from the Start page, or you can use the menu and select **File**, and then **New Project**.</span></span>
3. <span data-ttu-id="c3f85-117">선택 **Visual C# i** n 후 왼쪽된 창의 **Web** 선택한 후 **ASP.NET 웹 응용 프로그램**.</span><span class="sxs-lookup"><span data-stu-id="c3f85-117">Select **Visual C# i** n the left pane, then **Web** and then select **ASP.NET Web Application**.</span></span> <span data-ttu-id="c3f85-118">"WebFormsIdentity" 프로젝트 이름을 지정 하 고 클릭 **확인**합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-118">Name your project "WebFormsIdentity" and then click **OK**.</span></span>   
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image1.png)
4. <span data-ttu-id="c3f85-119">에 **새 ASP.NET 프로젝트** 대화 상자에서 선택 합니다 **빈** 템플릿.</span><span class="sxs-lookup"><span data-stu-id="c3f85-119">In the **New ASP.NET Project** dialog, select the **Empty** template.</span></span>  
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image2.png)  
  
   <span data-ttu-id="c3f85-120">알림 합니다 **인증 변경** 단추가 비활성화 되 고이 템플릿에 없는 인증 지원이 제공 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-120">Notice the **Change Authentication** button is disabled and no authentication support is provided in this template.</span></span> <span data-ttu-id="c3f85-121">Web Forms, MVC 및 Web API 템플릿을 통해 인증 방법을 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-121">The Web Forms, MVC and Web API templates allow you to select the authentication approach.</span></span> <span data-ttu-id="c3f85-122">자세한 내용은 [인증의 개요](../../../visual-studio/overview/2013/creating-web-projects-in-visual-studio.md#auth) 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-122">For more information, see [Overview of Authentication](../../../visual-studio/overview/2013/creating-web-projects-in-visual-studio.md#auth) .</span></span>

## <a name="adding-identity-packages-to-your-app"></a><span data-ttu-id="c3f85-123">앱에 Identity 패키지 추가</span><span class="sxs-lookup"><span data-stu-id="c3f85-123">Adding Identity Packages to your App</span></span>

<span data-ttu-id="c3f85-124">솔루션 탐색기에서 프로젝트를 마우스 오른쪽 단추로 클릭 하 고 선택 **NuGet 패키지 관리**합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-124">In Solution Explorer, right-click your project and select **Manage NuGet Packages**.</span></span> <span data-ttu-id="c3f85-125">검색 텍스트 상자 대화 상자에서 "*Identity.E*"입니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-125">In the search text box dialog, type "*Identity.E*".</span></span> <span data-ttu-id="c3f85-126">이 패키지에 대 한 설치를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-126">Click install for this package.</span></span>   
  
![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image3.png)  
  
<span data-ttu-id="c3f85-127">이 패키지 종속성 패키지 설치는 참고: EntityFramework 및 Microsoft Asp.net Identity입니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-127">Note that this package will install the dependency packages: EntityFramework and Microsoft ASP.NET Identity Core.</span></span>

## <a name="adding-web-forms-to-register-users"></a><span data-ttu-id="c3f85-128">사용자를 등록 하려면 추가 Web Forms</span><span class="sxs-lookup"><span data-stu-id="c3f85-128">Adding Web Forms to Register Users</span></span>

1. <span data-ttu-id="c3f85-129">**솔루션 탐색기**프로젝트를 마우스 오른쪽 단추로 클릭 하 고 클릭 **추가**를 차례로 **Web Form**합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-129">In **Solution Explorer**, right-click your project and click **Add**, and then **Web Form**.</span></span>  
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image4.png)
2. <span data-ttu-id="c3f85-130">에 **항목에 대 한 이름 지정** 대화 상자에서 이름 새 web form **등록**를 클릭 하 고 **확인**</span><span class="sxs-lookup"><span data-stu-id="c3f85-130">In the **Specify Name for Item** dialog box, name the new web form **Register**, and then click **OK**</span></span>
3. <span data-ttu-id="c3f85-131">생성 된 태그 바꿉니다 *Register.aspx* 아래 코드를 사용 하 여 파일입니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-131">Replace the markup in the generated *Register.aspx* file with the code below.</span></span> <span data-ttu-id="c3f85-132">코드 변경 내용은 강조 표시되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-132">The code changes are highlighted.</span></span>   

    [!code-aspx[Main](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/samples/sample1.aspx?highlight=9,12-40)]

    > [!NOTE]
    > <span data-ttu-id="c3f85-133">이의 단순화 된 버전에만 합니다 *Register.aspx* 새 ASP.NET Web Forms 프로젝트를 만들 때 생성 되는 파일.</span><span class="sxs-lookup"><span data-stu-id="c3f85-133">This is just a simplified version of the *Register.aspx* file that is created when you create a new ASP.NET Web Forms project.</span></span> <span data-ttu-id="c3f85-134">위의 태그는 양식 필드 및 새 사용자를 등록 하는 단추를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-134">The markup above adds form fields and a button to register a new user.</span></span>
4. <span data-ttu-id="c3f85-135">엽니다는 *Register.aspx.cs* 파일 및 파일의 내용을 다음 코드로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-135">Open the *Register.aspx.cs* file and replace the contents of the file with the following code:</span></span>

    [!code-csharp[Main](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/samples/sample2.cs)]

    > [!NOTE] 
    > 
    > 1. <span data-ttu-id="c3f85-136">위의 코드는의 단순화 된 버전의 *Register.aspx.cs* 새 ASP.NET Web Forms 프로젝트를 만들 때 생성 되는 파일입니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-136">The code above is a simplified version of the *Register.aspx.cs* file that is created when you create a new ASP.NET Web Forms project.</span></span>
    > 2. <span data-ttu-id="c3f85-137">합니다 *IdentityUser* 클래스는 기본 EntityFramework 구현의 합니다 *IUser* 인터페이스입니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-137">The *IdentityUser* class is the default EntityFramework implementation of the *IUser* interface.</span></span> <span data-ttu-id="c3f85-138">*IUser* 인터페이스는 Asp.net Identity의 사용자에 대 한 최소 인터페이스입니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-138">*IUser* interface is the minimal interface for a user on ASP.NET Identity Core.</span></span>
    > 3. <span data-ttu-id="c3f85-139">합니다 *UserStore* 클래스는 사용자 저장소의 기본 EntityFramework 구현 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-139">The *UserStore* class is the default EntityFramework implementation of a user store.</span></span> <span data-ttu-id="c3f85-140">이 클래스는 ASP.NET Identity Core 최소한의 인터페이스를 구현 합니다. *IUserStore*를 *IUserLoginStore*를 *IUserClaimStore* 및 *IUserRoleStore* .</span><span class="sxs-lookup"><span data-stu-id="c3f85-140">This class implements the ASP.NET Identity Core's minimal interfaces: *IUserStore*, *IUserLoginStore*, *IUserClaimStore* and *IUserRoleStore*.</span></span>
    > 4. <span data-ttu-id="c3f85-141">*UserManager* 클래스는 사용자는 관련 Api를 자동으로 변경 내용을 저장 합니다 *UserStore*합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-141">The *UserManager* class exposes user related APIs which will automatically save changes to the *UserStore*.</span></span>
    > 5. <span data-ttu-id="c3f85-142">합니다 *IdentityResult* 클래스 id 작업의 결과 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-142">The *IdentityResult* class represents the result of an identity operation.</span></span>
5. <span data-ttu-id="c3f85-143">**솔루션 탐색기**프로젝트를 마우스 오른쪽 단추로 클릭 하 고 클릭 **추가**합니다 **ASP.NET 폴더 추가** 차례로 **앱\_데이터**입니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-143">In **Solution Explorer**, right-click your project and click **Add**, **Add ASP.NET Folder** and then **App\_Data**.</span></span>  
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image5.png)
6. <span data-ttu-id="c3f85-144">엽니다는 *Web.config* 파일 및 사용자 정보를 저장 하는 데 사용 하는 데이터베이스에 대 한 연결 문자열 항목을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-144">Open the *Web.config* file and add a connection string entry for the database we will use to store user information.</span></span> <span data-ttu-id="c3f85-145">데이터베이스에 만들어집니다 런타임 EntityFramework에서 Identity 엔터티에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-145">The database will be created at runtime by EntityFramework for the Identity entities.</span></span> <span data-ttu-id="c3f85-146">연결 문자열 하나를 새 Web Forms 프로젝트를 만들 때 생성 하는 것과 비슷합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-146">The connection string is similar to one created for you when you create a new Web Forms project.</span></span> <span data-ttu-id="c3f85-147">강조 표시 된 코드를 추가 해야 태그를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-147">The highlighted code shows the markup you should add:</span></span>

    [!code-xml[Main](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/samples/sample3.xml?highlight=11-14)]
    
    > [!NOTE] 
    > <span data-ttu-id="c3f85-148">Visual Studio 2015 이상에서 대체 `(localdb)\v11.0` 사용 하 여 `(localdb)\MSSQLLocalDB` 연결 문자열에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-148">For Visual Studio 2015 or higher, replace `(localdb)\v11.0` with `(localdb)\MSSQLLocalDB` in your connection string.</span></span>
    
7. <span data-ttu-id="c3f85-149">파일을 마우스 오른쪽 단추로 클릭 *Register.aspx* 선택한 서버 프로젝트 **시작 페이지로 설정**합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-149">Right click file *Register.aspx* in your project and select **Set as Start Page**.</span></span> <span data-ttu-id="c3f85-150">빌드 및 웹 응용 프로그램을 실행 하려면 Ctrl + F5 키를 누릅니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-150">Press Ctrl + F5 to build and run the web application.</span></span> <span data-ttu-id="c3f85-151">새 사용자 이름 및 암호를 입력 하 고 클릭 **등록**합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-151">Enter a new user name and password and then click on **Register**.</span></span>  
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image6.png)  

    > [!NOTE]
    > <span data-ttu-id="c3f85-152">ASP.NET Id에 유효성 검사를 지원 하 고이 샘플에서 사용자 이름 및 암호에 대 한 기본 동작을 확인할 수 있습니다 Identity 코어 패키지에서 제공 되는 유효성 검사기입니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-152">ASP.NET Identity has support for validation and in this sample you can verify the default behavior on User and Password validators that come from the Identity Core package.</span></span> <span data-ttu-id="c3f85-153">사용자에 대 한 기본 유효성 검사기 (`UserValidator`) 속성이 `AllowOnlyAlphanumericUserNames` 로 설정 하는 기본 값이 `true`합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-153">The default validator for User (`UserValidator`) has a property `AllowOnlyAlphanumericUserNames` that has default value set to `true`.</span></span> <span data-ttu-id="c3f85-154">암호에 대 한 기본 유효성 검사기 (`MinimumLengthValidator`) 하면 해당 암호는 6 자 이상입니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-154">The default validator for Password (`MinimumLengthValidator`) ensures that password has at least 6 characters.</span></span> <span data-ttu-id="c3f85-155">이러한 유효성 검사기 속성에 `UserManager` 사용자 지정 유효성 검사 하려는 경우 재정의할 수 있습니다</span><span class="sxs-lookup"><span data-stu-id="c3f85-155">These validators are properties on `UserManager` that can be overridden if you want to have custom validation,</span></span>

## <a name="verifying-the-localdb-identity-database-and-tables-generated-by-entity-framework"></a><span data-ttu-id="c3f85-156">Entity Framework에서 생성 된 테이블과 LocalDb Id 데이터베이스를 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-156">Verifying the LocalDb Identity Database and Tables Generated by Entity Framework</span></span>

1. <span data-ttu-id="c3f85-157">에 **뷰** 메뉴에서 클릭 **서버 탐색기**합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-157">In the **View** menu, click **Server Explorer**.</span></span>  
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image7.png)
2. <span data-ttu-id="c3f85-158">확장 **DefaultConnection (WebFormsIdentity)** 를 확장 하 고 **테이블**를 마우스 오른쪽 단추로 클릭 **AspNetUsers** 클릭 **테이블 데이터 표시**합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-158">Expand **DefaultConnection (WebFormsIdentity)**, expand **Tables**, right click **AspNetUsers** and click **Show Table Data**.</span></span>  
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image8.png)  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image9.png)

## <a name="configuring-the-application-for-owin-authentication"></a><span data-ttu-id="c3f85-159">OWIN 인증에 대 한 응용 프로그램 구성</span><span class="sxs-lookup"><span data-stu-id="c3f85-159">Configuring the application for OWIN authentication</span></span>

<span data-ttu-id="c3f85-160">이 시점에서 사용자를 만들기 위한 지원을 추가 했습니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-160">At this point we have only added support for creating users.</span></span> <span data-ttu-id="c3f85-161">이제 하겠습니다 인증 사용자 로그인을 추가할 수 있습니다 하는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-161">Now, we are going to demonstrate how we can add authentication to login a user.</span></span> <span data-ttu-id="c3f85-162">ASP.NET Id는 폼 인증을 위해 Microsoft OWIN 인증 미들웨어를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-162">ASP.NET Identity uses Microsoft OWIN Authentication middleware for forms authentication.</span></span> <span data-ttu-id="c3f85-163">OWIN 쿠키 인증 쿠키 및 클레임 기반된 인증 메커니즘에서 호스팅되는 모든 프레임 워크에서 사용할 수 있는 [OWIN](https://msdn.microsoft.com/magazine/dn451439.aspx) 또는 IIS입니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-163">The OWIN Cookie Authentication is a cookie and claims based authentication mechanism that can be used by any framework hosted on [OWIN](https://msdn.microsoft.com/magazine/dn451439.aspx) or IIS.</span></span> <span data-ttu-id="c3f85-164">이 모델에서는 동일한 인증 패키지를 ASP.NET MVC 및 Web Forms를 비롯 한 여러 프레임 워크에서 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-164">With this model, the same authentication packages can be used across multiple frameworks including ASP.NET MVC and Web Forms.</span></span> <span data-ttu-id="c3f85-165">프로젝트 Katana 및 호스트 알 수 없는 참조에 미들웨어를 실행 하는 방법에 대 한 자세한 내용은 [Katana 프로젝트 시작](https://msdn.microsoft.com/magazine/dn451439.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-165">For more information on project Katana and how to run middleware in a host agnostic see [Getting Started with the Katana Project](https://msdn.microsoft.com/magazine/dn451439.aspx).</span></span>

## <a name="installing-authentication-packages-to-your-application"></a><span data-ttu-id="c3f85-166">응용 프로그램에 인증 패키지를 설치합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-166">Installing authentication packages to your application</span></span>

1. <span data-ttu-id="c3f85-167">솔루션 탐색기에서 프로젝트를 마우스 오른쪽 단추로 클릭 하 고 선택 **NuGet 패키지 관리**합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-167">In Solution Explorer, right-click your project and select **Manage NuGet Packages**.</span></span> <span data-ttu-id="c3f85-168">검색 텍스트 상자 대화 상자에서 "*Identity.Owin*"입니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-168">In the search text box dialog, type "*Identity.Owin*".</span></span> <span data-ttu-id="c3f85-169">이 패키지에 대 한 설치를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-169">Click install for this package.</span></span>   
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image10.png)
2. <span data-ttu-id="c3f85-170">패키지에 대 한 검색 ***Microsoft.Owin.Host.SystemWeb*** 하 고 설치 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-170">Search for package ***Microsoft.Owin.Host.SystemWeb*** and install it.</span></span>   

    > [!NOTE]
    > <span data-ttu-id="c3f85-171">합니다 **Microsoft.Aspnet.Identity.Owin** 패키지에는 Asp.net Identity 패키지에서 사용할 수 있도록 OWIN 인증 미들웨어를 구성 하는 OWIN 확장 클래스의 집합을 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-171">The **Microsoft.Aspnet.Identity.Owin** package contains a set of OWIN extension classes to manage and configure OWIN authentication middleware to be consumed by ASP.NET Identity Core packages.</span></span>  
    > <span data-ttu-id="c3f85-172">합니다 **Microsoft.Owin.Host.SystemWeb** 패키지 OWIN 기반 응용 프로그램을 ASP.NET 요청 파이프라인을 사용 하 여 IIS에서 실행할 수 있게 해 주는 OWIN 서버를 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-172">The **Microsoft.Owin.Host.SystemWeb** package contains an OWIN server that enables OWIN-based applications to run on IIS using the ASP.NET request pipeline.</span></span> <span data-ttu-id="c3f85-173">자세한 내용은 참조 [OWIN 미들웨어입니다. iis에서 통합 파이프라인](../../../aspnet/overview/owin-and-katana/owin-middleware-in-the-iis-integrated-pipeline.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-173">For more information see [OWIN Middleware in the IIS integrated pipeline](../../../aspnet/overview/owin-and-katana/owin-middleware-in-the-iis-integrated-pipeline.md).</span></span>

## <a name="adding-owin-startup-and-authentication-configuration-classes"></a><span data-ttu-id="c3f85-174">OWIN 시작 및 인증 구성 클래스를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-174">Adding OWIN Startup and Authentication Configuration Classes</span></span>

1. <span data-ttu-id="c3f85-175">**솔루션 탐색기**프로젝트를 마우스 오른쪽 단추로 클릭, 클릭 **추가**를 차례로 **새 항목 추가**합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-175">In **Solution Explorer**, right-click your project, click **Add**, and then **Add New Item**.</span></span> <span data-ttu-id="c3f85-176">검색 텍스트 상자 대화 상자에서 "*owin*"입니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-176">In the search text box dialog, type "*owin*".</span></span> <span data-ttu-id="c3f85-177">클래스 이름을 "*시동*" 클릭 **추가**합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-177">Name the class "*Startup*" and click **Add**.</span></span>   
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image11.png)
2. <span data-ttu-id="c3f85-178">Startup.cs 파일에서 OWIN 쿠키 인증을 구성 하려면 아래 표시 된 강조 표시 된 코드를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-178">In the Startup.cs file, add the highlighted code shown below to configure OWIN cookie authentication.</span></span>

    [!code-csharp[Main](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/samples/sample4.cs?highlight=1,3,15-19)]

    > [!NOTE]
    > <span data-ttu-id="c3f85-179">이 클래스는 포함 된 `OwinStartup` OWIN startup 클래스를 지정 하는 특성입니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-179">This class contains the `OwinStartup` attribute for specifying the OWIN startup class.</span></span> <span data-ttu-id="c3f85-180">모든 OWIN 응용 프로그램에 시작 클래스가 응용 프로그램 파이프라인에 대 한 구성 요소를 지정 하는 위치입니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-180">Every OWIN application has a startup class where you specify components for the application pipeline.</span></span> <span data-ttu-id="c3f85-181">참조 [OWIN 시작 클래스 검색](../../../aspnet/overview/owin-and-katana/owin-startup-class-detection.md) 이 모델에 대 한 자세한 내용은 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-181">See [OWIN Startup Class Detection](../../../aspnet/overview/owin-and-katana/owin-startup-class-detection.md) for more info on this model.</span></span>

## <a name="adding-web-forms-for-registering-and-logging-in-users"></a><span data-ttu-id="c3f85-182">Web Forms 등록 및 로그인 추가</span><span class="sxs-lookup"><span data-stu-id="c3f85-182">Adding Web Forms for Registering and Logging in Users</span></span>

1. <span data-ttu-id="c3f85-183">엽니다는 *Register.cs* 파일과 등록에 성공 하면 사용자 로그인 하는 다음 코드를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-183">Open the *Register.cs* file and add the following code which will log in the user when registration succeeds.</span></span> <span data-ttu-id="c3f85-184">변경 내용은 아래 강조 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-184">The changes are highlighted below.</span></span>

    [!code-csharp[Main](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/samples/sample5.cs)]

    > [!NOTE] 
    > 
    > - <span data-ttu-id="c3f85-185">프레임 워크 앱 개발자 생성 하도록 요구 되므로 ASP.NET Id 및 OWIN 쿠키 인증 클레임 기반 시스템에는 [ClaimsIdentity](https://msdn.microsoft.com/library/microsoft.identitymodel.claims.claimsidentity.aspx) 사용자에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-185">Since ASP.NET Identity and OWIN Cookie Authentication are claims based system, the framework requires the app developer to generate a [ClaimsIdentity](https://msdn.microsoft.com/library/microsoft.identitymodel.claims.claimsidentity.aspx) for the user.</span></span> <span data-ttu-id="c3f85-186">ClaimsIdentity에 사용자가 속한 역할 등 사용자에 대 한 모든 클레임에 대 한 정보가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-186">ClaimsIdentity has information about all the claims for the user such as what Roles the user belongs to.</span></span> <span data-ttu-id="c3f85-187">또한이 단계에서 사용자에 대 한 더 많은 클레임을 추가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-187">You can also add more claims for the user at this stage.</span></span>
    > - <span data-ttu-id="c3f85-188">OWIN 및 호출에서 AuthenticationManager를 사용 하 여 사용자 로그인 수 `SignIn` 위에 표시 된 대로 ClaimsIdentity를 전달 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-188">You can sign in the user by using the AuthenticationManager from OWIN and calling `SignIn` and passing in the ClaimsIdentity as shown above.</span></span> <span data-ttu-id="c3f85-189">이 코드는 사용자를 로그인 하 고도 쿠키를 생성 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-189">This code will sign in the user and generate a cookie as well.</span></span> <span data-ttu-id="c3f85-190">이 호출은 비슷합니다 [FormAuthentication.SetAuthCookie](https://msdn.microsoft.com/library/system.web.security.formsauthentication.setauthcookie.aspx) 에서 사용 합니다 [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) 모듈입니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-190">This call is analogous to [FormAuthentication.SetAuthCookie](https://msdn.microsoft.com/library/system.web.security.formsauthentication.setauthcookie.aspx) used by the [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) module.</span></span>
2. <span data-ttu-id="c3f85-191">**솔루션 탐색기**를 클릭 하기 프로젝트를 마우스 오른쪽 단추로 클릭 **추가**를 차례로 **Web Form**합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-191">In **Solution Explorer**, right-click your project click **Add**, and then **Web Form**.</span></span> <span data-ttu-id="c3f85-192">웹 폼의 이름을 **로그인**합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-192">Name the web form **Login**.</span></span>  
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image12.png)
3. <span data-ttu-id="c3f85-193">내용을 대체 합니다 *Login.aspx* 를 다음 코드로 파일:</span><span class="sxs-lookup"><span data-stu-id="c3f85-193">Replace the contents of the *Login.aspx* file with the following code:</span></span>  

    [!code-aspx[Main](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/samples/sample6.aspx)]
4. <span data-ttu-id="c3f85-194">내용을 대체 합니다 *Login.aspx.cs* 다음 파일:</span><span class="sxs-lookup"><span data-stu-id="c3f85-194">Replace the contents of the *Login.aspx.cs* file with the following:</span></span>  

    [!code-csharp[Main](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/samples/sample7.cs)]

    > [!NOTE] 
    > 
    > - <span data-ttu-id="c3f85-195">합니다 `Page_Load` 이제 현재 사용자의 상태를 확인 하 고 기반으로 하는 작업을 수행 해당 `Context.User.Identity.IsAuthenticated` 상태입니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-195">The `Page_Load` now checks for the status of current user and takes action based on its `Context.User.Identity.IsAuthenticated` status.</span></span>  
    >     <span data-ttu-id="c3f85-196">**Logged 사용자 이름을 표시** : The Microsoft ASP.NET Identity Framework의 확장 메서드를 추가 했습니다 [System.Security.Principal.IIdentity](https://msdn.microsoft.com/library/system.security.principal.iidentity.aspx) 가져올 수 있도록 합니다 `UserName` 및 `UserId` 에 대 한는 사용자를 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-196">**Display Logged in User Name** : The Microsoft ASP.NET Identity Framework has added extension methods on [System.Security.Principal.IIdentity](https://msdn.microsoft.com/library/system.security.principal.iidentity.aspx) that allows you to get the `UserName` and `UserId`  for the logged in User.</span></span> <span data-ttu-id="c3f85-197">에 정의 된 이러한 확장 메서드는 `Microsoft.AspNet.Identity.Core` 어셈블리입니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-197">These extension methods are defined in the `Microsoft.AspNet.Identity.Core` assembly.</span></span> <span data-ttu-id="c3f85-198">이러한 확장 메서드는 대체 [HttpContext.User.Identity.Name](https://msdn.microsoft.com/library/system.web.httpcontext.user.aspx) 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-198">These extension methods are the replacement for [HttpContext.User.Identity.Name](https://msdn.microsoft.com/library/system.web.httpcontext.user.aspx) .</span></span>
    > - <span data-ttu-id="c3f85-199">로그인 방법:</span><span class="sxs-lookup"><span data-stu-id="c3f85-199">SignIn method:</span></span>   
    >     <span data-ttu-id="c3f85-200">`This` 메서드를 이전 대체 `CreateUser_Click` 이 샘플에 성공적으로 사용자를 만든 후 사용자 로그인 때 이제는 메서드.</span><span class="sxs-lookup"><span data-stu-id="c3f85-200">`This` method replaces the previous `CreateUser_Click` method in this sample and now signs in the user after successfully creating the user.</span></span>   
    >  <span data-ttu-id="c3f85-201">Microsoft OWIN 프레임 워크에서 확장 메서드를 추가 했습니다 `System.Web.HttpContext` 에 대 한 참조를 가져올 수 있도록는 `IOwinContext`합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-201">The Microsoft OWIN Framework has added extension methods on `System.Web.HttpContext` that allows you to get a reference to an `IOwinContext`.</span></span> <span data-ttu-id="c3f85-202">이러한 확장 메서드에 정의 된 `Microsoft.Owin.Host.SystemWeb` 어셈블리입니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-202">These extension methods are defined in `Microsoft.Owin.Host.SystemWeb` assembly.</span></span> <span data-ttu-id="c3f85-203">합니다 `OwinContext` 노출 클래스는 `IAuthenticationManager` 현재 요청에서 사용 가능한 인증 미들웨어 기능을 나타내는 속성입니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-203">The `OwinContext` class exposes an `IAuthenticationManager` property that represents the Authentication middleware functionality available on the current request.</span></span>  
    >  <span data-ttu-id="c3f85-204">사용자를 사용 하 여 로그인 합니다 `AuthenticationManager` OWIN 및 호출 `SignIn` 전달는 `ClaimsIdentity` 위에 표시 된 대로.</span><span class="sxs-lookup"><span data-stu-id="c3f85-204">You can sign in the user by using the `AuthenticationManager` from OWIN and calling `SignIn`  and passing in the `ClaimsIdentity`  as shown above.</span></span>   
    >  <span data-ttu-id="c3f85-205">생성할 앱 프레임 워크에 필요한 ASP.NET Id 및 OWIN 쿠키 인증 클레임 기반 시스템 이기 때문에 `ClaimsIdentity` 사용자에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-205">Because ASP.NET Identity and OWIN Cookie Authentication are claims-based system, the framework requires the app to generate a `ClaimsIdentity` for the user.</span></span>   
    >  <span data-ttu-id="c3f85-206">`ClaimsIdentity` 사용자가 속한 역할 등 사용자에 대 한 모든 클레임에 대 한 정보입니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-206">The `ClaimsIdentity` has information about all the claims for the user, such as what roles the user belongs to.</span></span> <span data-ttu-id="c3f85-207">이 단계에서 사용자에 대 한 더 많은 클레임을 추가할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-207">You can also add more claims for the user at this stage</span></span>  
    >  <span data-ttu-id="c3f85-208">이 코드는 사용자를 로그인 하 고도 쿠키를 생성 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-208">This code will sign in the user and generate a cookie as well.</span></span> <span data-ttu-id="c3f85-209">이 호출은 비슷합니다 [FormAuthentication.SetAuthCookie](https://msdn.microsoft.com/library/system.web.security.formsauthentication.setauthcookie.aspx) 에서 사용 합니다 [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) 모듈입니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-209">This call is analogous to [FormAuthentication.SetAuthCookie](https://msdn.microsoft.com/library/system.web.security.formsauthentication.setauthcookie.aspx) used by the [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) module.</span></span>
    > - <span data-ttu-id="c3f85-210">`SignOut` 방법:</span><span class="sxs-lookup"><span data-stu-id="c3f85-210">`SignOut` method:</span></span>   
    >  <span data-ttu-id="c3f85-211">에 대 한 참조를 가져옵니다 합니다 `AuthenticationManager` OWIN 및 호출에서 `SignOut`합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-211">Gets a reference to the `AuthenticationManager` from OWIN and calls `SignOut`.</span></span> <span data-ttu-id="c3f85-212">이 비슷합니다 [FormsAuthentication.SignOut](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx) 에서 사용 하는 메서드는 [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) 모듈입니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-212">This is analogous to [FormsAuthentication.SignOut](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx) method used by the [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) module.</span></span>
5. <span data-ttu-id="c3f85-213">키를 눌러 **ctrl+f5** 을 빌드 및 웹 응용 프로그램을 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-213">Press **Ctrl + F5** to build and run the web application.</span></span> <span data-ttu-id="c3f85-214">새 사용자 이름 및 암호를 입력 하 고 클릭 **등록**합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-214">Enter a new user name and password and then click on **Register**.</span></span>  
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image13.png)  
   <span data-ttu-id="c3f85-215">참고:이 시점에서 새 사용자 생성 되어 로그인 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-215">Note: At this point, the new user is created and logged in.</span></span>
6. <span data-ttu-id="c3f85-216">클릭할 **로그 아웃** 단추입니다. 로그 형식에 이동 합니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-216">Click on **Log out** button.You will be redirected to the Log in form.</span></span>
7. <span data-ttu-id="c3f85-217">잘못 된 사용자 이름 또는 암호 및 클릭을 입력 **로그인** 단추입니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-217">Enter an invalid user name or password and Click on **Log in** button.</span></span>   
   <span data-ttu-id="c3f85-218">`UserManager.Find` 메서드는 null이 고 오류 메시지를 반환 합니다. " *잘못 된 사용자 이름 또는 암호가* " 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c3f85-218">The `UserManager.Find`  method will return null and the error message: " *Invalid user name or password* " will be displayed.</span></span>  
  
    ![](adding-aspnet-identity-to-an-empty-or-existing-web-forms-project/_static/image14.png)
