---
uid: web-forms/overview/older-versions-security/membership/validating-user-credentials-against-the-membership-user-store-cs
title: 멤버 자격 사용자 저장소 (C#)에 대 한 사용자 자격 증명 유효성 검사 | Microsoft Docs
author: rick-anderson
description: 이 자습서에서는 프로그래밍 방식으로 및 로그인 컨트롤을 사용 하 여 멤버 자격 사용자 저장소에 대 한 사용자의 자격 증명의 유효성을 검사 하는 방법을 살펴보겠습니다...
ms.author: aspnetcontent
ms.date: 01/18/2008
ms.assetid: 61aa4e08-aa81-4aeb-8ebe-19ba7a65e04c
msc.legacyurl: /web-forms/overview/older-versions-security/membership/validating-user-credentials-against-the-membership-user-store-cs
msc.type: authoredcontent
ms.openlocfilehash: e8c46d09a7ebab19204f7c439ec4333e0c36b73e
ms.sourcegitcommit: b28cd0313af316c051c2ff8549865bff67f2fbb4
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/05/2018
ms.locfileid: "37828957"
---
<a name="validating-user-credentials-against-the-membership-user-store-c"></a><span data-ttu-id="7bc2a-103">멤버 자격 사용자 저장소 (C#)에 대 한 사용자 자격 증명 유효성 검사</span><span class="sxs-lookup"><span data-stu-id="7bc2a-103">Validating User Credentials Against the Membership User Store (C#)</span></span>
====================
<span data-ttu-id="7bc2a-104">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="7bc2a-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="7bc2a-105">[코드를 다운로드](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_06_CS.zip) 또는 [PDF 다운로드](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial06_LoggingIn_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="7bc2a-105">[Download Code](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_06_CS.zip) or [Download PDF](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial06_LoggingIn_cs.pdf)</span></span>

> <span data-ttu-id="7bc2a-106">이 자습서에서는 프로그래밍 방식으로 및 로그인 컨트롤을 사용 하 여 멤버 자격 사용자 저장소에 대 한 사용자의 자격 증명의 유효성을 검사 하는 방법을 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-106">In this tutorial we will examine how to validate a user's credentials against the Membership user store using both programmatic means and the Login control.</span></span> <span data-ttu-id="7bc2a-107">Login 컨트롤의 모양 및 동작을 사용자 지정 하는 방법에도 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-107">We will also look at how to customize the login control's appearance and behavior.</span></span>


## <a name="introduction"></a><span data-ttu-id="7bc2a-108">소개</span><span class="sxs-lookup"><span data-stu-id="7bc2a-108">Introduction</span></span>

<span data-ttu-id="7bc2a-109">에 <a id="Tutorial05"> </a> [이전 자습서](creating-user-accounts-cs.md) 멤버 자격 프레임 워크에서 새 사용자 계정을 만드는 방법에 살펴보았습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-109">In the <a id="Tutorial05"></a>[preceding tutorial](creating-user-accounts-cs.md) we looked at how to create a new user account in the Membership framework.</span></span> <span data-ttu-id="7bc2a-110">먼저 사용자 계정을 통해 프로그래밍 방식으로 만드는 살펴보았습니다 합니다 `Membership` 클래스의 `CreateUser` 메서드를 CreateUserWizard 웹 컨트롤을 사용 하 여 조사 하 고 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-110">We first looked at programmatically creating user accounts via the `Membership` class's `CreateUser` method, and then examined using the CreateUserWizard Web control.</span></span> <span data-ttu-id="7bc2a-111">그러나 로그인 페이지는 현재 사용자 이름 및 암호 쌍의 하드 코드 된 목록에 대해 제공된 된 자격 증명을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-111">However, the login page currently validates the supplied credentials against a hard-coded list of username and password pairs.</span></span> <span data-ttu-id="7bc2a-112">멤버 자격 프레임 워크의 사용자 저장소에 대해 자격 증명의 유효성을 검사 하도록 로그인 페이지의 논리를 업데이트 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-112">We need to update the login page's logic so that it validates credentials against the Membership framework's user store.</span></span>

<span data-ttu-id="7bc2a-113">훨씬 같은 사용자 계정을 만들고 사용 하 여 자격 증명 유효성을 검사할 수 프로그래밍 방식으로 또는 선언적으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-113">Much like with creating user accounts, credentials can be validated programmatically or declaratively.</span></span> <span data-ttu-id="7bc2a-114">멤버 자격 API를 프로그래밍 방식으로 사용자 저장소에 대 한 사용자의 자격 증명 유효성 검사에 대 한 메서드를 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-114">The Membership API includes a method for programmatically validating a user's credentials against the user store.</span></span> <span data-ttu-id="7bc2a-115">및 ASP.NET 사용자 이름 및 암호 로그인 단추 텍스트 상자를 사용 하 여 사용자 인터페이스를 렌더링 하는 로그인 웹 컨트롤을 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-115">And ASP.NET ships with the Login Web control, which renders a user interface with textboxes for the username and password and a button to log in.</span></span>

<span data-ttu-id="7bc2a-116">이 자습서에서는 프로그래밍 방식으로 및 로그인 컨트롤을 사용 하 여 멤버 자격 사용자 저장소에 대 한 사용자의 자격 증명의 유효성을 검사 하는 방법을 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-116">In this tutorial we will examine how to validate a user's credentials against the Membership user store using both programmatic means and the Login control.</span></span> <span data-ttu-id="7bc2a-117">Login 컨트롤의 모양 및 동작을 사용자 지정 하는 방법에도 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-117">We will also look at how to customize the login control's appearance and behavior.</span></span> <span data-ttu-id="7bc2a-118">이제 시작 하겠습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-118">Let's get started!</span></span>

## <a name="step-1-validating-credentials-against-the-membership-user-store"></a><span data-ttu-id="7bc2a-119">1 단계: 멤버 자격 사용자 저장소에 대해 자격 증명 유효성 검사</span><span class="sxs-lookup"><span data-stu-id="7bc2a-119">Step 1: Validating Credentials Against the Membership User Store</span></span>

<span data-ttu-id="7bc2a-120">폼 인증을 사용 하는 웹 사이트에 대 한 사용자 로그온 웹 사이트에 로그인 페이지를 방문 하 여 자격 증명을 입력 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-120">For web sites that use forms authentication, a user logs on to the website by visiting a login page and entering their credentials.</span></span> <span data-ttu-id="7bc2a-121">그런 다음 이러한 자격 증명 사용자 저장소에 대해 비교 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-121">These credentials are then compared against the user store.</span></span> <span data-ttu-id="7bc2a-122">유효한 경우에 사용자 id 및 방문자의 신뢰성이 유효한 지를 나타내는 보안 토큰을 폼 인증 티켓을 부여 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-122">If they are valid, then the user is granted a forms authentication ticket, which is a security token that indicates the identity and authenticity of the visitor.</span></span>

<span data-ttu-id="7bc2a-123">멤버 자격 프레임 워크에 대 한 사용자의 유효성을 검사 하려면 사용 합니다 `Membership` 클래스의 [ `ValidateUser` 메서드](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-123">To validate a user against the Membership framework, use the `Membership` class's [`ValidateUser` method](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx).</span></span> <span data-ttu-id="7bc2a-124">`ValidateUser` 메서드는 두 입력된 매개 변수 *`username`* 하 고 *`password`* -자격 증명이 유효한 지 여부를 나타내는 부울 값을 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-124">The `ValidateUser` method takes in two input parameters - *`username`* and *`password`* - and returns a Boolean value indicating whether the credentials were valid.</span></span> <span data-ttu-id="7bc2a-125">와 마찬가지로 합니다 `CreateUser` 이전 자습서에서는 검사할 메서드를 `ValidateUser` 실제 유효성 검사 구성된 된 멤버 자격 공급자를 위임 하는 메서드.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-125">Like with the `CreateUser` method we examined in the previous tutorial, the `ValidateUser` method delegates the actual validation to the configured Membership provider.</span></span>

<span data-ttu-id="7bc2a-126">합니다 `SqlMembershipProvider` 제공된 된 자격 증명을 통해 지정된 된 사용자의 암호를 확보 하 여 유효성을 검사 합니다 `aspnet_Membership_GetPasswordWithFormat` 저장 프로시저입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-126">The `SqlMembershipProvider` validates the supplied credentials by obtaining the specified user's password via the `aspnet_Membership_GetPasswordWithFormat` stored procedure.</span></span> <span data-ttu-id="7bc2a-127">이전에 설명한 대로 `SqlMembershipProvider` 세 가지 형식 중 하나를 사용 하 여 사용자의 암호를 저장 합니다: clear, 암호화, 해시 또는 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-127">Recall that the `SqlMembershipProvider` stores users' passwords using one of three formats: clear, encrypted, or hashed.</span></span> <span data-ttu-id="7bc2a-128">`aspnet_Membership_GetPasswordWithFormat` 원시 형식으로 저장된 프로시저에 암호를 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-128">The `aspnet_Membership_GetPasswordWithFormat` stored procedure returns the password in its raw format.</span></span> <span data-ttu-id="7bc2a-129">암호화 되었거나 해시 된 암호에 대 한는 `SqlMembershipProvider` 변환를 *`password`* 에 전달 된 값을 `ValidateUser` 메서드를 해당 하는 암호화 상태를 해시 및 다음에서 반환 된 비교를 데이터베이스입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-129">For encrypted or hashed passwords, the `SqlMembershipProvider` transforms the *`password`* value passed into the `ValidateUser` method into its equivalent encrypted or hashed state and then compares it with what was returned from the database.</span></span> <span data-ttu-id="7bc2a-130">데이터베이스에 저장 된 암호는 사용자가 입력 한 서식이 지정 된 암호와 일치 하는 경우 자격 증명이 잘못 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-130">If the password stored in the database matches the formatted password entered by the user, the credentials are valid.</span></span>

<span data-ttu-id="7bc2a-131">로그인 페이지를 업데이트 해 보겠습니다 (~ /`Login.aspx`)는 멤버 자격 프레임 워크 사용자 저장소에 대해 제공된 된 자격 증명의 유효성을 검사 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-131">Let's update our login page (~/`Login.aspx`) so that it validates the supplied credentials against the Membership framework user store.</span></span> <span data-ttu-id="7bc2a-132">이 로그인 페이지를 만들었습니다 년대 합니다 <a id="Tutorial02"> </a> [ *는 폼 인증 개요* ](../introduction/an-overview-of-forms-authentication-cs.md) 자습서에서는 사용자 이름 및 암호에 대 한 두 개의 텍스트 상자를 사용 하 여 인터페이스를 만들기는 암호 저장 확인란을 선택 하 고 로그인 단추 (그림 1 참조).</span><span class="sxs-lookup"><span data-stu-id="7bc2a-132">We created this login page back in the <a id="Tutorial02"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-cs.md) tutorial, creating an interface with two TextBoxes for the username and password, a Remember Me checkbox, and a Login button (see Figure 1).</span></span> <span data-ttu-id="7bc2a-133">코드에 하드 코드 된 목록 (Scott/암호, Jisun/암호 및 Sam/암호) 사용자 이름 및 암호 쌍에 대해 입력 한 자격 증명을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-133">The code validates the entered credentials against a hard-coded list of username and password pairs (Scott/password, Jisun/password, and Sam/password).</span></span> <span data-ttu-id="7bc2a-134">에 <a id="Tutorial03"> </a> [ *폼 인증 구성 및 고급 항목* ](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md) 자습서의 형태로 추가 정보를 저장 하는 로그인 페이지의 코드를 업데이트 했습니다 인증 티켓의 `UserData` 속성입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-134">In the <a id="Tutorial03"></a>[*Forms Authentication Configuration and Advanced Topics*](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md) tutorial we updated the login page's code to store additional information in the forms authentication ticket's `UserData` property.</span></span>


<span data-ttu-id="7bc2a-135">[![로그인 페이지의 인터페이스에 두 개의 텍스트 상자, CheckBoxList, 및 단추가 포함 됩니다.](validating-user-credentials-against-the-membership-user-store-cs/_static/image2.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="7bc2a-135">[![The Login Page's Interface Includes Two TextBoxes, a CheckBoxList, and a Button](validating-user-credentials-against-the-membership-user-store-cs/_static/image2.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image1.png)</span></span>

<span data-ttu-id="7bc2a-136">**그림 1**:의 로그인 페이지의 인터페이스에 포함 되어 두 개의 텍스트 상자, CheckBoxList, 및 단추 ([큰 이미지를 보려면 클릭](validating-user-credentials-against-the-membership-user-store-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="7bc2a-136">**Figure 1**: The Login Page's Interface Includes Two TextBoxes, a CheckBoxList, and a Button  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image3.png))</span></span>


<span data-ttu-id="7bc2a-137">로그인 페이지의 사용자 인터페이스 수는 변경 되지 않지만 로그인 단추를 바꾸려면 먼저 `Click` framework 멤버 자격 사용자 저장소에 대 한 사용자의 유효성을 검사 하는 코드를 사용 하 여 이벤트 처리기입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-137">The login page's user interface can remain unchanged, but we need to replace the Login button's `Click` event handler with code that validates the user against the Membership framework user store.</span></span> <span data-ttu-id="7bc2a-138">해당 코드는 다음과 같이 표시 되도록 이벤트 처리기를 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-138">Update the event handler so that its code appears as follows:</span></span>

[!code-csharp[Main](validating-user-credentials-against-the-membership-user-store-cs/samples/sample1.cs)]

<span data-ttu-id="7bc2a-139">이 코드는 매우 간단 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-139">This code is remarkably simple.</span></span> <span data-ttu-id="7bc2a-140">호출 하 여 먼저를 `Membership.ValidateUser` 메서드를 제공 된 사용자 이름 및 암호를 전달 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-140">We start by calling the `Membership.ValidateUser` method, passing in the supplied username and password.</span></span> <span data-ttu-id="7bc2a-141">통해 사이트에 사용자가 로그인 하는 경우 해당 메서드가 true를 반환 합니다 `FormsAuthentication` 클래스의 RedirectFromLoginPage 메서드.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-141">If that method returns true, then the user is signed into the site via the `FormsAuthentication` class's RedirectFromLoginPage method.</span></span> <span data-ttu-id="7bc2a-142">(에서 설명한 대로 합니다 <a id="Tutorial2"> </a> [ *는 폼 인증 개요* ](../introduction/an-overview-of-forms-authentication-cs.md) 자습서는 `FormsAuthentication.RedirectFromLoginPage` 폼 인증 티켓을 만들고 해당 사용자를 리디렉션합니다 해당 페이지로.) 그러나 자격 증명이 유효 하지 않으면,는 `InvalidCredentialsMessage` 는 자신의 사용자 이름 또는 암호가 올바르지 않은 사용자에 게 알리는 레이블이 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-142">(As we discussed in the <a id="Tutorial2"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-cs.md) tutorial, the `FormsAuthentication.RedirectFromLoginPage` creates the forms authentication ticket and then redirects the user to the appropriate page.) If the credentials are invalid, however, the `InvalidCredentialsMessage` Label is displayed, informing the user that their username or password was incorrect.</span></span>

<span data-ttu-id="7bc2a-143">이것이 전부입니다!</span><span class="sxs-lookup"><span data-stu-id="7bc2a-143">That's all there is to it!</span></span>

<span data-ttu-id="7bc2a-144">로그인 페이지 예상 대로 작동 하는지 테스트 하려면 이전 자습서에서 만든 사용자 계정 중 하나를 사용 하 여 로그인 하려고 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-144">To test that the login page works as expected, attempt to login with one of the user accounts you created in the preceding tutorial.</span></span> <span data-ttu-id="7bc2a-145">또는 계정을 아직 만들지 않은 경우 계속 해 서에서 만들는 `~/Membership/CreatingUserAccounts.aspx` 페이지입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-145">Or, if you have not yet created an account, go ahead and create one from the `~/Membership/CreatingUserAccounts.aspx` page.</span></span>

> [!NOTE]
> <span data-ttu-id="7bc2a-146">암호를 포함 하 여 자격 증명을 웹 서버에 인터넷을 통해 전송 됩니다 때 사용자가 자격 증명을 입력 하 고 로그인 페이지 양식 제출 합니다 *일반 텍스트*합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-146">When the user enters her credentials and submits the login page form, the credentials, including her password, are transmitted over the Internet to the web server in *plain text*.</span></span> <span data-ttu-id="7bc2a-147">즉, 사용자 이름 및 암호를 네트워크 트래픽을 검사 하는 모든 해커가 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-147">That means any hacker sniffing the network traffic can see the username and password.</span></span> <span data-ttu-id="7bc2a-148">이 방지 하려면 반드시 사용 하 여 네트워크 트래픽을 암호화할 [보안 소켓 레이어 (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer)합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-148">To prevent this, it is essential to encrypt the network traffic by using [Secure Socket Layers (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer).</span></span> <span data-ttu-id="7bc2a-149">이렇게 하면 자격 증명 (뿐만 아니라 전체 페이지의 HTML 태그) 웹 서버에서 수신 될 때까지 브라우저를 떠날 순간부터 암호화 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-149">This will ensure that the credentials (as well as the entire page's HTML markup) are encrypted from the moment they leave the browser until they are received by the web server.</span></span>


### <a name="how-the-membership-framework-handles-invalid-login-attempts"></a><span data-ttu-id="7bc2a-150">멤버 자격 프레임 워크에서 잘못 된 로그인 시도 처리 하는 방법</span><span class="sxs-lookup"><span data-stu-id="7bc2a-150">How the Membership Framework Handles Invalid Login Attempts</span></span>

<span data-ttu-id="7bc2a-151">방문자는 로그인 페이지에 도달 하 고 자격 증명을 제출, 브라우저는 로그인 페이지에 HTTP 요청을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-151">When a visitor reaches the login page and submits their credentials, their browser makes an HTTP request to the login page.</span></span> <span data-ttu-id="7bc2a-152">자격 증명에 유효한 경우 HTTP 응답 쿠키에서 인증 티켓을 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-152">If the credentials are valid, the HTTP response includes the authentication ticket in a cookie.</span></span> <span data-ttu-id="7bc2a-153">따라서 사이트에 침투 하려고 해커가 철저히 유효한 사용자 이름 및 암호 추측을 사용 하 여 로그인 페이지에 HTTP 요청을 전송 하는 프로그램을 만들 수입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-153">Therefore, a hacker attempting to break into your site could create a program that exhaustively sends HTTP requests to the login page with a valid username and a guess at the password.</span></span> <span data-ttu-id="7bc2a-154">암호 추측이 올바른지 로그인 페이지는이 시점에서 프로그램 알고 유효한 사용자 이름/암호 쌍으로 잘라내기와 인증 티켓 쿠키를 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-154">If the password guess is correct, the login page will return the authentication ticket cookie, at which point the program knows it has stumbled upon a valid username/password pair.</span></span> <span data-ttu-id="7bc2a-155">무차별을 통해 암호가 강력 하지 않은 경우에 특히에 이러한 프로그램을 사용자의 암호 문제는 자주 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-155">Through brute force, such a program might be able to stumble upon a user's password, especially if the password is weak.</span></span>

<span data-ttu-id="7bc2a-156">이러한 무차별 공격을 방지 하려면 멤버 자격 프레임 워크 특정 특정 기간 내에 실패 한 로그인 시도 수 없으면 사용자 아웃 잠급니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-156">To prevent such brute force attacks, the Membership framework locks out a user if there are a certain number of unsuccessful login attempts within a certain period of time.</span></span> <span data-ttu-id="7bc2a-157">정확한 매개 변수는 다음 두 개의 멤버 자격 공급자 구성 설정을 통해 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-157">The exact parameters are configurable through the following two Membership provider configuration settings:</span></span>

- <span data-ttu-id="7bc2a-158">`maxInvalidPasswordAttempts` -얼마나 많은 잘못 된 암호를 지정 합니다. 계정을 잠그기 전에 기간 내 사용자에 대해 시도할 수 있습니다. 기본값은 5입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-158">`maxInvalidPasswordAttempts` - specifies how many invalid password attempts are allowed for the user within the time period before the account is locked out. The default value is 5.</span></span>
- <span data-ttu-id="7bc2a-159">`passwordAttemptWindow` -기간 (분) 동안 지정 된 잘못 된 로그인 시도 횟수 하면 계정이 잠길 수를 나타냅니다. 기본값은 10입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-159">`passwordAttemptWindow` - indicates the time period in minutes during which the specified number of invalid login attempts will cause the account to be locked out. The default value is 10.</span></span>

<span data-ttu-id="7bc2a-160">사용자가 잠겨, 경우 관리자에 게 계정의 잠금을 해제 될 때까지 로그인 할 수 없습니다 그녀 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-160">If a user has been locked out, she cannot login until an administrator unlocks her account.</span></span> <span data-ttu-id="7bc2a-161">사용자가 잠겨 있는 경우는 `ValidateUser` 메서드는 *항상* 반환 `false`유효한 자격 증명이 제공 하는 경우에 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-161">When a user is locked out, the `ValidateUser` method will *always* return `false`, even if valid credentials are supplied.</span></span> <span data-ttu-id="7bc2a-162">이 동작은 더 쉬워질 수 있습니다 (brute force) 메서드를 통해 사이트 해커가 끊어집니다 가능성이, 하는 동안에 단순히 암호를 잊어버렸으며 실수로 Caps Lock에 또는 잘못 된 입력 하루가 유효한 사용자를 잠그는를 종료할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-162">While this behavior lessens the likelihood that a hacker will break into your site through brute force methods, it can end up locking out a valid user who has simply forgotten her password or accidentally has the Caps Lock on or is having a bad typing day.</span></span>

<span data-ttu-id="7bc2a-163">그러나 사용자 계정 잠금 해제에 대 한 기본 제공 도구가 없는 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-163">Unfortunately, there is no built-in tool for unlocking a user account.</span></span> <span data-ttu-id="7bc2a-164">계정 잠금 해제 하기 위해 데이터베이스를 수정할 수 있습니다 직접 변경 합니다 `IsLockedOut` 필드에 `aspnet_Membership` -적절 한 사용자 계정의 테이블을 만들거나 웹 기반 인터페이스를 나열 하는 계정 잠금 해제 하는 옵션을 사용 하 여 잠긴 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-164">In order to unlock an account, you can modify the database directly - change the `IsLockedOut` field in the `aspnet_Membership` table for the appropriate user account - or create a web-based interface that lists locked out accounts with options to unlock them.</span></span> <span data-ttu-id="7bc2a-165">이후 자습서에서 일반 사용자 계정 및 역할에 관련 된 작업을 수행 하는 것에 대 한 관리 인터페이스를 만들기를 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-165">We will examine creating administrative interfaces for accomplishing common user account- and role-related tasks in a future tutorial.</span></span>

> [!NOTE]
> <span data-ttu-id="7bc2a-166">단점 중 하나는 `ValidateUser` 메서드는 제공 된 자격 증명이 잘못 된 경우 제공 하지 않으며 이유에 대 한 아무런 설명 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-166">One downside of the `ValidateUser` method is that when the supplied credentials are invalid, it does not provide any explanation as to why.</span></span> <span data-ttu-id="7bc2a-167">자격 증명에에서 있기 때문에 일치 하는 사용자 이름/암호 쌍을 없습니다 사용자 저장소 또는 사용자 아직 승인 되지 않은, 때문에 또는 사용자를 잠겨 있기 때문에 유효 하지 수 있습니다. 4 단계에서에서 해당 로그인에 실패할 경우 사용자에 게 자세한 메시지를 표시 하는 방법을 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-167">The credentials may be invalid because there is no matching username/password pair in the user store, or because the user has not yet been approved, or because the user has been locked out. In Step 4 we will see how to show a more detailed message to the user when their login attempt fails.</span></span>


## <a name="step-2-collecting-credentials-through-the-login-web-control"></a><span data-ttu-id="7bc2a-168">로그인 웹 컨트롤을 통해 자격 증명을 수집 하는 2 단계:</span><span class="sxs-lookup"><span data-stu-id="7bc2a-168">Step 2: Collecting Credentials through the Login Web Control</span></span>

<span data-ttu-id="7bc2a-169">합니다 [로그인 웹 컨트롤](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx) 기본 사용자 인터페이스를 다시 만든 것과 매우 비슷합니다 렌더링 합니다 <a id="SKM5"> </a> [ *는 폼 인증 개요* ](../introduction/an-overview-of-forms-authentication-cs.md) 자습서.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-169">The [Login Web control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx) renders a default user interface very similar to the one we created back in the <a id="SKM5"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-cs.md) tutorial.</span></span> <span data-ttu-id="7bc2a-170">로그인 컨트롤을 사용 하 여 방문자가 자격 증명을 수집 하는 인터페이스를 만드는 경우의 작업을 덕분입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-170">Using the Login control saves us the work of having to create the interface to collect the visitor�s credentials.</span></span> <span data-ttu-id="7bc2a-171">또한 로그인 컨트롤 자동으로 로그인 (제출 된 자격 증명이 잘못 가정), 사용자 함으로써 우리 저장 코드를 작성 하지 않고도 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-171">Moreover, the Login control automatically signs in the user (assuming the submitted credentials are valid), thereby saving us from having to write any code.</span></span>

<span data-ttu-id="7bc2a-172">업데이트 해 보겠습니다 `Login.aspx`를 수동으로 만든된 인터페이스를 대체 하 고 로그인 컨트롤을 사용 하 여 코딩 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-172">Let's update `Login.aspx`, replacing the manually created interface and code with a Login control.</span></span> <span data-ttu-id="7bc2a-173">기존 태그를 제거 하 여 시작 하 고 코드 `Login.aspx`합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-173">Start by removing the existing markup and code in `Login.aspx`.</span></span> <span data-ttu-id="7bc2a-174">완전 한, 삭제 하거나 주석으로 처리는 단순히 있습니다. 선언적 태그를 주석으로 사용 하 여 둘러싸서 합니다 `<%--` 및 `--%>` 구분 기호입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-174">You may delete it outright, or simply comment it out. To comment out declarative markup, surround it with the `<%--` and `--%>` delimiters.</span></span> <span data-ttu-id="7bc2a-175">이러한 구분 기호를 수동으로 입력할 수 있습니다 또는 그림 2에서 알 수 있듯이, 주석 처리를 누른 다음 도구 모음에서 선택한 줄 아이콘 주석 텍스트를 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-175">You can enter these delimiters manually, or, as Figure 2 shows, you may select the text to comment out and then click the Comment out the selected lines icon in the Toolbar.</span></span> <span data-ttu-id="7bc2a-176">마찬가지로, 아이콘을 선택한 줄 주석 코드 숨김 클래스에서 선택한 코드를 주석 처리를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-176">Similarly, you can use the Comment out the selected lines icon to comment out the selected code in the code-behind class.</span></span>


<span data-ttu-id="7bc2a-177">[![선언적 태그 기존 및 Login.aspx의 소스 코드 주석](validating-user-credentials-against-the-membership-user-store-cs/_static/image5.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="7bc2a-177">[![Comment Out the Existing Declarative Markup and Source Code in Login.aspx](validating-user-credentials-against-the-membership-user-store-cs/_static/image5.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image4.png)</span></span>

<span data-ttu-id="7bc2a-178">**그림 2**: 주석 아웃은 기존 선언적 태그 및 소스 코드 `Login.aspx` ([클릭 하 여 큰 이미지 보기](validating-user-credentials-against-the-membership-user-store-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="7bc2a-178">**Figure 2**: Comment Out the Existing Declarative Markup and Source Code in `Login.aspx` ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image6.png))</span></span>


> [!NOTE]
> <span data-ttu-id="7bc2a-179">선택한 줄 아이콘 주석 Visual Studio 2005에서 선언적 태그를 볼 때 사용할 수 없는 경우</span><span class="sxs-lookup"><span data-stu-id="7bc2a-179">The Comment out the selected lines icon is not available when viewing the declarative markup in Visual Studio 2005.</span></span> <span data-ttu-id="7bc2a-180">Visual Studio 2008을 사용 하지 않는 경우 수동으로 추가 해야 합니다는 `<%--` 고 `--%>` 구분 기호입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-180">If you are not using Visual Studio 2008 you will need to manually add the `<%--` and `--%>` delimiters.</span></span>


<span data-ttu-id="7bc2a-181">다음으로, 로그인 컨트롤을 페이지에 도구 상자에서 끌어서 설정 해당 `ID` 속성을 `myLogin`입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-181">Next, drag a Login control from the Toolbox on to the page and set its `ID` property to `myLogin`.</span></span> <span data-ttu-id="7bc2a-182">이 시점에서 화면 그림 3 유사 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-182">At this point your screen should look similar to Figure 3.</span></span> <span data-ttu-id="7bc2a-183">Login 컨트롤의 기본 인터페이스 이름과 암호는 암호 저장에 대 한 TextBox 컨트롤에 포함 하는 참고는 다음 확인란을 선택 하 고 로그에서 단추 시간입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-183">Note that the Login control's default interface includes TextBox controls for the username and password, a Remember me next time CheckBox, and a Log In Button.</span></span> <span data-ttu-id="7bc2a-184">이 밖에도 `RequiredFieldValidator` 두 텍스트 상자에 대 한 제어 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-184">There are also `RequiredFieldValidator` controls for the two TextBoxes.</span></span>


<span data-ttu-id="7bc2a-185">[![로그인 컨트롤을 페이지 추가](validating-user-credentials-against-the-membership-user-store-cs/_static/image8.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="7bc2a-185">[![Add a Login Control to the Page](validating-user-credentials-against-the-membership-user-store-cs/_static/image8.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image7.png)</span></span>

<span data-ttu-id="7bc2a-186">**그림 3**: 로그인 컨트롤을 페이지 추가 ([큰 이미지를 보려면 클릭](validating-user-credentials-against-the-membership-user-store-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="7bc2a-186">**Figure 3**: Add a Login Control to the Page  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image9.png))</span></span>


<span data-ttu-id="7bc2a-187">및 완료 되었습니다!</span><span class="sxs-lookup"><span data-stu-id="7bc2a-187">And we're done!</span></span> <span data-ttu-id="7bc2a-188">Login 컨트롤의 로그인 단추를 클릭 하면 포스트백이 발생 하 고 로그인 컨트롤을 호출 하는 `Membership.ValidateUser` 메서드를 입력 한 사용자 이름 및 암호를 전달 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-188">When the Login control's Log In button is clicked, a postback will occur and the Login control will call the `Membership.ValidateUser` method, passing in the entered username and password.</span></span> <span data-ttu-id="7bc2a-189">잘못 된 자격 증명을 로그인 컨트롤 같은 메시지가 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-189">If the credentials are invalid, the Login control displays a message stating such.</span></span> <span data-ttu-id="7bc2a-190">그러나 자격 증명이 유효 하는 경우 로그인 컨트롤 폼 인증 티켓을 만들어 및 적절 한 페이지로 사용자를 리디렉션합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-190">If, however, the credentials are valid, then the Login control creates the forms authentication ticket and redirects the user to the appropriate page.</span></span>

<span data-ttu-id="7bc2a-191">Login 컨트롤 네 가지 요소를 사용 하 여 로그인이 성공 하면 사용자를 리디렉션할 적절 한 페이지를 확인 하려면:</span><span class="sxs-lookup"><span data-stu-id="7bc2a-191">The Login control uses four factors to determine the appropriate page to redirect the user to upon a successful login:</span></span>

- <span data-ttu-id="7bc2a-192">Login 컨트롤 인지 로그인 페이지에 정의 된 대로 `loginUrl` 이 설정의 기본값은 없으며 폼 인증 구성에서 설정 `Login.aspx`</span><span class="sxs-lookup"><span data-stu-id="7bc2a-192">Whether the Login control is on the login page as defined by `loginUrl` setting in the forms authentication configuration; this setting's default value is `Login.aspx`</span></span>
- <span data-ttu-id="7bc2a-193">현재 상태를 `ReturnUrl` querystring 매개 변수</span><span class="sxs-lookup"><span data-stu-id="7bc2a-193">The presence of a `ReturnUrl` querystring parameter</span></span>
- <span data-ttu-id="7bc2a-194">로그인 컨트롤의 값 [ `DestinationUrl` 속성](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.destinationpageurl.aspx)</span><span class="sxs-lookup"><span data-stu-id="7bc2a-194">The value of the Login control's [`DestinationUrl` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.destinationpageurl.aspx)</span></span>
- <span data-ttu-id="7bc2a-195">`defaultUrl` 인증 구성 설정 형식에 지정 된 값이이 설정의 기본값은; `Default.aspx`</span><span class="sxs-lookup"><span data-stu-id="7bc2a-195">The `defaultUrl` value specified in the forms authentication configuration settings; this setting's default value is `Default.aspx`</span></span>

<span data-ttu-id="7bc2a-196">그림 4는 방법을 보여 주며 로그인 컨트롤에서 해당 페이지를 적절 한 의사 결정에 도착 하는 데 이러한 4 개의 매개 변수를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-196">Figure 4 depicts the how the Login control uses these four parameters to arrive at its appropriate page decision.</span></span>


<span data-ttu-id="7bc2a-197">[![로그인 컨트롤을 페이지 추가](validating-user-credentials-against-the-membership-user-store-cs/_static/image11.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="7bc2a-197">[![Add a Login Control to the Page](validating-user-credentials-against-the-membership-user-store-cs/_static/image11.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image10.png)</span></span>

<span data-ttu-id="7bc2a-198">**그림 4**: 로그인 컨트롤을 페이지 추가 ([큰 이미지를 보려면 클릭](validating-user-credentials-against-the-membership-user-store-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="7bc2a-198">**Figure 4**: Add a Login Control to the Page  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image12.png))</span></span>


<span data-ttu-id="7bc2a-199">브라우저를 통해 사이트를 방문 하 고 멤버 자격 프레임 워크에서 기존 사용자로 로그인 하 여 로그인 컨트롤을 테스트 하려면 잠시 시간이 소요 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-199">Take a moment to test out the Login control by visiting the site through a browser and logging in as an existing user in the Membership framework.</span></span>

<span data-ttu-id="7bc2a-200">Login 컨트롤의 렌더링 된 인터페이스는 항상 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-200">The Login control's rendered interface is highly configurable.</span></span> <span data-ttu-id="7bc2a-201">다양 한 모양을;에 영향을 주는 속성 게다가 Login 컨트롤 변환할 수 있습니다 정확 하 게 제어할 레이아웃에 대 한 템플릿을 사용자 인터페이스 요소입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-201">There are a number of properties that influence its appearance; what's more, the Login control can be converted into a template for precise control over the layout the user interface elements.</span></span> <span data-ttu-id="7bc2a-202">이 단계의 나머지 모양과 레이아웃을 사용자 지정 하는 방법을 검사 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-202">The remainder of this step examines how to customize the appearance and layout.</span></span>

### <a name="customizing-the-login-controls-appearance"></a><span data-ttu-id="7bc2a-203">Login 컨트롤의 모양 사용자 지정</span><span class="sxs-lookup"><span data-stu-id="7bc2a-203">Customizing the Login Control's Appearance</span></span>

<span data-ttu-id="7bc2a-204">Login 컨트롤의 기본 속성 설정을 제목 (로그인)를 사용 하 여 사용자 인터페이스를 렌더링, 확인란을 선택 하 고 로그인 단추에 다음 텍스트 상자 및 레이블 컨트롤을 암호 저장 사용자 이름 및 암호 입력에 대 한 시간입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-204">The Login control's default property settings render a user interface with a title ( Log In ), TextBox and Label controls for the username and password inputs, a Remember me next time CheckBox, and a Log In button.</span></span> <span data-ttu-id="7bc2a-205">이러한 요소의 모양을 모든 로그인 컨트롤의 다양 한 속성을 통해 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-205">The appearances of these elements are all configurable through the Login control's numerous properties.</span></span> <span data-ttu-id="7bc2a-206">또한 새 사용자 계정 만들기-페이지에 대 한 링크와 같은 추가 사용자 인터페이스 요소-속성 또는 두 개를 설정 하 여 추가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-206">Furthermore, additional user interface elements - such as a link to a page to create a new user account - can be added by setting a property or two.</span></span>

<span data-ttu-id="7bc2a-207">Gussy 우리의 로그인 컨트롤의 모양을 구성 하는 데는 몇 분 정도 소요 보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-207">Let's spend a few moments to gussy up the appearance of our Login control.</span></span> <span data-ttu-id="7bc2a-208">이후를 `Login.aspx` 페이지에 이미 로그인 라는 페이지의 맨 위에 있는 텍스트, 로그인 컨트롤의 제목은 불필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-208">Since the `Login.aspx` page already has text at the top of the page that says Login, the Login control's title is superfluous.</span></span> <span data-ttu-id="7bc2a-209">따라서 지울 합니다 [ `TitleText` 속성](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.titletext.aspx) 로그인 컨트롤의 제목을 제거 하려면 값입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-209">Therefore, clear out the [`TitleText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.titletext.aspx) value in order to remove the Login control's title.</span></span>

<span data-ttu-id="7bc2a-210">사용자 이름: 및 암호: 두 TextBox 컨트롤의 왼쪽에 레이블을 통해 사용자 지정할 수 있습니다 합니다 [ `UserNameLabelText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.usernamelabeltext.aspx) 하 고 [ `PasswordLabelText` 속성](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordlabeltext.aspx)각각.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-210">The User Name: and Password: Labels to the left of the two TextBox controls can be customized through the [`UserNameLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.usernamelabeltext.aspx) and [`PasswordLabelText` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordlabeltext.aspx), respectively.</span></span> <span data-ttu-id="7bc2a-211">이름을 변경 하 고 사용자: Username을 읽기 위한 레이블:입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-211">Let's change the User Name: Label to read Username:.</span></span> <span data-ttu-id="7bc2a-212">레이블과 텍스트 상자 스타일을 통해 구성할 수는 [ `LabelStyle` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.labelstyle.aspx) 하 고 [ `TextBoxStyle` 속성](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textboxstyle.aspx), 각각.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-212">The Label and TextBox styles are configurable through the [`LabelStyle`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.labelstyle.aspx) and [`TextBoxStyle` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textboxstyle.aspx), respectively.</span></span>

<span data-ttu-id="7bc2a-213">기억 me 로그인 컨트롤을 통해 다음 시간 확인란의 텍스트 속성을 설정할 수 있습니다 [ `RememberMeText property` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermetext.aspx), 기본 확인 상태를 통해 구성할 수는 [ `RememberMeSet property` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermeset.aspx) ( 기본값은 False)입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-213">The Remember me next time CheckBox's Text property can be set through the Login control's [`RememberMeText property`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermetext.aspx), and its default checked state is configurable through the [`RememberMeSet property`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermeset.aspx) (which defaults to False).</span></span> <span data-ttu-id="7bc2a-214">계속 해 서 설정 된 `RememberMeSet` 속성을 다음 시간을 암호 저장 확인란 있도록 true로 기본으로 선택 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-214">Go ahead and set the `RememberMeSet` property to True so that the Remember me next time CheckBox will be checked by default.</span></span>

<span data-ttu-id="7bc2a-215">Login 컨트롤은 해당 사용자 인터페이스 컨트롤의 레이아웃을 조정 하는 것에 대 한 두 가지 속성을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-215">The Login control offers two properties for adjusting the layout of its user interface controls.</span></span> <span data-ttu-id="7bc2a-216">합니다 [ `TextLayout property` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textlayout.aspx) 나타냅니다 여부를 사용자 이름: 및 암호:가 해당 텍스트 상자 (기본값) 또는 상위 왼쪽에 레이블을 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-216">The [`TextLayout property`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textlayout.aspx) indicates whether the Username: and Password: Labels appear to the left of their corresponding TextBoxes (the default), or above them.</span></span> <span data-ttu-id="7bc2a-217">합니다 [ `Orientation property` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.orientation.aspx) 사용자 이름 및 암호 입력 세로로 배치 하는지 여부를 나타냅니다 (위와 다른) 또는 수평으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-217">The [`Orientation property`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.orientation.aspx) indicates whether the username and password inputs are situated vertically (one above the other) or horizontally.</span></span> <span data-ttu-id="7bc2a-218">이러한 두 속성을 기본값으로 설정 유지 하려고 하지만 결과 효과 확인 하려면 기본이 아닌 값으로 이러한 두 속성을 설정 하려는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-218">I am going to leave these two properties set to their defaults, but I encourage you to try setting these two properties to their non-default values to see the resulting effect.</span></span>

> [!NOTE]
> <span data-ttu-id="7bc2a-219">다음 섹션에서는 로그인 컨트롤의 레이아웃을 구성 살펴보겠습니다 템플릿을 사용 하 여 레이아웃 컨트롤의 사용자 인터페이스 요소의 정확한 레이아웃을 정의 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-219">In the next section, Configuring the Login Control's Layout, we will look at using templates to define the precise layout of the Layout control's user interface elements.</span></span>


<span data-ttu-id="7bc2a-220">Login 컨트롤의 속성 설정을 설정 하 여 마무리 합니다 [ `CreateUserText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createusertext.aspx) 및 [ `CreateUserUrl` 속성](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createuserurl.aspx) 아직 등록 되지 않음에?</span><span class="sxs-lookup"><span data-stu-id="7bc2a-220">Wrap up the Login control's property settings by setting the [`CreateUserText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createusertext.aspx) and [`CreateUserUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createuserurl.aspx) to Not registered yet?</span></span> <span data-ttu-id="7bc2a-221">계정 만들기</span><span class="sxs-lookup"><span data-stu-id="7bc2a-221">Create an account!</span></span> <span data-ttu-id="7bc2a-222">및 `~/Membership/CreatingUserAccounts.aspx`, 각각.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-222">and `~/Membership/CreatingUserAccounts.aspx`, respectively.</span></span> <span data-ttu-id="7bc2a-223">만든 Login 컨트롤의 인터페이스는 페이지를 가리키는 하이퍼링크를 추가 합니다 <a id="SKM6"> </a> [이전 자습서](creating-user-accounts-cs.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-223">This adds a hyperlink to the Login control's interface pointing to the page we created in the <a id="SKM6"></a>[preceding tutorial](creating-user-accounts-cs.md).</span></span> <span data-ttu-id="7bc2a-224">Login 컨트롤의 [ `HelpPageText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppagetext.aspx) 하 고 [ `HelpPageUrl` 속성](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppageurl.aspx) 및 [ `PasswordRecoveryText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoverytext.aspx) 하 고 [ `PasswordRecoveryUrl` 속성](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoveryurl.aspx) 도움말 페이지 및 암호 복구 페이지에 대 한 링크를 렌더링 하 동일한 방식으로 작동 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-224">The Login control's [`HelpPageText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppagetext.aspx) and [`HelpPageUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppageurl.aspx) and [`PasswordRecoveryText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoverytext.aspx) and [`PasswordRecoveryUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoveryurl.aspx) work in the same manner, rendering links to a help page and a password recovery page.</span></span>

<span data-ttu-id="7bc2a-225">속성을 변경한 후 로그인 컨트롤의 선언적 태그 및 모양을 유사 그림 5에 표시 된 것입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-225">After making these property changes, your Login control's declarative markup and appearance should look similar to that shown in Figure 5.</span></span>


<span data-ttu-id="7bc2a-226">[![Login 컨트롤의 속성 값의 모양을 지정합니다](validating-user-credentials-against-the-membership-user-store-cs/_static/image14.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="7bc2a-226">[![The Login Control's Properties' Values Dictate Its Appearance](validating-user-credentials-against-the-membership-user-store-cs/_static/image14.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image13.png)</span></span>

<span data-ttu-id="7bc2a-227">**그림 5**: The 로그인 컨트롤의 속성 값 결정 해당 모양 ([큰 이미지를 보려면 클릭](validating-user-credentials-against-the-membership-user-store-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="7bc2a-227">**Figure 5**: The Login Control's Properties' Values Dictate Its Appearance  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image15.png))</span></span>


### <a name="configuring-the-login-controls-layout"></a><span data-ttu-id="7bc2a-228">Login 컨트롤의 레이아웃을 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-228">Configuring the Login Control's Layout</span></span>

<span data-ttu-id="7bc2a-229">로그인 웹 컨트롤의 기본 사용자 인터페이스는 html에서 인터페이스 레이아웃 `<table>`합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-229">The Login Web control's default user interface lays out the interface in an HTML `<table>`.</span></span> <span data-ttu-id="7bc2a-230">그러나 렌더링 된 출력을 보다 세부적으로 제어 해야 될까요?</span><span class="sxs-lookup"><span data-stu-id="7bc2a-230">But what if we need finer control over the rendered output?</span></span> <span data-ttu-id="7bc2a-231">으로 대체 합니다 `<table>` 일련의 `<div>` 태그입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-231">Maybe we want to replace the `<table>` with a series of `<div>` tags.</span></span> <span data-ttu-id="7bc2a-232">또는 응용 프로그램 인증에 대 한 추가 자격 증명을 요구 하는 경우에 어떨까요?</span><span class="sxs-lookup"><span data-stu-id="7bc2a-232">Or what if our application requires additional credentials for authentication?</span></span> <span data-ttu-id="7bc2a-233">많은 재무 웹 사이트에는 예를 들어 뿐 아니라 사용자 이름 및 암호를 하지만 또한을 개인 식별 번호 (PIN), 또는 기타 식별 정보를 입력 하 게 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-233">Many financial websites, for instance, require users to supply not only a username and password, but also a Personal Identification Number (PIN), or other identifying information.</span></span> <span data-ttu-id="7bc2a-234">어떤 이유 수, 로그인 컨트롤을 정의할 수 있습니다 명시적으로 인터페이스를 선언적 태그 템플릿으로 변환할 가능성이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-234">Whatever the reasons may be, it is possible to convert the Login control into a template, from which we can explicitly define the interface's declarative markup.</span></span>

<span data-ttu-id="7bc2a-235">추가 자격 증명을 수집 하려면 로그인 컨트롤을 업데이트 하기 위해 두 가지를 수행 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-235">We need to do two things in order to update the Login control to collect additional credentials:</span></span>

1. <span data-ttu-id="7bc2a-236">추가 자격 증명을 수집 하려면 웹 컨트롤을 포함 하도록 로그인 컨트롤의 인터페이스를 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-236">Update the Login control's interface to include Web control(s) to collect the additional credentials.</span></span>
2. <span data-ttu-id="7bc2a-237">사용자가 사용자 이름과 암호가 유효 하 고 추가 자격 증명도 유효한 경우에 인증 됩니다 있도록 로그인 컨트롤의 내부 인증 논리를 재정의 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-237">Override the Login control's internal authentication logic so that a user is only authenticated if their username and password is valid and their additional credentials are valid, too.</span></span>

<span data-ttu-id="7bc2a-238">첫 번째 작업을 수행 하려면 Login 컨트롤 템플릿으로 변환 하 고 필요한 웹 컨트롤을 추가 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-238">To accomplish the first task, we need to convert the Login control into a template and add the necessary Web controls.</span></span> <span data-ttu-id="7bc2a-239">두 번째 작업의 경우 Login 컨트롤의 인증 논리 대체 될 수 있습니다 컨트롤에 대 한 이벤트 처리기를 만들어 [ `Authenticate` 이벤트](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-239">As for the second task, the Login control's authentication logic can be superseded by creating an event handler for the control's [`Authenticate` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span></span>

<span data-ttu-id="7bc2a-240">자신의 사용자 이름, 암호 및 전자 메일 주소에 대 한 메시지를 표시 하 고 제공 된 전자 메일 주소가 파일에서 전자 메일 주소와 일치 하는 경우에 사용자를 인증 있도록 Login 컨트롤을 업데이트 해 보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-240">Let's update the Login control so that it prompts users for their username, password, and email address and only authenticates the user if the email address supplied matches their email address on file.</span></span> <span data-ttu-id="7bc2a-241">먼저 로그인 컨트롤의 인터페이스를 템플릿으로 변환 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-241">We first need to convert the Login control's interface to a template.</span></span> <span data-ttu-id="7bc2a-242">Login 컨트롤의 스마트 태그에서 템플릿 옵션으로 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-242">From the Login control's Smart Tag, choose the Convert to template option.</span></span>


<span data-ttu-id="7bc2a-243">[![Login 컨트롤 템플릿으로 변환](validating-user-credentials-against-the-membership-user-store-cs/_static/image17.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="7bc2a-243">[![Convert the Login Control to a Template](validating-user-credentials-against-the-membership-user-store-cs/_static/image17.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image16.png)</span></span>

<span data-ttu-id="7bc2a-244">**그림 6**: Login 컨트롤 템플릿으로 변환 ([큰 이미지를 보려면 클릭](validating-user-credentials-against-the-membership-user-store-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="7bc2a-244">**Figure 6**: Convert the Login Control to a Template  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image18.png))</span></span>


> [!NOTE]
> <span data-ttu-id="7bc2a-245">Login 컨트롤 미리 template 버전으로 되돌리려면 컨트롤의 스마트 태그에서 다시 설정 링크를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-245">To revert the Login control to its pre-template version, click the Reset link from the control's Smart Tag.</span></span>


<span data-ttu-id="7bc2a-246">추가 로그인 컨트롤을 템플릿으로 변환는 `LayoutTemplate` HTML 요소 및 사용자 인터페이스를 정의 하는 웹 컨트롤을 사용 하 여 컨트롤의 선언적 태그를 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-246">Converting the Login control to a template adds a `LayoutTemplate` to the control's declarative markup with HTML elements and Web controls defining the user interface.</span></span> <span data-ttu-id="7bc2a-247">그림 7에서 알 수 있듯이, 컨트롤을 템플릿으로 변환 제거 다양 한 속성이 속성 창에서와 같은 `TitleText`, `CreateUserUrl`등, 있으므로 템플릿을 사용 하는 경우 이러한 속성 값은 무시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-247">As Figure 7 shows, converting the control to a template removes a number of properties from the Properties window, such as `TitleText`, `CreateUserUrl`, and so forth, since these property values are ignored when using a template.</span></span>


<span data-ttu-id="7bc2a-248">[![적은 수의 속성은 사용할 수 있는 경우는 로그인 컨트롤 템플릿으로 변환 하는](validating-user-credentials-against-the-membership-user-store-cs/_static/image20.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="7bc2a-248">[![Fewer Properties are Available When the Login Control is Converted to a Template](validating-user-credentials-against-the-membership-user-store-cs/_static/image20.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image19.png)</span></span>

<span data-ttu-id="7bc2a-249">**그림 7**: 적은 수의 속성은 사용할 수 있는 경우는 로그인 컨트롤 템플릿으로 변환 됩니다 ([큰 이미지를 보려면 클릭](validating-user-credentials-against-the-membership-user-store-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="7bc2a-249">**Figure 7**: Fewer Properties are Available When the Login Control is Converted to a Template  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image21.png))</span></span>


<span data-ttu-id="7bc2a-250">HTML 태그를 `LayoutTemplate` 필요에 따라 수정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-250">The HTML markup in the `LayoutTemplate` may be modified as needed.</span></span> <span data-ttu-id="7bc2a-251">마찬가지로, 언제 든 지 새 웹 컨트롤 템플릿에 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-251">Likewise, feel free to add any new Web controls to the template.</span></span> <span data-ttu-id="7bc2a-252">그러나 반드시 해당 로그인 컨트롤의 핵심 웹 컨트롤 서식 파일에 남아 있으며 할당 된 유지 `ID` 값입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-252">However, it is important that Login control's core Web controls remain in the template and keep their assigned `ID` values.</span></span> <span data-ttu-id="7bc2a-253">특히 제거 하거나 마십시오 이름 바꾸기는 `UserName` 또는 `Password` 텍스트 상자를 `RememberMe` 확인란을를 `LoginButton` 단추를 `FailureText` 레이블을 또는 `RequiredFieldValidator` 컨트롤.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-253">In particular, do not remove or rename the `UserName` or `Password` TextBoxes, the `RememberMe` CheckBox, the `LoginButton` Button, the `FailureText` Label, or the `RequiredFieldValidator` controls.</span></span>

<span data-ttu-id="7bc2a-254">방문자의 전자 메일 주소를 수집 하려면 템플릿에 TextBox를 추가 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-254">To collect the visitor's email address, we need to add a TextBox to the template.</span></span> <span data-ttu-id="7bc2a-255">테이블 행 간의 다음 선언적 태그를 추가 (`<tr>`)를 포함 하는 `Password` 텍스트 상자 및 암호 저장 다음 보유 하는 테이블 행 확인란 시간:</span><span class="sxs-lookup"><span data-stu-id="7bc2a-255">Add the following declarative markup between the table row (`<tr>`) that contains the `Password` TextBox and the table row that holds the Remember me next time CheckBox:</span></span>

[!code-aspx[Main](validating-user-credentials-against-the-membership-user-store-cs/samples/sample2.aspx)]

<span data-ttu-id="7bc2a-256">추가한 후의 `Email` 텍스트 상자에 브라우저를 통해 페이지를 방문 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-256">After adding the `Email` TextBox, visit the page through a browser.</span></span> <span data-ttu-id="7bc2a-257">그림 8에서 알 수 있듯이, 로그인 컨트롤의 사용자 인터페이스는 이제 세 번째 텍스트 상자를 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-257">As Figure 8 shows, the Login control's user interface now includes a third textbox.</span></span>


<span data-ttu-id="7bc2a-258">[![Login 컨트롤 이제 사용자의 전자 메일 주소에 대 한 텍스트를 포함](validating-user-credentials-against-the-membership-user-store-cs/_static/image23.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="7bc2a-258">[![The Login Control Now Includes a Textbox for the User's Email Address](validating-user-credentials-against-the-membership-user-store-cs/_static/image23.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image22.png)</span></span>

<span data-ttu-id="7bc2a-259">**그림 8**: Login 컨트롤 이제 사용자의 전자 메일 주소에 대 한 텍스트를 포함 ([큰 이미지를 보려면 클릭](validating-user-credentials-against-the-membership-user-store-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="7bc2a-259">**Figure 8**: The Login Control Now Includes a Textbox for the User's Email Address  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image24.png))</span></span>


<span data-ttu-id="7bc2a-260">Login 컨트롤이 시점에서 여전히 사용 하 여 `Membership.ValidateUser` 제공된 된 자격 증명의 유효성을 검사 하는 방법입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-260">At this point, the Login control is still using the `Membership.ValidateUser` method to validate the supplied credentials.</span></span> <span data-ttu-id="7bc2a-261">마찬가지로, 값을 입력 합니다 `Email` 텍스트 상자에 사용자 로그인 할 수 있는지 여부에 관여 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-261">Correspondingly, the value entered into the `Email` TextBox has no bearing on whether the user can log in.</span></span> <span data-ttu-id="7bc2a-262">3 단계에서에서 자격 증명은만 유효 사용자 이름 및 암호 유효 하 고 제공 된 전자 메일 주소 파일에서 전자 메일 주소와 일치 하는 경우 수 있도록 로그인 컨트롤의 인증 논리를 재정의 하는 방법을 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-262">In Step 3 we will look at how to override the Login control's authentication logic so that the credentials are only considered valid if the username and password are valid and the supplied email address matches up with the email address on file.</span></span>

## <a name="step-3-modifying-the-login-controls-authentication-logic"></a><span data-ttu-id="7bc2a-263">3 단계: 로그인 컨트롤의 인증 논리를 수정합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-263">Step 3: Modifying the Login Control's Authentication Logic</span></span>

<span data-ttu-id="7bc2a-264">그녀는 방문자가 제공 하는 경우 로그인 자격 증명 및 로그인 단추를 다시 게시 근거가 번의 클릭 만으로 인증 워크플로 진행을 제어 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-264">When a visitor supplies her credentials and clicks the Log In button, a postback ensues and the Login control progresses through its authentication workflow.</span></span> <span data-ttu-id="7bc2a-265">시켜 워크플로 시작 합니다 [ `LoggingIn` 이벤트](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggingin.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-265">The workflow starts by raising the [`LoggingIn` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggingin.aspx).</span></span> <span data-ttu-id="7bc2a-266">이 이벤트와 연결 된 모든 이벤트 처리기를 설정 하 여 작업에 대 한 로그인을 취소할 수는 `e.Cancel` 속성을 `true`입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-266">Any event handlers associated with this event may cancel the log in operation by setting the `e.Cancel` property to `true`.</span></span>

<span data-ttu-id="7bc2a-267">시켜 워크플로 진행 중인 작업의 로그를 취소 하지 않으면 경우는 [ `Authenticate` 이벤트](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-267">If the log in operation is not cancelled, the workflow progresses by raising the [`Authenticate` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span></span> <span data-ttu-id="7bc2a-268">경우에 대 한 이벤트 처리기는 `Authenticate` 이벤트,이 제공 된 자격 증명이 유효한 지 여부를 결정 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-268">If there is an event handler for the `Authenticate` event, then it is responsible for determining whether the supplied credentials are valid or not.</span></span> <span data-ttu-id="7bc2a-269">이벤트 처리기를 지정 하는 경우 로그인 컨트롤에 사용 된 `Membership.ValidateUser` 자격 증명의 유효성을 검사 하는 방법입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-269">If no event handler is specified, the Login control uses the `Membership.ValidateUser` method to determine the validity of the credentials.</span></span>

<span data-ttu-id="7bc2a-270">제공 된 자격 증명이 유효한 경우 폼 인증 티켓이 만들어지면 합니다 [ `LoggedIn` 이벤트](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggedin.aspx) 발생 및 적절 한 페이지로 리디렉션됩니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-270">If the supplied credentials are valid, then the forms authentication ticket is created, the [`LoggedIn` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggedin.aspx) is raised, and the user is redirected to the appropriate page.</span></span> <span data-ttu-id="7bc2a-271">그러나 자격 증명은 잘못 된 경우 간주 하는 경우 해당 [ `LoginError` 이벤트](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loginerror.aspx) 발생 하는 자격 증명 잘못 된 사용자에 게 알리는 메시지가 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-271">If, however, the credentials are deemed invalid, then the [`LoginError` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loginerror.aspx) is raised and a message is displayed informing the user that their credentials were invalid.</span></span> <span data-ttu-id="7bc2a-272">기본적으로 로그인 실패 시 컨트롤 간단히 설정 해당 `FailureText` (로그인 시도 하지 못했습니다 오류 메시지를 컨트롤의 텍스트 속성 레이블.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-272">By default, on failure the Login control simply sets its `FailureText` Label control's Text property to a failure message ( Your login attempt was not successful.</span></span> <span data-ttu-id="7bc2a-273">다시 시도 하세요).</span><span class="sxs-lookup"><span data-stu-id="7bc2a-273">Please try again ).</span></span> <span data-ttu-id="7bc2a-274">그러나 경우 로그인 컨트롤의 [ `FailureAction` 속성](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failureaction.aspx) 로 설정 되어 `RedirectToLoginPage`, 다음 로그인 컨트롤 문제를 `Response.Redirect` querystring 매개 변수를 추가 하는 로그인 페이지로 `loginfailure=1` (그러면 로그인 오류 메시지를 표시할 컨트롤)입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-274">However, if the Login control's [`FailureAction` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failureaction.aspx) is set to `RedirectToLoginPage`, then the Login control issues a `Response.Redirect` to the login page appending the querystring parameter `loginfailure=1` (which causes the Login control to display the failure message).</span></span>

<span data-ttu-id="7bc2a-275">그림 9에서는 인증 워크플로 순서도 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-275">Figure 9 offers a flow chart of the authentication workflow.</span></span>


<span data-ttu-id="7bc2a-276">[![Login 컨트롤의 인증 워크플로](validating-user-credentials-against-the-membership-user-store-cs/_static/image26.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="7bc2a-276">[![The Login Control's Authentication Workflow](validating-user-credentials-against-the-membership-user-store-cs/_static/image26.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image25.png)</span></span>

<span data-ttu-id="7bc2a-277">**그림 9**: The 로그인 컨트롤의 인증 워크플로 ([큰 이미지를 보려면 클릭](validating-user-credentials-against-the-membership-user-store-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="7bc2a-277">**Figure 9**: The Login Control's Authentication Workflow  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image27.png))</span></span>


> [!NOTE]
> <span data-ttu-id="7bc2a-278">사용 시기에 있는지를 `FailureAction`의 `RedirectToLogin` 옵션 페이지, 다음 시나리오를 고려 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-278">If you are wondering when you would use the `FailureAction`'s `RedirectToLogin` page option, consider the following scenario.</span></span> <span data-ttu-id="7bc2a-279">지금 우리 `Site.master` 마스터 페이지에는 현재, Hello, 군에 표시할 텍스트를 익명 사용자가 방문 하는 경우 왼쪽된 열에 있지만 로그인 컨트롤을 사용 하 여 해당 텍스트를 대체 하 려 한다고 가정 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-279">Right now our `Site.master` master page currently has the text, Hello, stranger displayed in the left column when visited by an anonymous user, but imagine that we wanted to replace that text with a Login control.</span></span> <span data-ttu-id="7bc2a-280">이렇게 하면 익명 사용자 로그인 페이지를 직접 방문할 필요 없이 사이트의 모든 페이지에서 로그인 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-280">This would allow an anonymous user to log in from any page on the site, instead of requiring them to visit the login page directly.</span></span> <span data-ttu-id="7bc2a-281">그러나 사용자는 마스터 페이지에서 렌더링 하는 로그인 컨트롤을 통해 로그인 할 수 없는 경우, 해야 로그인 페이지로 리디렉션합니다 (`Login.aspx`) 추가 지침, 링크 및 만들기에 대 한 링크와 같은 다른 도움말-가능성이 해당 페이지에 포함 되어 있으므로 새 계정 또는 마스터 페이지에 추가 되지 않은 암호가 손실된 검색 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-281">However, if a user was unable to log in via the Login control rendered by the master page, it might make sense to redirect them to the login page (`Login.aspx`) because that page likely includes additional instructions, links, and other help - such as links to create a new account or retrieve a lost password - that were not added to the master page.</span></span>


### <a name="creating-theauthenticateevent-handler"></a><span data-ttu-id="7bc2a-282">만들기는`Authenticate`이벤트 처리기</span><span class="sxs-lookup"><span data-stu-id="7bc2a-282">Creating the`Authenticate`Event Handler</span></span>

<span data-ttu-id="7bc2a-283">이 사용자 지정 인증 논리를 연결 하기 위해 Login 컨트롤의 이벤트 처리기를 생성 해야 `Authenticate` 이벤트입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-283">In order to plug in our custom authentication logic, we need to create an event handler for the Login control's `Authenticate` event.</span></span> <span data-ttu-id="7bc2a-284">에 대 한 이벤트 처리기 만들기는 `Authenticate` 이벤트는 다음 이벤트 처리기 정의 생성 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-284">Creating an event handler for the `Authenticate` event will generate the following event handler definition:</span></span>

[!code-csharp[Main](validating-user-credentials-against-the-membership-user-store-cs/samples/sample3.cs)]

<span data-ttu-id="7bc2a-285">알 수 있듯이 합니다 `Authenticate` 이벤트 처리기가 형식의 개체를 전달 [ `AuthenticateEventArgs` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.authenticateeventargs.aspx) 두 번째 입력된 매개 변수로 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-285">As you can see, the `Authenticate` event handler is passed an object of type [`AuthenticateEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.authenticateeventargs.aspx) as its second input parameter.</span></span> <span data-ttu-id="7bc2a-286">합니다 `AuthenticateEventArgs` 라는 부울 속성을 포함 하는 클래스 `Authenticated` 제공 된 자격 증명이 유효한 지 여부를 지정 하는 데 사용 되는 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-286">The `AuthenticateEventArgs` class contains a Boolean property named `Authenticated` that is used to specify whether the supplied credentials are valid.</span></span> <span data-ttu-id="7bc2a-287">우리의 작업, 제공 된 자격 증명이 유효한 지 여부를 결정 하는 코드를 작성 하 고 설정 하려면 그런 다음이 `e.Authenticate` 속성 적절 하 게 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-287">Our task, then, is to write code here that determines whether the supplied credentials are valid or not, and to set the `e.Authenticate` property accordingly.</span></span>

### <a name="determining-and-validating-the-supplied-credentials"></a><span data-ttu-id="7bc2a-288">확인 하 고 제공 된 자격 증명 유효성 검사</span><span class="sxs-lookup"><span data-stu-id="7bc2a-288">Determining and Validating the Supplied Credentials</span></span>

<span data-ttu-id="7bc2a-289">로그인 컨트롤을 사용 하 여 [ `UserName` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.username.aspx) 하 고 [ `Password` 속성](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.password.aspx) 사용자가 입력 한 사용자 이름 및 암호 자격 증명을 확인 하려면.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-289">Use the Login control's [`UserName`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.username.aspx) and [`Password` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.password.aspx) to determine the username and password credentials entered by the user.</span></span> <span data-ttu-id="7bc2a-290">추가 웹 컨트롤에 입력 된 값을 확인 하기 위해 (같은 합니다 `Email` 이전 단계에서 추가한 텍스트 상자)를 사용 하 여 *`LoginControlID`* `.FindControl`("*`controlID`*")를 가져올 프로그래밍에 대 한 참조 웹 컨트롤 템플릿에 해당 `ID` 속성과 같으면 *`controlID`* 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-290">In order to determine the values entered into any additional Web controls (such as the `Email` TextBox we added in the previous step), use *`LoginControlID`*`.FindControl`("*`controlID`*") to obtain a programmatic reference to the Web control in the template whose `ID` property is equal to *`controlID`*.</span></span> <span data-ttu-id="7bc2a-291">예를 들어에 대 한 참조를 가져오려면는 `Email` 텍스트 상자에 다음 코드를 사용:</span><span class="sxs-lookup"><span data-stu-id="7bc2a-291">For example, to get a reference to the `Email` TextBox, use the following code:</span></span>

`TextBox EmailTextBox = myLogin.FindControl("Email") as TextBox;`

<span data-ttu-id="7bc2a-292">사용자의 자격 증명의 유효성을 검사 하기 위해 두 가지를 수행 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-292">In order to validate the user's credentials we need to do two things:</span></span>

1. <span data-ttu-id="7bc2a-293">제공 된 사용자 이름과 암호가 유효한 지 확인</span><span class="sxs-lookup"><span data-stu-id="7bc2a-293">Ensure that the provided username and password are valid</span></span>
2. <span data-ttu-id="7bc2a-294">전자 메일 주소를 입력 한 로그인을 시도 하는 사용자에 대 한 파일의 전자 메일 주소와 일치 하는지 확인</span><span class="sxs-lookup"><span data-stu-id="7bc2a-294">Ensure that email address entered matches the email address on file for the user attempting to log in</span></span>

<span data-ttu-id="7bc2a-295">단순히 사용 하 여 첫 번째 검사를 수행 하는 `Membership.ValidateUser` 1 단계에서에서 본 것 처럼 메서드.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-295">To accomplish the first check we can simply use the `Membership.ValidateUser` method like we saw in Step 1.</span></span> <span data-ttu-id="7bc2a-296">두 번째 확인에 대 한 것은 TextBox 컨트롤에 입력 한 전자 메일 주소로 비교할 수 있도록 사용자의 전자 메일 주소를 확인 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-296">For the second check, we need to determine the user's email address so that we can compare it to the email address they entered into the TextBox control.</span></span> <span data-ttu-id="7bc2a-297">특정 사용자에 대 한 정보를 사용 합니다 `Membership` 클래스의 [ `GetUser` 메서드](https://msdn.microsoft.com/library/system.web.security.membership.getuser.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-297">To get information about a particular user, use the `Membership` class's [`GetUser` method](https://msdn.microsoft.com/library/system.web.security.membership.getuser.aspx).</span></span>

<span data-ttu-id="7bc2a-298">`GetUser` 메서드가 오버 로드의 수입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-298">The `GetUser` method has a number of overloads.</span></span> <span data-ttu-id="7bc2a-299">매개 변수를 전달 하지 않고 사용 하는 경우 현재 로그인된 한 사용자에 대 한 정보를 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-299">If used without passing in any parameters, it returns information about the currently logged in user.</span></span> <span data-ttu-id="7bc2a-300">특정 사용자에 대 한 정보를 얻으려면 호출 `GetUser` 자신의 사용자 이름을 전달 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-300">To get information about a particular user, call `GetUser` passing in their username.</span></span> <span data-ttu-id="7bc2a-301">어느 `GetUser` 반환을 [ `MembershipUser` 개체](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx), 같은 속성이 있는 `UserName`를 `Email`, `IsApproved`, `IsOnline`등.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-301">Either way, `GetUser` returns a [`MembershipUser` object](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx), which has properties like `UserName`, `Email`, `IsApproved`, `IsOnline`, and so on.</span></span>

<span data-ttu-id="7bc2a-302">다음 코드는이 두 가지 검사를 구현합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-302">The following code implements these two checks.</span></span> <span data-ttu-id="7bc2a-303">다음 모두 전달 하는 경우 `e.Authenticate` 로 설정 된 `true`, 그렇지 않으면 할당 `false`합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-303">If both pass, then `e.Authenticate` is set to `true`, otherwise it is assigned `false`.</span></span>

[!code-csharp[Main](validating-user-credentials-against-the-membership-user-store-cs/samples/sample4.cs)]

<span data-ttu-id="7bc2a-304">이 코드를 사용 하 여 올바른 사용자 이름, 암호 및 전자 메일 주소를 입력 합니다. 유효한 사용자로 로그인 하려고 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-304">With this code in place, attempt to log in as a valid user, entering the correct username, password, and email address.</span></span> <span data-ttu-id="7bc2a-305">이 작업을 다시 시도 하지만이 이번에는 의도적으로 잘못 된 전자 메일 주소 사용 (그림 10 참조).</span><span class="sxs-lookup"><span data-stu-id="7bc2a-305">Try it again, but this time purposefully use an incorrect email address (see Figure 10).</span></span> <span data-ttu-id="7bc2a-306">마지막으로, 존재 하지 않는 사용자를 사용 하 여 세 번째로 보세요.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-306">Finally, try it a third time using a non-existent username.</span></span> <span data-ttu-id="7bc2a-307">첫 번째 경우에서는 성공적으로 로그온 사이트로 하지만 마지막 두 경우에서 로그인 컨트롤의 잘못 된 자격 증명 메시지 표시 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-307">In the first case you should be successfully logged on to the site, but in the last two cases you should see the Login control's invalid credentials message.</span></span>


<span data-ttu-id="7bc2a-308">[![잘못 된 전자 메일 주소를 제공 하는 경우 Tito 로그인 할 수 없습니다.](validating-user-credentials-against-the-membership-user-store-cs/_static/image29.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="7bc2a-308">[![Tito Cannot Log In When Supplying an Incorrect Email Address](validating-user-credentials-against-the-membership-user-store-cs/_static/image29.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image28.png)</span></span>

<span data-ttu-id="7bc2a-309">**그림 10**: Tito 없습니다 로그의 경우 잘못 된 전자 메일 주소를 제공 ([큰 이미지를 보려면 클릭](validating-user-credentials-against-the-membership-user-store-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="7bc2a-309">**Figure 10**: Tito Cannot Log In When Supplying an Incorrect Email Address  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image30.png))</span></span>


> [!NOTE]
> <span data-ttu-id="7bc2a-310">1 단계에서에서 하는 방법의 멤버 자격 프레임 워크 처리 잘못 된 로그인 시도 섹션에서 설명한 대로 때는 `Membership.ValidateUser` 잘못 된 로그인 시도 추적에 특정 초과 하는 경우에 사용자를 잠그는 메서드 호출 되 고 잘못 된 자격 증명 전달 지정된 된 시간 창 내에서 잘못 된 시도 횟수의 임계값입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-310">As discussed in the How the Membership Framework Handles Invalid Login Attempts section in Step 1, when the `Membership.ValidateUser` method is called and passed invalid credentials, it keeps track of the invalid login attempt and locks out the user if they exceed a certain threshold of invalid attempts within a specified time window.</span></span> <span data-ttu-id="7bc2a-311">사용자 지정 인증 논리 호출 이후에 `ValidateUser` 메서드를 올바른 사용자 이름에 잘못 된 암호를 잘못 된 로그인 시도 카운터를 하나씩 늘립니다 있지만이 카운터는 사용자 이름 및 암호는 유효한 경우에서 증가 하지 않지만 전자 메일 주소가 올바르지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-311">Since our custom authentication logic calls the `ValidateUser` method, an incorrect password for a valid username will increment the invalid login attempt counter, but this counter is not incremented in the case where the username and password are valid, but the email address is incorrect.</span></span> <span data-ttu-id="7bc2a-312">그럴 경우이 동작은 적합 가능성이 해커는 사용자 이름과 암호를 알지만 무작위 기술을 사용 하 여 사용자의 전자 메일 주소를 확인할 필요가 없기 때문입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-312">Chances are, this behavior is suitable, since it's unlikely that a hacker will know the username and password, but have to use brute force techniques to determine the user's email address.</span></span>


## <a name="step-4-improving-the-login-controls-invalid-credentials-message"></a><span data-ttu-id="7bc2a-313">4 단계: 로그인 컨트롤의 잘못 된 자격 증명 메시지 개선</span><span class="sxs-lookup"><span data-stu-id="7bc2a-313">Step 4: Improving the Login Control's Invalid Credentials Message</span></span>

<span data-ttu-id="7bc2a-314">사용자가 잘못 된 자격 증명을 사용 하 여 로그온 하려고 하면 로그인 컨트롤 로그인 시도가 성공 했음을 설명 하는 메시지를 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-314">When a user attempts to log on with invalid credentials, the Login control displays a message explaining that the login attempt was unsuccessful.</span></span> <span data-ttu-id="7bc2a-315">컨트롤에서 지정한 메시지를 표시 하는 특히 해당 [ `FailureText` 속성](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failuretext.aspx)에 기본값이 로그인 시도 실패 했습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-315">In particular, the control displays the message specified by its [`FailureText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failuretext.aspx), which has a default value of Your login attempt was not successful.</span></span> <span data-ttu-id="7bc2a-316">다시 시도하세요.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-316">Please try again.</span></span>

<span data-ttu-id="7bc2a-317">회수는 여러 가지 이유가 있습니다 이유는 사용자의 자격 증명이 올바르지 않을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-317">Recall that there are many reasons why a user's credentials may be invalid:</span></span>

- <span data-ttu-id="7bc2a-318">사용자 이름이 없을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-318">The username may not exist</span></span>
- <span data-ttu-id="7bc2a-319">사용자 이름이 존재 하지만 암호가 올바르지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-319">The username exists, but the password is invalid</span></span>
- <span data-ttu-id="7bc2a-320">Username 및 password는 유효 하지만 사용자가 아직 승인 되지 않았습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-320">The username and password are valid, but the user is not yet approved</span></span>
- <span data-ttu-id="7bc2a-321">Username 및 password는 유효 하지만 사용자가 잠겨 아웃 (가장 가능성이 높은 특정된 시간 프레임 내에서 잘못 된 로그인 시도 횟수를 초과 했기 때문에)</span><span class="sxs-lookup"><span data-stu-id="7bc2a-321">The username and password are valid, but the user is locked out (most likely because they exceeded the number of invalid login attempts within the specified time frame)</span></span>

<span data-ttu-id="7bc2a-322">및 다른 이유가 있을 때 사용자 지정 인증 논리를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-322">And there may be other reasons when using custom authentication logic.</span></span> <span data-ttu-id="7bc2a-323">예를 들어 코드를 사용 하 여 우리가 작성 한 3 단계에서는 사용자 이름 및 암호가 유효한 지, 것일 수 있지만 전자 메일 주소가 올바르지 않을 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-323">For example, with the code we wrote in Step 3, the username and password may be valid, but the email address may be incorrect.</span></span>

<span data-ttu-id="7bc2a-324">이유는 자격 증명이 올바르지 않습니다에 관계 없이 로그인 컨트롤에는 동일한 오류 메시지가 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-324">Regardless of why the credentials are invalid, the Login control displays the same error message.</span></span> <span data-ttu-id="7bc2a-325">피드백이이 부족 하다는 잠긴 계정이 아직 승인 되지 않은 사용자에 대 한 혼동 될 수 있습니다. 약간의 작업을 사용 하 여 그러나 있다는 Login 컨트롤 보다 적절 한 메시지를 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-325">This lack of feedback can be confusing for a user whose account has not yet been approved or who has been locked out. With a little bit of work, though, we can have the Login control display a more appropriate message.</span></span>

<span data-ttu-id="7bc2a-326">사용자가 로그인 컨트롤에서 발생 하는 잘못 된 자격 증명을 사용 하 여 로그인 하려고 할 때마다 해당 `LoginError` 이벤트입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-326">Whenever a user attempts to login with invalid credentials the Login control raises its `LoginError` event.</span></span> <span data-ttu-id="7bc2a-327">계속 해 서 및이 이벤트에 대 한 이벤트 처리기를 만들고 다음 코드를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-327">Go ahead and create an event handler for this event, and add the following code:</span></span>

[!code-csharp[Main](validating-user-credentials-against-the-membership-user-store-cs/samples/sample5.cs)]

<span data-ttu-id="7bc2a-328">로그인 컨트롤을 설정 하 여 시작 하는 위의 코드 `FailureText` 속성을 기본값 (로그인 시도 하지 못했습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-328">The above code starts by setting the Login control's `FailureText` property to the default value ( Your login attempt was not successful.</span></span> <span data-ttu-id="7bc2a-329">다시 시도 하세요).</span><span class="sxs-lookup"><span data-stu-id="7bc2a-329">Please try again ).</span></span> <span data-ttu-id="7bc2a-330">다음 확인 하 되는 경우 제공한 사용자 이름이 기존 사용자 계정에 매핑됩니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-330">It then checks to see if the username supplied maps to an existing user account.</span></span> <span data-ttu-id="7bc2a-331">결과 검토를 하는 경우 `MembershipUser` 개체의 `IsLockedOut` 및 `IsApproved` 계정이 잠겼습니다 또는 아직 승인 되지 않은 경우를 결정 하는 속성입니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-331">If so, it consults the resulting `MembershipUser` object's `IsLockedOut` and `IsApproved` properties to determine if the account has been locked out or has not yet been approved.</span></span> <span data-ttu-id="7bc2a-332">두 경우 모두를 `FailureText` 속성이 해당 값으로 업데이트 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-332">In either case, the `FailureText` property is updated to a corresponding value.</span></span>

<span data-ttu-id="7bc2a-333">이 코드를 테스트 하려면 기존 사용자로 로그인 하는 잘못 된 암호를 사용 하 여 의도적으로 시도 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-333">To test this code, purposefully attempt to log in as an existing user, but use an incorrect password.</span></span> <span data-ttu-id="7bc2a-334">10 분 시간 프레임 내에서 행이 5 번 수행 하 고 계정이 잠기게 됩니다. 그림 11에서는, 후속 로그인 시도 항상 (정확한 암호 대신)으로 실패 하지 않지만 이제 더 설명적인 표시 너무 많은 잘못 된 로그인 시도 인해 계정의 잠 궜 습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-334">Do this five times in a row within a 10 minute time frame and the account will be locked out. As Figure 11 shows, subsequent login attempts will always fail (even with the correct password), but will now display the more descriptive Your account has been locked out because of too many invalid login attempts.</span></span> <span data-ttu-id="7bc2a-335">계정 잠금 해제 된 메시지를 포함 하도록 관리자에 게 문의 하십시오.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-335">Please contact the administrator to have your account unlocked message.</span></span>


<span data-ttu-id="7bc2a-336">[![Tito 너무 많은 잘못 된 로그인 시도 수행 하 고이 잠겨](validating-user-credentials-against-the-membership-user-store-cs/_static/image32.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="7bc2a-336">[![Tito Performed Too Many Invalid Login Attempts and Has Been Locked Out](validating-user-credentials-against-the-membership-user-store-cs/_static/image32.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image31.png)</span></span>

<span data-ttu-id="7bc2a-337">**그림 11**:가 된 잠겨 Tito 수행 너무 많은 잘못 된 로그인 시도 하 고 ([큰 이미지를 보려면 클릭](validating-user-credentials-against-the-membership-user-store-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="7bc2a-337">**Figure 11**: Tito Performed Too Many Invalid Login Attempts and Has Been Locked Out  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image33.png))</span></span>


## <a name="summary"></a><span data-ttu-id="7bc2a-338">요약</span><span class="sxs-lookup"><span data-stu-id="7bc2a-338">Summary</span></span>

<span data-ttu-id="7bc2a-339">이전이 자습서에서는 로그인 페이지 사용자 이름/암호 쌍의 하드 코드 된 목록에 대해 제공된 된 자격 증명의 유효성을 검사 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-339">Prior this tutorial, our login page validated the supplied credentials against a hard-coded list of username/password pairs.</span></span> <span data-ttu-id="7bc2a-340">이 자습서에서는 멤버 자격 프레임 워크에 대해 자격 증명의 유효성을 검사 하려면 페이지를 업데이트 했습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-340">In this tutorial, we updated the page to validate credentials against the Membership framework.</span></span> <span data-ttu-id="7bc2a-341">1 단계에서에서 사용 하 여 살펴보았습니다는 `Membership.ValidateUser` 메서드 프로그래밍 방식으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-341">In Step 1 we looked at using the `Membership.ValidateUser` method programmatically.</span></span> <span data-ttu-id="7bc2a-342">2 단계에서에서 교체는 수동으로 만든된 사용자 인터페이스 및 코드 로그인 컨트롤을 사용 하 여 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-342">In Step 2 we replaced our manually created user interface and code with the Login control.</span></span>

<span data-ttu-id="7bc2a-343">Login 컨트롤 표준 로그인 사용자 인터페이스를 렌더링 하 고 자동으로 멤버 자격 프레임 워크에 대 한 사용자의 자격 증명의 유효성을 검사 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-343">The Login control renders a standard login user interface and automatically validates the user's credentials against the Membership framework.</span></span> <span data-ttu-id="7bc2a-344">또한 유효한 자격 증명을 발생 시 로그인 컨트롤 사용자를 로그인 폼 인증을 통해.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-344">Moreover, in the event of valid credentials, the Login control signs the user in via forms authentication.</span></span> <span data-ttu-id="7bc2a-345">즉, 모든 기능을 갖춘 로그인 사용자 경험을은 페이지, 추가 선언적 태그 또는 코드에 필요한 로그인 컨트롤을 끌어 놓으면 하십시오.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-345">In short, a fully functional login user experience is available by simply dragging the Login control onto a page, no extra declarative markup or code necessary.</span></span> <span data-ttu-id="7bc2a-346">게다가 로그인 컨트롤은 고도로 사용자 지정을 정밀 하 게 렌더링 된 사용자 인터페이스 및 인증 논리를 모두 제어할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-346">What's more, the Login control is highly customizable, allowing for a fine degree of control over both the rendered user interface and authentication logic.</span></span>

<span data-ttu-id="7bc2a-347">이 시점에서 방문자가 웹 사이트를 만들 수 있습니다 새 사용자 계정 및 로그를 사이트에 있지만 인증 된 사용자를 기반으로 하는 페이지에 대 한 액세스를 제한 살펴볼 아직 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-347">At this point visitors to our website can create a new user account and log into the site, but we have yet to look at restricting access to pages based on the authenticated user.</span></span> <span data-ttu-id="7bc2a-348">현재 사용자, 인증 또는 익명으로 사이트의 페이지를 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-348">Currently, any user, authenticated or anonymous, can view any page on our site.</span></span> <span data-ttu-id="7bc2a-349">사용자가 사용자 단위로 사이트의 페이지에 대 한 액세스 제어와 함께 특정 페이지를 사용자에 해당 기능에 따라 달라 집니다 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-349">Along with controlling access to our site's pages on a user-by-user basis, we might have certain pages whose functionality depends on the user.</span></span> <span data-ttu-id="7bc2a-350">다음 자습서 권한과 로그인된 한 사용자를 기반으로 하는 페이지에서 기능을 제한 하는 방법에 살펴봅니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-350">The next tutorial looks at how to limit access and in-page functionality based on the logged in user.</span></span>

<span data-ttu-id="7bc2a-351">즐거운 프로그래밍!</span><span class="sxs-lookup"><span data-stu-id="7bc2a-351">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="7bc2a-352">추가 정보</span><span class="sxs-lookup"><span data-stu-id="7bc2a-352">Further Reading</span></span>

<span data-ttu-id="7bc2a-353">이 자습서에서 다루는 항목에 대 한 자세한 내용은 다음 리소스를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-353">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="7bc2a-354">잠긴 및 승인 되지 않은 사용자는 사용자 지정 메시지를 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-354">Displaying Custom Messages to Locked Out and Non-Approved Users</span></span>](http://aspnet.4guysfromrolla.com/articles/050306-1.aspx)
- [<span data-ttu-id="7bc2a-355">ASP.NET 2.0의 검사 멤버 자격, 역할 및 프로필</span><span class="sxs-lookup"><span data-stu-id="7bc2a-355">Examining ASP.NET 2.0's Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="7bc2a-356">방법: ASP.NET 로그인 페이지를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-356">How To: Create an ASP.NET Login Page</span></span>](https://msdn.microsoft.com/library/ms178331.aspx)
- [<span data-ttu-id="7bc2a-357">로그인 컨트롤에 대 한 기술 설명서</span><span class="sxs-lookup"><span data-stu-id="7bc2a-357">Login Control Technical Documentation</span></span>](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx)
- [<span data-ttu-id="7bc2a-358">로그인 컨트롤을 사용 하 여</span><span class="sxs-lookup"><span data-stu-id="7bc2a-358">Using the Login Controls</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/security/login.aspx)

### <a name="about-the-author"></a><span data-ttu-id="7bc2a-359">저자 소개</span><span class="sxs-lookup"><span data-stu-id="7bc2a-359">About the Author</span></span>

<span data-ttu-id="7bc2a-360">Scott Mitchell, 여러 ASP/ASP.NET 책의 저자 이자 4GuysFromRolla.com의 설립자 이며 1998 Microsoft 웹 기술을 왔습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-360">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="7bc2a-361">Scott는 독립 컨설턴트, 강사, 그리고 기록기로 작동합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-361">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="7bc2a-362">최근 저서는  *[Sams 설명 직접 ASP.NET 2.0 24 시간 동안의](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)* 합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-362">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="7bc2a-363">Scott에 도달할 수 있습니다 [ mitchell@4guysfromrolla.com ](mailto:mitchell@4guysfromrolla.com) 통하거나 저자의 블로그 [ http://ScottOnWriting.NET ](http://scottonwriting.net/)합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-363">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="7bc2a-364">특별히 감사</span><span class="sxs-lookup"><span data-stu-id="7bc2a-364">Special Thanks To</span></span>

<span data-ttu-id="7bc2a-365">이 자습서 시리즈는 많은 유용한 검토자가 검토 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-365">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="7bc2a-366">이 자습서에 대 한 선행 검토자는 Teresa Murphy 및 Michael Olivero 있었습니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-366">Lead reviewers for this tutorial were Teresa Murphy and Michael Olivero.</span></span> <span data-ttu-id="7bc2a-367">내 향후 MSDN 문서를 검토에 관심이 있으십니까?</span><span class="sxs-lookup"><span data-stu-id="7bc2a-367">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="7bc2a-368">그렇다면 삭제 나에서 선 [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4guysfromrolla.com)합니다.</span><span class="sxs-lookup"><span data-stu-id="7bc2a-368">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4guysfromrolla.com).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="7bc2a-369">[이전](creating-user-accounts-cs.md)
> [다음](user-based-authorization-cs.md)</span><span class="sxs-lookup"><span data-stu-id="7bc2a-369">[Previous](creating-user-accounts-cs.md)
[Next](user-based-authorization-cs.md)</span></span>
