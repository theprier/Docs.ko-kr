---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-7
title: 먼저 Entity Framework 4.0 Database를 사용 하 여 시작 및 ASP.NET 4 Web Forms-7 부 | Microsoft Docs
author: tdykstra
description: Contoso University 샘플 웹 응용 프로그램에는 Entity Framework를 사용 하 여 ASP.NET Web Forms 응용 프로그램을 만드는 방법을 보여 줍니다. 샘플 응용 프로그램은...
ms.author: riande
ms.date: 12/03/2010
ms.assetid: f8afb245-b705-419c-8790-0b295e90d5e2
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-7
msc.type: authoredcontent
ms.openlocfilehash: 48092838ac0b00137ae0a4e37391c31883afcd09
ms.sourcegitcommit: 45ac74e400f9f2b7dbded66297730f6f14a4eb25
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/16/2018
ms.locfileid: "41824110"
---
<a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-7"></a><span data-ttu-id="dd306-104">먼저 Entity Framework 4.0 Database를 사용 하 여 시작 및 ASP.NET 4 Web Forms-7 부</span><span class="sxs-lookup"><span data-stu-id="dd306-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 7</span></span>
====================
<span data-ttu-id="dd306-105">[Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="dd306-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="dd306-106">Contoso University 샘플 웹 응용 프로그램에는 Entity Framework 4.0 및 Visual Studio 2010을 사용 하 여 ASP.NET Web Forms 응용 프로그램을 만드는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="dd306-107">자습서 시리즈에 대 한 정보를 참조 하세요. [시리즈의 첫 번째 자습서](the-entity-framework-and-aspnet-getting-started-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="dd306-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>


## <a name="using-stored-procedures"></a><span data-ttu-id="dd306-108">저장 프로시저 사용</span><span class="sxs-lookup"><span data-stu-id="dd306-108">Using Stored Procedures</span></span>

<span data-ttu-id="dd306-109">이전 자습서에서 계층당 하나의 테이블 상속 패턴을 구현 했습니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-109">In the previous tutorial you implemented a table-per-hierarchy inheritance pattern.</span></span> <span data-ttu-id="dd306-110">이 자습서에서는 저장된 프로시저를 사용 하 여 데이터베이스에 대 한 액세스를 더 잘 제어 하는 방법을 보여줍니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-110">This tutorial will show you how to use stored procedures to gain more control over database access.</span></span>

<span data-ttu-id="dd306-111">Entity Framework를 사용 하면 데이터베이스 액세스를 위한 저장된 프로시저를 사용 하도록 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-111">The Entity Framework lets you specify that it should use stored procedures for database access.</span></span> <span data-ttu-id="dd306-112">모든 엔터티 형식에 대 한 만들기, 업데이트 또는 해당 형식의 엔터티를 삭제 하는 데 저장된 프로시저를 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-112">For any entity type, you can specify a stored procedure to use for creating, updating, or deleting entities of that type.</span></span> <span data-ttu-id="dd306-113">그런 다음 데이터 모델의 엔터티 집합을 검색 하는 등 작업을 수행 하는 데 사용할 수 있는 저장된 프로시저에 대 한 참조를 추가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-113">Then in the data model you can add references to stored procedures that you can use to perform tasks such as retrieving sets of entities.</span></span>

<span data-ttu-id="dd306-114">저장된 프로시저를 사용 하 여 데이터베이스 액세스에 대 한 일반적인 요구 사항은 됩니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-114">Using stored procedures is a common requirement for database access.</span></span> <span data-ttu-id="dd306-115">일부 경우에서 데이터베이스 관리자는 데이터베이스에 대 한 모든 액세스 보안을 위해 저장된 프로시저를 통과 필요할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-115">In some cases a database administrator may require that all database access go through stored procedures for security reasons.</span></span> <span data-ttu-id="dd306-116">다른 경우에는 일부 데이터베이스를 업데이트할 때 Entity Framework를 사용 하는 프로세스에 비즈니스 논리를 작성 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-116">In other cases you may want to build business logic into some of the processes that the Entity Framework uses when it updates the database.</span></span> <span data-ttu-id="dd306-117">예를 들어, 엔터티가 삭제 될 때마다 보관 데이터베이스에 복사 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-117">For example, whenever an entity is deleted you might want to copy it to an archive database.</span></span> <span data-ttu-id="dd306-118">또는 행이 업데이트 될 때마다 변경을 수행한 기록 로깅 테이블에 행을 쓰기 위해 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-118">Or whenever a row is updated you might want to write a row to a logging table that records who made the change.</span></span> <span data-ttu-id="dd306-119">Entity Framework는 엔터티를 삭제 또는 엔터티를 업데이트 될 때마다 호출 되는 저장된 프로시저에서 이러한 종류의 작업을 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-119">You can perform these kinds of tasks in a stored procedure that's called whenever the Entity Framework deletes an entity or updates an entity.</span></span>

<span data-ttu-id="dd306-120">이전 자습서와 같이 되지 모든 새 페이지를 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-120">As in the previous tutorial, you'll not create any new pages.</span></span> <span data-ttu-id="dd306-121">대신, Entity Framework의 일부를 이미 만든 페이지에 대 한 데이터베이스에 액세스 하는 방식으로 변경 합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-121">Instead, you'll change the way the Entity Framework accesses the database for some of the pages you already created.</span></span>

<span data-ttu-id="dd306-122">이 자습서를 삽입 하기 위한 데이터베이스의 저장된 프로시저를 만듭니다 `Student` 고 `Instructor` 엔터티.</span><span class="sxs-lookup"><span data-stu-id="dd306-122">In this tutorial you'll create stored procedures in the database for inserting `Student` and `Instructor` entities.</span></span> <span data-ttu-id="dd306-123">데이터 모델에 추가할 수 있습니다 및 Entity Framework 사용 해야 함을 추가 하기 위한 지정 `Student` 고 `Instructor` 데이터베이스로 엔터티.</span><span class="sxs-lookup"><span data-stu-id="dd306-123">You'll add them to the data model, and you'll specify that the Entity Framework should use them for adding `Student` and `Instructor` entities to the database.</span></span> <span data-ttu-id="dd306-124">검색 하는 데 사용할 수 있는 저장된 프로시저도 만듭니다 `Course` 엔터티.</span><span class="sxs-lookup"><span data-stu-id="dd306-124">You'll also create a stored procedure that you can use to retrieve `Course` entities.</span></span>

## <a name="creating-stored-procedures-in-the-database"></a><span data-ttu-id="dd306-125">데이터베이스의 저장된 프로시저 만들기</span><span class="sxs-lookup"><span data-stu-id="dd306-125">Creating Stored Procedures in the Database</span></span>

<span data-ttu-id="dd306-126">(사용 하는 경우는 *School.mdf* 파일에서이 자습서를 사용 하 여 다운로드할 수 있는 프로젝트를 건너뛸 수 있습니다이 섹션에서는 저장된 프로시저가 이미 존재 하므로.)</span><span class="sxs-lookup"><span data-stu-id="dd306-126">(If you're using the *School.mdf* file from the project available for download with this tutorial, you can skip this section because the stored procedures already exist.)</span></span>

<span data-ttu-id="dd306-127">**서버 탐색기**, 확장 *School.mdf*를 마우스 오른쪽 단추로 클릭 **Stored Procedures**를 선택한 **새 저장 프로시저 추가**합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-127">In **Server Explorer**, expand *School.mdf*, right-click **Stored Procedures**, and select **Add New Stored Procedure**.</span></span>

<span data-ttu-id="dd306-128">[![image15](the-entity-framework-and-aspnet-getting-started-part-7/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="dd306-128">[![image15](the-entity-framework-and-aspnet-getting-started-part-7/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image1.png)</span></span>

<span data-ttu-id="dd306-129">다음 SQL 문을 복사 및 저장된 프로시저 창에 붙여넣고 스 켈 레 톤 저장된 프로시저를 대체 합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-129">Copy the following SQL statements and paste them into the stored procedure window, replacing the skeleton stored procedure.</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample1.sql)]

<span data-ttu-id="dd306-130">[![image14](the-entity-framework-and-aspnet-getting-started-part-7/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="dd306-130">[![image14](the-entity-framework-and-aspnet-getting-started-part-7/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image3.png)</span></span>

<span data-ttu-id="dd306-131">`Student` 엔터티는 4 개의 속성: `PersonID`, `LastName`를 `FirstName`, 및 `EnrollmentDate`합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-131">`Student` entities have four properties: `PersonID`, `LastName`, `FirstName`, and `EnrollmentDate`.</span></span> <span data-ttu-id="dd306-132">데이터베이스 ID 값을 자동으로 생성 하 고 저장된 프로시저가 다른 3 개에 대 한 매개 변수를 허용 합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-132">The database generates the ID value automatically, and the stored procedure accepts parameters for the other three.</span></span> <span data-ttu-id="dd306-133">저장된 프로시저는 Entity Framework를 추적할 수 있는 메모리에 유지 하는 해당 엔터티의 버전에서 새 행의 레코드 키의 값을 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-133">The stored procedure returns the value of the new row's record key so that the Entity Framework can keep track of that in the version of the entity it keeps in memory.</span></span>

<span data-ttu-id="dd306-134">저장 하 고 저장된 프로시저 창을 닫습니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-134">Save and close the stored procedure window.</span></span>

<span data-ttu-id="dd306-135">만들기는 `InsertInstructor` 다음 SQL 문을 사용 하 여 동일한 방식으로 저장 프로시저:</span><span class="sxs-lookup"><span data-stu-id="dd306-135">Create an `InsertInstructor` stored procedure in the same manner, using the following SQL statements:</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample2.sql)]

<span data-ttu-id="dd306-136">만들 `Update` 저장 프로시저에 대 한 `Student` 고 `Instructor` 엔터티도 합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-136">Create `Update` stored procedures for `Student` and `Instructor` entities also.</span></span> <span data-ttu-id="dd306-137">(이미 데이터베이스를 `DeletePerson` 저장 프로시저 모두에 대해 작동 하는 `Instructor` 및 `Student` 엔터티.)</span><span class="sxs-lookup"><span data-stu-id="dd306-137">(The database already has a `DeletePerson` stored procedure which will work for both `Instructor` and `Student` entities.)</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample3.sql)]

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample4.sql)]

<span data-ttu-id="dd306-138">이 자습서에서는 세 함수를 모두-insert, update 및 delete-각 엔터티 형식에 매핑합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-138">In this tutorial you'll map all three functions -- insert, update, and delete -- for each entity type.</span></span> <span data-ttu-id="dd306-139">Entity Framework 버전 4 통해 하 하나만 매핑할 수 있습니다. 또는이 중 두 가지 예외를 사용 하 여 다른 매핑 없이 저장된 프로시저에 함수: 업데이트 함수가 있지만 not delete 함수를 매핑하는 경우 Entity Framework는 예외가 발생 하면 있습니다 엔터티를 삭제 하려고 시도 합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-139">The Entity Framework version 4 allows you to map just one or two of these functions to stored procedures without mapping the others, with one exception: if you map the update function but not the delete function, the Entity Framework will throw an exception when you attempt to delete an entity.</span></span> <span data-ttu-id="dd306-140">Entity Framework 버전 3.5에에서 없는 저장된 프로시저 매핑에 훨씬 유연 하 게: 함수 중 하나를 매핑한 경우 세 가지 모두에 매핑할 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-140">In the Entity Framework version 3.5, you did not have this much flexibility in mapping stored procedures: if you mapped one function you were required to map all three.</span></span>

<span data-ttu-id="dd306-141">데이터를 업데이트 하는 것이 아니라 읽기를 제공 하는 저장된 프로시저를 만들려면 모든 선택 하 게 하나를 만들 `Course` 엔터티를 다음 SQL 문을 사용 하 여:</span><span class="sxs-lookup"><span data-stu-id="dd306-141">To create a stored procedure that reads rather than updates data, create one that selects all `Course` entities, using the following SQL statements:</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample5.sql)]

## <a name="adding-the-stored-procedures-to-the-data-model"></a><span data-ttu-id="dd306-142">데이터 모델에 저장된 프로시저를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-142">Adding the Stored Procedures to the Data Model</span></span>

<span data-ttu-id="dd306-143">저장된 프로시저를 데이터베이스에 정의 된 하지만 Entity Framework를 사용할 수 있게 하려면 데이터 모델에 추가 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-143">The stored procedures are now defined in the database, but they must be added to the data model to make them available to the Entity Framework.</span></span> <span data-ttu-id="dd306-144">오픈 *SchoolModel.edmx*, 디자인 화면을 마우스 오른쪽 단추로 **데이터베이스에서 모델 업데이트**합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-144">Open *SchoolModel.edmx*, right-click the design surface, and select **Update Model from Database**.</span></span> <span data-ttu-id="dd306-145">에 **추가** 탭의 **데이터베이스 개체 선택** 대화 상자에서 **저장 프로시저**, 새로 만든된 저장된 프로시저를 선택 및 `DeletePerson` 저장 프로시저 및 클릭 **완료**합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-145">In the **Add** tab of the **Choose Your Database Objects** dialog box, expand **Stored Procedures**, select the newly created stored procedures and the `DeletePerson` stored procedure, and then click **Finish**.</span></span>

<span data-ttu-id="dd306-146">[![image20](the-entity-framework-and-aspnet-getting-started-part-7/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="dd306-146">[![image20](the-entity-framework-and-aspnet-getting-started-part-7/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image5.png)</span></span>

## <a name="mapping-the-stored-procedures"></a><span data-ttu-id="dd306-147">저장된 프로시저 매핑</span><span class="sxs-lookup"><span data-stu-id="dd306-147">Mapping the Stored Procedures</span></span>

<span data-ttu-id="dd306-148">데이터 모델 디자이너에서 마우스 오른쪽 단추로 클릭 합니다 `Student` 엔터티 및 선택 **저장 프로시저 매핑**합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-148">In the data model designer, right-click the `Student` entity and select **Stored Procedure Mapping**.</span></span>

<span data-ttu-id="dd306-149">[![image21](the-entity-framework-and-aspnet-getting-started-part-7/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="dd306-149">[![image21](the-entity-framework-and-aspnet-getting-started-part-7/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image7.png)</span></span>

<span data-ttu-id="dd306-150">합니다 **매핑 정보** 삽입, 업데이트 및 이러한 종류의 엔터티를 삭제 하는 것에 대 한 Entity Framework 사용 해야 하는 저장된 프로시저를 지정할 수 있는 창이 나타납니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-150">The **Mapping Details** window appears, in which you can specify stored procedures that the Entity Framework should use for inserting, updating, and deleting entities of this type.</span></span>

<span data-ttu-id="dd306-151">[![image22](the-entity-framework-and-aspnet-getting-started-part-7/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="dd306-151">[![image22](the-entity-framework-and-aspnet-getting-started-part-7/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image9.png)</span></span>

<span data-ttu-id="dd306-152">설정 된 **삽입** 함수를 **InsertStudent**합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-152">Set the **Insert** function to **InsertStudent**.</span></span> <span data-ttu-id="dd306-153">창에는 각 엔터티 속성에 매핑해야 저장된 프로시저 매개 변수 목록을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-153">The window shows a list of stored procedure parameters, each of which must be mapped to an entity property.</span></span> <span data-ttu-id="dd306-154">이 중 두 가지는 자동으로 매핑될 이름이 같기 때문에 합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-154">Two of these are mapped automatically because the names are the same.</span></span> <span data-ttu-id="dd306-155">라는 엔터티 속성이 없기 `FirstName`수동으로 선택 해야 하므로 `FirstMidName` 사용 가능한 엔터티 속성을 보여 주는 드롭다운 목록에서.</span><span class="sxs-lookup"><span data-stu-id="dd306-155">There's no entity property named `FirstName`, so you must manually select `FirstMidName` from a drop-down list that shows available entity properties.</span></span> <span data-ttu-id="dd306-156">(의 이름 변경 때문에 이것이 합니다 `FirstName` 속성을 `FirstMidName` 첫 번째 자습서에서입니다.)</span><span class="sxs-lookup"><span data-stu-id="dd306-156">(This is because you changed the name of the `FirstName` property to `FirstMidName` in the first tutorial.)</span></span>

<span data-ttu-id="dd306-157">[![image23](the-entity-framework-and-aspnet-getting-started-part-7/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="dd306-157">[![image23](the-entity-framework-and-aspnet-getting-started-part-7/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image11.png)</span></span>

<span data-ttu-id="dd306-158">동일한 **매핑 정보** 창, 맵 합니다 `Update` 함수를 `UpdateStudent` 저장 프로시저 (지정 해야 `FirstMidName` 매개 변수 값으로 `FirstName`에 대해 수행한 것 처럼는 `Insert` 저장 프로시저) 및 `Delete` 함수는 `DeletePerson` 저장 프로시저입니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-158">In the same **Mapping Details** window, map the `Update` function to the `UpdateStudent` stored procedure (make sure you specify `FirstMidName` as the parameter value for `FirstName`, as you did for the `Insert` stored procedure) and the `Delete` function to the `DeletePerson` stored procedure.</span></span>

<span data-ttu-id="dd306-159">[![image01](the-entity-framework-and-aspnet-getting-started-part-7/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="dd306-159">[![image01](the-entity-framework-and-aspnet-getting-started-part-7/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image13.png)</span></span>

<span data-ttu-id="dd306-160">수행 하는 강사에 대 한 저장 프로시저 insert, update 및 delete 매핑할 동일한 절차를 `Instructor` 엔터티.</span><span class="sxs-lookup"><span data-stu-id="dd306-160">Follow the same procedure to map the insert, update, and delete stored procedures for instructors to the `Instructor` entity.</span></span>

<span data-ttu-id="dd306-161">[![image02](the-entity-framework-and-aspnet-getting-started-part-7/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="dd306-161">[![image02](the-entity-framework-and-aspnet-getting-started-part-7/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image15.png)</span></span>

<span data-ttu-id="dd306-162">데이터 업데이트 하는 대신 읽기는 저장 프로시저를 사용 합니다 **Model 브라우저** 저장된 프로시저를 엔터티에 매핑할 창 입력 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-162">For stored procedures that read rather than update data, you use the **Model Browser** window to map the stored procedure to the entity type it returns.</span></span> <span data-ttu-id="dd306-163">데이터 모델 디자이너에서 디자인 화면을 마우스 오른쪽 단추로 **Model 브라우저**합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-163">In the data model designer, right-click the design surface and select **Model Browser**.</span></span> <span data-ttu-id="dd306-164">엽니다는 **SchoolModel.Store** 노드 연 다음 합니다 **Stored Procedures** 노드.</span><span class="sxs-lookup"><span data-stu-id="dd306-164">Open the **SchoolModel.Store** node and then open the **Stored Procedures** node.</span></span> <span data-ttu-id="dd306-165">마우스 오른쪽 단추로 클릭 합니다 `GetCourses` 저장 프로시저 및 선택 **Function Import 추가**합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-165">Then right-click the `GetCourses` stored procedure and select **Add Function Import**.</span></span>

<span data-ttu-id="dd306-166">[![image24](the-entity-framework-and-aspnet-getting-started-part-7/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="dd306-166">[![image24](the-entity-framework-and-aspnet-getting-started-part-7/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image17.png)</span></span>

<span data-ttu-id="dd306-167">에 **Function Import 추가** 대화 상자의 **반환 된 컬렉션의** 선택 **엔터티**를 선택한 `Course` 엔터티 유형으로 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-167">In the **Add Function Import** dialog box, under **Returns a Collection Of** select **Entities**, and then select `Course` as the entity type returned.</span></span> <span data-ttu-id="dd306-168">완료 되 면 **확인**합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-168">When you're done, click **OK**.</span></span> <span data-ttu-id="dd306-169">저장 후 닫기 합니다 *.edmx* 파일입니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-169">Save and close the *.edmx* file.</span></span>

<span data-ttu-id="dd306-170">[![image25](the-entity-framework-and-aspnet-getting-started-part-7/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="dd306-170">[![image25](the-entity-framework-and-aspnet-getting-started-part-7/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image19.png)</span></span>

## <a name="using-insert-update-and-delete-stored-procedures"></a><span data-ttu-id="dd306-171">업데이트 및 Delete 저장된 프로시저 Insert 사용</span><span class="sxs-lookup"><span data-stu-id="dd306-171">Using Insert, Update, and Delete Stored Procedures</span></span>

<span data-ttu-id="dd306-172">저장된 프로시저를 삽입, 업데이트 및 데이터를 삭제 합니다. 데이터 모델에 추가 하 고 적절 한 엔터티를 매핑할 해당 후 자동으로 Entity Framework에서 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-172">Stored procedures to insert, update, and delete data are used by the Entity Framework automatically after you've added them to the data model and mapped them to the appropriate entities.</span></span> <span data-ttu-id="dd306-173">이제 실행할 수 있습니다는 *StudentsAdd.aspx* 페이지에서 Entity Framework를 사용 하 여 새 학생을 만들 때마다를 `InsertStudent` 저장 프로시저에 새 행을 추가 하는 `Student` 테이블.</span><span class="sxs-lookup"><span data-stu-id="dd306-173">You can now run the *StudentsAdd.aspx* page, and every time you create a new student, the Entity Framework will use the `InsertStudent` stored procedure to add the new row to the `Student` table.</span></span>

<span data-ttu-id="dd306-174">[![image03](the-entity-framework-and-aspnet-getting-started-part-7/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="dd306-174">[![image03](the-entity-framework-and-aspnet-getting-started-part-7/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image21.png)</span></span>

<span data-ttu-id="dd306-175">실행 합니다 *Students.aspx* 페이지와 새 학생 목록에 나타납니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-175">Run the *Students.aspx* page and the new student appears in the list.</span></span>

<span data-ttu-id="dd306-176">[![image04](the-entity-framework-and-aspnet-getting-started-part-7/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="dd306-176">[![image04](the-entity-framework-and-aspnet-getting-started-part-7/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image23.png)</span></span>

<span data-ttu-id="dd306-177">업데이트 함수가 작동 하는지 확인 하려면 이름을 변경 하 고 delete 함수가 작동 하는지 확인 하려면 학생을 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-177">Change the name to verify that the update function works, and then delete the student to verify that the delete function works.</span></span>

<span data-ttu-id="dd306-178">[![image05](the-entity-framework-and-aspnet-getting-started-part-7/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="dd306-178">[![image05](the-entity-framework-and-aspnet-getting-started-part-7/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image25.png)</span></span>

## <a name="using-select-stored-procedures"></a><span data-ttu-id="dd306-179">Select 저장된 프로시저를 사용 하 여</span><span class="sxs-lookup"><span data-stu-id="dd306-179">Using Select Stored Procedures</span></span>

<span data-ttu-id="dd306-180">Entity Framework는 자동으로 실행 되지 저장된 프로시저와 같은 `GetCourses`를 사용 하 여 사용할 수 없습니다는 `EntityDataSource` 제어 합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-180">The Entity Framework does not automatically run stored procedures such as `GetCourses`, and you cannot use them with the `EntityDataSource` control.</span></span> <span data-ttu-id="dd306-181">이 사용 하려면 해당 코드에서 호출 합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-181">To use them, you call them from code.</span></span>

<span data-ttu-id="dd306-182">엽니다는 *InstructorsCourses.aspx.cs* 파일입니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-182">Open the *InstructorsCourses.aspx.cs* file.</span></span> <span data-ttu-id="dd306-183">`PopulateDropDownLists` 메서드는 LINQ-엔터티 쿼리를 사용 하 여 해당 목록을 반복 하 고 강사에 할당 되는 시나리오와는 할당 되지 않은 확인할 수 있도록 모든 강좌 엔터티를 검색 합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-183">The `PopulateDropDownLists` method uses a LINQ-to-Entities query to retrieve all course entities so that it can loop through the list and determine which ones an instructor is assigned to and which ones are unassigned:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample6.cs)]

<span data-ttu-id="dd306-184">이 다음 코드로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-184">Replace this with the following code:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample7.cs)]

<span data-ttu-id="dd306-185">페이지를 사용 하 여 이제는 `GetCourses` 모든 과정 목록을 검색 하는 절차를 저장 합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-185">The page now uses the `GetCourses` stored procedure to retrieve the list of all courses.</span></span> <span data-ttu-id="dd306-186">이전 처럼 작동 하는지 확인 하려면 페이지를 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-186">Run the page to verify that it works as it did before.</span></span>

<span data-ttu-id="dd306-187">(저장된 프로시저에 의해 검색 되는 엔터티의 탐색 속성 수 자동으로 채워지지 않습니다에 따라 해당 엔터티를 관련 된 데이터를 사용 하 여 `ObjectContext` 기본 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-187">(Navigation properties of entities retrieved by a stored procedure might not be automatically populated with the data related to those entities, depending on `ObjectContext` default settings.</span></span> <span data-ttu-id="dd306-188">자세한 내용은 [관련 개체 로드](https://msdn.microsoft.com/library/bb896272.aspx) MSDN 라이브러리에서.)</span><span class="sxs-lookup"><span data-stu-id="dd306-188">For more information, see [Loading Related Objects](https://msdn.microsoft.com/library/bb896272.aspx) in the MSDN Library.)</span></span>

<span data-ttu-id="dd306-189">다음 자습서에서는 Dynamic Data 기능을 사용 하 여 프로그램 및 테스트 데이터 서식 지정 및 유효성 검사 규칙을 쉽게 수행할 수 있도록 하는 방법에 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-189">In the next tutorial, you'll learn how to use Dynamic Data functionality to make it easier to program and test data formatting and validation rules.</span></span> <span data-ttu-id="dd306-190">데이터 형식 문자열 등의 각 웹 페이지 규칙 및 필수 필드를 여부를 지정 하는 대신 데이터 모델 메타 데이터에서 이러한 규칙을 지정할 수 있습니다 하 고 모든 페이지에 자동으로 적용 되는 합니다.</span><span class="sxs-lookup"><span data-stu-id="dd306-190">Instead of specifying on each web page rules such as data format strings and whether or not a field is required, you can specify such rules in data model metadata and they're automatically applied on every page.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="dd306-191">[이전](the-entity-framework-and-aspnet-getting-started-part-6.md)
> [다음](the-entity-framework-and-aspnet-getting-started-part-8.md)</span><span class="sxs-lookup"><span data-stu-id="dd306-191">[Previous](the-entity-framework-and-aspnet-getting-started-part-6.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-8.md)</span></span>
