---
uid: web-forms/overview/data-access/working-with-binary-files/uploading-files-cs
title: 업로드 파일 (C#) | Microsoft Docs
author: rick-anderson
description: '웹 사이트 중 하나는 서버의 파일 시스템에 저장 될 수 있는 위치에 이진 파일 (예: Word 또는 PDF 문서)를 업로드할 수 있도록 하는 방법 알아보기...'
ms.author: aspnetcontent
manager: wpickett
ms.date: 03/27/2007
ms.topic: article
ms.assetid: b381b1da-feb3-4776-bc1b-75db53eb90ab
ms.technology: dotnet-webforms
msc.legacyurl: /web-forms/overview/data-access/working-with-binary-files/uploading-files-cs
msc.type: authoredcontent
ms.openlocfilehash: aaa81014a03fc04e68ea7b8014933cf87002af2e
ms.sourcegitcommit: 953ff9ea4369f154d6fd0239599279ddd3280009
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/03/2018
ms.locfileid: "37388330"
---
<a name="uploading-files-c"></a><span data-ttu-id="a6472-103">파일 업로드 (C#)</span><span class="sxs-lookup"><span data-stu-id="a6472-103">Uploading Files (C#)</span></span>
====================
<span data-ttu-id="a6472-104">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="a6472-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="a6472-105">[샘플 앱을 다운로드](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_54_CS.exe) 또는 [PDF 다운로드](uploading-files-cs/_static/datatutorial54cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="a6472-105">[Download Sample App](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_54_CS.exe) or [Download PDF](uploading-files-cs/_static/datatutorial54cs1.pdf)</span></span>

> <span data-ttu-id="a6472-106">서버의 파일 시스템 또는 데이터베이스에 저장 될 수 있는 웹 사이트에 이진 파일 (예: Word 또는 PDF 문서)를 업로드할 수 있도록 하는 방법을 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-106">Learn how to allow users to upload binary files (such as Word or PDF documents) to your Web site where they may be stored in either the server's file system or the database.</span></span>


## <a name="introduction"></a><span data-ttu-id="a6472-107">소개</span><span class="sxs-lookup"><span data-stu-id="a6472-107">Introduction</span></span>

<span data-ttu-id="a6472-108">모든 자습서에서는 지금 검사 ve 텍스트 데이터로 작업 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-108">All of the tutorials we ve examined so far have worked exclusively with text data.</span></span> <span data-ttu-id="a6472-109">그러나 여러 응용 프로그램에서는 텍스트와 이진 데이터를 캡처하는 데이터 모델입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-109">However, many applications have data models that capture both text and binary data.</span></span> <span data-ttu-id="a6472-110">온라인 데이트 사이트를 사용자가 사진을 업로드 하 여 해당 프로필에 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-110">An online dating site might allow users to upload a picture to associate with their profile.</span></span> <span data-ttu-id="a6472-111">채용 웹 사이트 사용자가 다시 시작으로 Microsoft Word 또는 PDF 문서를 업로드할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-111">A recruiting website might let users upload their resume as a Microsoft Word or PDF document.</span></span>

<span data-ttu-id="a6472-112">문제의 새 집합을 추가 하는 이진 데이터를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-112">Working with binary data adds a new set of challenges.</span></span> <span data-ttu-id="a6472-113">응용 프로그램의 이진 데이터가 저장 되는 방법을 결정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-113">We must decide how the binary data is stored in the application.</span></span> <span data-ttu-id="a6472-114">새 레코드 삽입에 사용 되는 인터페이스에 사용자가 자신의 컴퓨터에서 파일을 업로드 하도록 허용 하도록 업데이트 되어야 하 고 추가 단계를 수행 하 여 표시 하거나 관련 된 이진 데이터를 레코드 s를 다운로드 하기 위한 수단을 제공 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-114">The interface used for inserting new records has to be updated to allow the user to upload a file from their computer and extra steps must be taken to display or provide a means for downloading a record s associated binary data.</span></span> <span data-ttu-id="a6472-115">이 자습서에는 다음 세는 걸림돌 이러한 문제를이 해결 하는 방법을 살펴봅니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-115">In this tutorial and the next three we'll explore how to hurdle these challenges.</span></span> <span data-ttu-id="a6472-116">이 자습서의 끝에서는 만들었습니다 사진 및 PDF 브로슈어 각 범주를 사용 하 여 연결 하는 응용 프로그램을 완벽 하 게 작동 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-116">At the end of these tutorials we'll have built a fully functional application that associates a picture and PDF brochure with each category.</span></span> <span data-ttu-id="a6472-117">이 특정 자습서에서는 이진 데이터를 저장 하기 위한 다양 한 기술을 확인 하 고 사용자가 자신의 컴퓨터에서 파일 업로드 수 있게 하는 방법에 대해 및 웹 서버의 파일 시스템에 저장 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-117">In this particular tutorial we'll look at different techniques for storing binary data and explore how to enable users to upload a file from their computer and have it saved on the web server s file system.</span></span>

> [!NOTE]
> <span data-ttu-id="a6472-118">응용 프로그램 s 데이터 모델이 포함 된 이진 데이터는 때때로 이라고 하는 [BLOB](http://en.wikipedia.org/wiki/Binary_large_object), Binary Large OBject에 대 한 머리글자어입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-118">Binary data that is part of an application s data model is sometimes referred to as a [BLOB](http://en.wikipedia.org/wiki/Binary_large_object), an acronym for Binary Large OBject.</span></span> <span data-ttu-id="a6472-119">이 자습서에서 BLOB 동의어 이라는 용어가 있지만 용어 이진 데이터를 사용 하도록 선택 했습니다 하나요.</span><span class="sxs-lookup"><span data-stu-id="a6472-119">In these tutorials I have chosen to use the terminology binary data, although the term BLOB is synonymous.</span></span>


## <a name="step-1-creating-the-working-with-binary-data-web-pages"></a><span data-ttu-id="a6472-120">1 단계: 이진 데이터 웹 페이지를 사용 하 여 작업 만들기</span><span class="sxs-lookup"><span data-stu-id="a6472-120">Step 1: Creating the Working with Binary Data Web Pages</span></span>

<span data-ttu-id="a6472-121">이진 데이터에 대 한 지원을 추가와 관련 된 문제를 탐색을 시작 하기 전에 s를 먼저 시간을 내어이 자습서에는 다음 세 할 웹 사이트 프로젝트에서 ASP.NET 페이지를 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-121">Before we begin to explore the challenges associated with adding support for binary data, let s first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial and the next three.</span></span> <span data-ttu-id="a6472-122">라는 새 폴더를 추가 하 여 시작 `BinaryData`합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-122">Start by adding a new folder named `BinaryData`.</span></span> <span data-ttu-id="a6472-123">다음에 있는 각 페이지에 연결할 수 있도록 해당 폴더에 다음 ASP.NET 페이지를 추가 합니다 `Site.master` 마스터 페이지:</span><span class="sxs-lookup"><span data-stu-id="a6472-123">Next, add the following ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `FileUpload.aspx`
- `DisplayOrDownloadData.aspx`
- `UploadInDetailsView.aspx`
- `UpdatingAndDeleting.aspx`


![이진 데이터 관련 자습서에 대 한 ASP.NET 페이지 추가](uploading-files-cs/_static/image1.gif)

<span data-ttu-id="a6472-125">**그림 1**: 이진 데이터 관련 자습서에 대 한 ASP.NET 페이지 추가</span><span class="sxs-lookup"><span data-stu-id="a6472-125">**Figure 1**: Add the ASP.NET Pages for the Binary Data-Related Tutorials</span></span>


<span data-ttu-id="a6472-126">다른 폴더와 같이 `Default.aspx` 에 `BinaryData` 폴더 섹션의 자습서를 나열 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-126">Like in the other folders, `Default.aspx` in the `BinaryData` folder will list the tutorials in its section.</span></span> <span data-ttu-id="a6472-127">이전에 설명한 대로 `SectionLevelTutorialListing.ascx` 사용자 컨트롤은이 기능을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-127">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="a6472-128">따라서이 사용자 정의 컨트롤을 추가 `Default.aspx`의 디자인 뷰에서 페이지의 솔루션 탐색기에서 끌어 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-128">Therefore, add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page s Design view.</span></span>


<span data-ttu-id="a6472-129">[![Default.aspx SectionLevelTutorialListing.ascx 사용자 컨트롤 추가](uploading-files-cs/_static/image2.gif)](uploading-files-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="a6472-129">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](uploading-files-cs/_static/image2.gif)](uploading-files-cs/_static/image1.png)</span></span>

<span data-ttu-id="a6472-130">**그림 2**: 추가 된 `SectionLevelTutorialListing.ascx` 사용자 정의 컨트롤 `Default.aspx` ([클릭 하 여 큰 이미지 보기](uploading-files-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="a6472-130">**Figure 2**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](uploading-files-cs/_static/image2.png))</span></span>


<span data-ttu-id="a6472-131">마지막으로, 이러한 페이지에 항목으로 추가 된 `Web.sitemap` 파일입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-131">Lastly, add these pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="a6472-132">특히 다음 태그를 확장 한 후 추가 GridView `<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="a6472-132">Specifically, add the following markup after the Enhancing the GridView `<siteMapNode>`:</span></span>


[!code-xml[Main](uploading-files-cs/samples/sample1.xml)]

<span data-ttu-id="a6472-133">업데이트 한 후 `Web.sitemap`, 잠시 브라우저를 통해 자습서 웹 사이트를 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-133">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="a6472-134">이제 메뉴 왼쪽에서 이진 데이터 자습서를 사용 하 여 작업에 대 한 항목이 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-134">The menu on the left now includes items for the Working with Binary Data tutorials.</span></span>


![이제 사이트 맵 이진 데이터 자습서를 사용 하 여 작업 항목을 포함](uploading-files-cs/_static/image3.gif)

<span data-ttu-id="a6472-136">**그림 3**: 이제 사이트 맵 이진 데이터 자습서를 사용 하 여 작업 항목을 포함</span><span class="sxs-lookup"><span data-stu-id="a6472-136">**Figure 3**: The Site Map Now Includes Entries for the Working with Binary Data Tutorials</span></span>


## <a name="step-2-deciding-where-to-store-the-binary-data"></a><span data-ttu-id="a6472-137">이진 데이터를 저장할 위치를 결정 하는 2 단계:</span><span class="sxs-lookup"><span data-stu-id="a6472-137">Step 2: Deciding Where to Store the Binary Data</span></span>

<span data-ttu-id="a6472-138">두 위치 중 하나에서 응용 프로그램의 데이터 모델을 사용 하 여 연결 된 이진 데이터를 저장할 수 있습니다: 데이터베이스에 저장 된 파일에 대 한 참조를 사용 하 여 웹 서버의 파일 시스템에서 또는 데이터베이스 자체 내에서 직접 (그림 4 참조).</span><span class="sxs-lookup"><span data-stu-id="a6472-138">Binary data that is associated with the application s data model can be stored in one of two places: on the web server s file system with a reference to the file stored in the database; or directly within the database itself (see Figure 4).</span></span> <span data-ttu-id="a6472-139">각 방법 마다 고유한 장점과 단점 및 부분에 자세한 내용은 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-139">Each approach has its own set of pros and cons and merits a more detailed discussion.</span></span>


<span data-ttu-id="a6472-140">[![파일 시스템 또는 데이터베이스에서 직접 이진 데이터를 저장할 수 있습니다.](uploading-files-cs/_static/image4.gif)](uploading-files-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="a6472-140">[![Binary Data Can Be Stored On the File System or Directly in the Database](uploading-files-cs/_static/image4.gif)](uploading-files-cs/_static/image3.png)</span></span>

<span data-ttu-id="a6472-141">**그림 4**: 파일 시스템 또는 데이터베이스에서 직접 이진 데이터를 저장할 수 있습니다 ([큰 이미지를 보려면 클릭](uploading-files-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="a6472-141">**Figure 4**: Binary Data Can Be Stored On the File System or Directly in the Database ([Click to view full-size image](uploading-files-cs/_static/image4.png))</span></span>


<span data-ttu-id="a6472-142">각 제품을 사용 하 여 그림을 연결 하려면 Northwind 데이터베이스를 확장 하 려 한다고 가정 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-142">Imagine that we wanted to extend the Northwind database to associate a picture with each product.</span></span> <span data-ttu-id="a6472-143">하나의 옵션은 웹 서버의 파일 시스템에 이러한 이미지 파일을 저장할 경로 기록 하는 것은 `Products` 테이블입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-143">One option would be to store these image files on the web server s file system and record the path in the `Products` table.</span></span> <span data-ttu-id="a6472-144">이 방법을 사용 하 여 d 추가 `ImagePath` 열을 `Products` 형식의 테이블 `varchar(200)`를 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-144">With this approach, we d add an `ImagePath` column to the `Products` table of type `varchar(200)`, perhaps.</span></span> <span data-ttu-id="a6472-145">사용자 사진 chai에 업로드 하는 경우 해당 그림이 웹의 서버 파일 시스템에 저장 될 수 `~/Images/Tea.jpg`여기서 `~` 응용 프로그램 s 실제 경로 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-145">When a user uploaded a picture for Chai, that picture might be stored on the web server s file system at `~/Images/Tea.jpg`, where `~` represents the application s physical path.</span></span> <span data-ttu-id="a6472-146">즉, 웹 사이트 실제 경로에서 시작 하는 경우 `C:\Websites\Northwind\`하십시오 `~/Images/Tea.jpg` 에 해당 `C:\Websites\Northwind\Images\Tea.jpg`합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-146">That is, if the web site is rooted at the physical path `C:\Websites\Northwind\`, `~/Images/Tea.jpg` would be equivalent to `C:\Websites\Northwind\Images\Tea.jpg`.</span></span> <span data-ttu-id="a6472-147">이미지 파일을 업로드 한 후 d 업데이트에 Chai 레코드를 `Products` 테이블 있도록 해당 `ImagePath` 새 이미지의 경로 참조 하는 열입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-147">After uploading the image file, we d update the Chai record in the `Products` table so that its `ImagePath` column referenced the path of the new image.</span></span> <span data-ttu-id="a6472-148">사용 하 여 `~/Images/Tea.jpg` 또는 그냥 `Tea.jpg` 모든 제품 이미지는 배치 하는 것 응용 프로그램에서 결정 한 경우 `Images` 폴더입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-148">We could use `~/Images/Tea.jpg` or just `Tea.jpg` if we decided that all product images would be placed in the application s `Images` folder.</span></span>

<span data-ttu-id="a6472-149">파일 시스템에 이진 데이터를 저장 하는 주요 이점은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-149">The main advantages of storing the binary data on the file system are:</span></span>

- <span data-ttu-id="a6472-150">**구현 편의성** 곧 볼 수 있겠지만, 데이터베이스 내에 직접 저장 하는 이진 데이터 저장 및 검색 파일 시스템을 통해 데이터를 사용 하 여 사용할 때 보다 더 복잡 한 코드를 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-150">**Ease of implementation** as we'll see shortly, storing and retrieving binary data stored directly within the database involves a bit more code than when working with data through the file system.</span></span> <span data-ttu-id="a6472-151">또한 보기 또는 이진 데이터를 다운로드 하는 사용자에 대 한 순서로 이러한 제공 해야 해당 데이터에 대 한 URL입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-151">Additionally, in order for a user to view or download binary data they must be presented with a URL to that data.</span></span> <span data-ttu-id="a6472-152">데이터는 웹 서버 파일 시스템에 있는 경우 URL은 간단 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-152">If the data resides on the web server s file system, the URL is straightforward.</span></span> <span data-ttu-id="a6472-153">그러나 데이터를 데이터베이스에 저장 됩니다 웹 만들어야 검색 하 고 데이터베이스에서 데이터를 반환 하는 페이지입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-153">If the data is stored in the database, however, a web page needs to be created that will retrieve and return the data from the database.</span></span>
- <span data-ttu-id="a6472-154">**이진 데이터에 대 한 광범위 한 액세스** 이진 데이터를 다른 서비스 또는 데이터베이스에서 데이터를 끌어올 수 없습니다는 응용 프로그램에 액세스할 수 있도록 해야 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-154">**Wider access to the binary data** the binary data may need to be accessible to other services or applications, ones that cannot pull the data from the database.</span></span> <span data-ttu-id="a6472-155">예를 들어, 각 제품과 관련 된 이미지 해야 할 수도 통해 사용자에 게 사용할 수 있습니다 [FTP](http://en.wikipedia.org/wiki/File_Transfer_Protocol), 이때 d 하고자 이진 데이터를 파일 시스템에 저장 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-155">For example, the images associated with each product might also need to be available to users through [FTP](http://en.wikipedia.org/wiki/File_Transfer_Protocol), in which case we d want to store the binary data on the file system.</span></span>
- <span data-ttu-id="a6472-156">**성능** 이진 데이터를 파일 시스템에 저장 된 경우 데이터베이스 서버 및 웹 서버 간에 요청 및 네트워크 정체 보다 작을 것 경우 이진 데이터를 데이터베이스에 직접 저장 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-156">**Performance** if the binary data is stored on the file system, the demand and network congestion between the database server and web server will be less than if the binary data is stored directly within the database.</span></span>

<span data-ttu-id="a6472-157">파일 시스템에 이진 데이터를 저장 하는 데 가지 주요 단점은 데이터베이스에서 데이터를 구분할 수입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-157">The main disadvantage of storing binary data on the file system is that it decouples the data from the database.</span></span> <span data-ttu-id="a6472-158">레코드에서 삭제 되 면는 `Products` 테이블, 웹 서버의 파일 시스템에 연결된 된 파일 자동으로 삭제 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-158">If a record is deleted from the `Products` table, the associated file on the web server s file system is not automatically deleted.</span></span> <span data-ttu-id="a6472-159">사용 되지 않는, 분리 된 파일을 사용 하 여 파일 또는 파일 시스템을 삭제 하기 위해 추가 코드는 복잡해 작성 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-159">We must write extra code to delete the file or the file system will become cluttered with unused, orphaned files.</span></span> <span data-ttu-id="a6472-160">또한 데이터베이스를 백업할 때 항상 해야도 파일 시스템에 연결 된 이진 데이터의 백업을 확인 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-160">Furthermore, when backing up the database, we must make sure to make backups of the associated binary data on the file system, as well.</span></span> <span data-ttu-id="a6472-161">다른 사이트 또는 서버와 유사한 문제가 데이터베이스를 이동 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-161">Moving the database to another site or server poses similar challenges.</span></span>

<span data-ttu-id="a6472-162">형식의 열을 만들어 Microsoft SQL Server 2005 데이터베이스에 직접 이진 데이터에 저장 수는 또는 `varbinary`합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-162">Alternatively, binary data can be stored directly in a Microsoft SQL Server 2005 database by creating a column of type `varbinary`.</span></span> <span data-ttu-id="a6472-163">와 같은 다른 가변 길이 데이터 형식과 보유할 수 있는 이진 데이터의 최대 길이이 열에 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-163">Like with other variable length data types, you can specify a maximum length of the binary data that can be held in this column.</span></span> <span data-ttu-id="a6472-164">예를 들어, 예약할 최대 5,000 바이트 사용 `varbinary(5000)`; `varbinary(MAX)` 2GB에 대 한 최대 저장소 크기를 허용 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-164">For example, to reserve at most 5,000 bytes use `varbinary(5000)`; `varbinary(MAX)` allows for the maximum storage size, about 2 GB.</span></span>

<span data-ttu-id="a6472-165">데이터베이스에서 직접 이진 데이터를 저장 하는 주요 장점은 이진 데이터와 데이터베이스 간의 긴밀 한 결합입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-165">The main advantage of storing binary data directly in the database is the tight coupling between the binary data and the database record.</span></span> <span data-ttu-id="a6472-166">이 백업 또는 다른 사이트 또는 서버에 데이터베이스를 이동 하는 같은 데이터베이스 관리 작업을 크게 간소화 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-166">This greatly simplifies database administration tasks, like backups or moving the database to a different site or server.</span></span> <span data-ttu-id="a6472-167">또한 자동으로 레코드를 삭제 하면 해당 이진 데이터를 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-167">Also, deleting a record automatically deletes the corresponding binary data.</span></span> <span data-ttu-id="a6472-168">데이터베이스에 이진 데이터를 저장 하는 미묘한 이점이 더 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-168">There are also more subtle benefits of storing the binary data in the database.</span></span> <span data-ttu-id="a6472-169">참조 [저장할 이진 파일 직접 데이터베이스를 사용 하 여 ASP.NET 2.0의](http://aspnet.4guysfromrolla.com/articles/120606-1.aspx) 심도 있는 논의 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-169">See [Storing Binary Files Directly in the Database Using ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/120606-1.aspx) for a more in-depth discussion.</span></span>

> [!NOTE]
> <span data-ttu-id="a6472-170">Microsoft SQL Server 2000 및 이전 버전의 `varbinary` 데이터 형식의 8,000 바이트의 최대 제한이 있었습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-170">In Microsoft SQL Server 2000 and earlier versions, the `varbinary` data type had a maximum limit of 8,000 bytes.</span></span> <span data-ttu-id="a6472-171">최대 2GB의 이진 데이터를 저장 하는 [ `image` 데이터 형식](https://msdn.microsoft.com/library/ms187993.aspx) 를 대신 사용 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-171">To store up to 2 GB of binary data the [`image` data type](https://msdn.microsoft.com/library/ms187993.aspx) needs to be used instead.</span></span> <span data-ttu-id="a6472-172">그러나 추가 된 `MAX` SQL Server 2005에서는는 `image` 데이터 형식에 사용 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-172">With the addition of `MAX` in SQL Server 2005, however, the `image` data type has been deprecated.</span></span> <span data-ttu-id="a6472-173">그가 계속 지원에 대 한 이전 버전과 호환성을 하지만 Microsoft는 발표 했습니다는 `image` 데이터 형식을 SQL Server의 이후 버전에서 제거 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-173">It s still supported for backwards compatibility, but Microsoft has announced that the `image` data type will be removed in a future version of SQL Server.</span></span>


<span data-ttu-id="a6472-174">오래 된 데이터 모델을 사용 하는 경우 발생할 수 있습니다는 `image` 데이터 형식입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-174">If you are working with an older data model you may see the `image` data type.</span></span> <span data-ttu-id="a6472-175">Northwind 데이터베이스 s `Categories` 테이블에는 `Picture` 범주에 대 한 이미지 파일의 이진 데이터를 저장할 수 있는 열입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-175">The Northwind database s `Categories` table has a `Picture` column that can be used to store the binary data of an image file for the category.</span></span> <span data-ttu-id="a6472-176">이 열 형식의 Northwind 데이터베이스에 Microsoft Access 및 이전 버전의 SQL Server에 기반을 두고 있으므로 `image`합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-176">Since the Northwind database has its roots in Microsoft Access and earlier versions of SQL Server, this column is of type `image`.</span></span>

<span data-ttu-id="a6472-177">이 자습서에는 다음 세 가지 방법을 모두 사용 하겠습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-177">For this tutorial and the next three, we'll use both approaches.</span></span> <span data-ttu-id="a6472-178">합니다 `Categories` 테이블에 이미를 `Picture` 범주에 대 한 이미지의 이진 콘텐츠를 저장 하기 위한 열입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-178">The `Categories` table already has a `Picture` column for storing the binary content of an image for the category.</span></span> <span data-ttu-id="a6472-179">추가 열을 추가한 `BrochurePath`범주의 인쇄 품질의 고급 개요를 제공 하는 데 사용할 수 있는 웹 서버의 파일 시스템에 PDF에 대 한 경로 저장 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-179">We'll add an additional column, `BrochurePath`, to store a path to a PDF on the web server s file system that can be used to provide a print-quality, polished overview of the category.</span></span>

## <a name="step-3-adding-thebrochurepathcolumn-to-thecategoriestable"></a><span data-ttu-id="a6472-180">3 단계: 추가 된`BrochurePath`열에는`Categories`테이블</span><span class="sxs-lookup"><span data-stu-id="a6472-180">Step 3: Adding the`BrochurePath`Column to the`Categories`Table</span></span>

<span data-ttu-id="a6472-181">현재 범주 테이블에 4 개의 열: `CategoryID`, `CategoryName`를 `Description`, 및 `Picture`합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-181">Currently the Categories table has only four columns: `CategoryID`, `CategoryName`, `Description`, and `Picture`.</span></span> <span data-ttu-id="a6472-182">이러한 필드 외에도 새로 가리키는 범주의 브로슈어 (있는 경우)를 추가 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-182">In addition to these fields, we need to add a new one that will point to the category s brochure (if one exists).</span></span> <span data-ttu-id="a6472-183">이 열을 추가 하려면 서버 탐색기에서 드릴 다운 테이블을 마우스 오른쪽 단추로 클릭 이동 된 `Categories` 테이블 및 테이블 정의 열기 (그림 5 참조).</span><span class="sxs-lookup"><span data-stu-id="a6472-183">To add this column, go to the Server Explorer, drill down into the Tables, right-click on the `Categories` table and choose Open Table Definition (see Figure 5).</span></span> <span data-ttu-id="a6472-184">서버 탐색기에 표시 되지 않는다면 보기 메뉴에서 서버 탐색기 옵션을 선택 하 여 표시 하거나 Ctrl + Alt + S를 누릅니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-184">If you do not see the Server Explorer, bring it up by selecting the Server Explorer option from the View menu, or hit Ctrl+Alt+S.</span></span>

<span data-ttu-id="a6472-185">새 `varchar(200)` 열을 `Categories` 라는 테이블을 `BrochurePath` 하며 `NULL` s 및 저장 아이콘을 클릭 (또는 Ctrl + S를 누릅니다).</span><span class="sxs-lookup"><span data-stu-id="a6472-185">Add a new `varchar(200)` column to the `Categories` table that is named `BrochurePath` and allows `NULL` s and click the Save icon (or hit Ctrl+S).</span></span>


<span data-ttu-id="a6472-186">[![Categories 테이블 BrochurePath 열을 추가 합니다.](uploading-files-cs/_static/image5.gif)](uploading-files-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="a6472-186">[![Add a BrochurePath Column to the Categories Table](uploading-files-cs/_static/image5.gif)](uploading-files-cs/_static/image5.png)</span></span>

<span data-ttu-id="a6472-187">**그림 5**: 추가 된 `BrochurePath` 열을 합니다 `Categories` 테이블 ([전체 크기 이미지를 보려면 클릭](uploading-files-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="a6472-187">**Figure 5**: Add a `BrochurePath` Column to the `Categories` Table ([Click to view full-size image](uploading-files-cs/_static/image6.png))</span></span>


## <a name="step-4-updating-the-architecture-to-use-thepictureandbrochurepathcolumns"></a><span data-ttu-id="a6472-188">4 단계: 아키텍처를 사용 하도록 업데이트 합니다`Picture`고`BrochurePath`열</span><span class="sxs-lookup"><span data-stu-id="a6472-188">Step 4: Updating the Architecture to Use the`Picture`and`BrochurePath`Columns</span></span>

<span data-ttu-id="a6472-189">합니다 `CategoriesDataTable` 데이터 액세스 계층 (DAL)에서 현재 4 개가 `DataColumn` s 정의: `CategoryID`, `CategoryName`를 `Description`, 및 `NumberOfProducts`합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-189">The `CategoriesDataTable` in the Data Access Layer (DAL) currently has four `DataColumn` s defined: `CategoryID`, `CategoryName`, `Description`, and `NumberOfProducts`.</span></span> <span data-ttu-id="a6472-190">이 DataTable을 원래 디자인에서는 [데이터 액세스 레이어 만들기](../introduction/creating-a-data-access-layer-cs.md) 자습서를 `CategoriesDataTable` 처음 3 개의 열만 있었습니다; 그리고 `NumberOfProducts` 열에 추가 되었습니다는 [마스터/세부 정보는 글머리 기호를 사용 하 여 세부 정보 DataList와 함께 마스터 레코드의 목록을](../filtering-scenarios-with-the-datalist-and-repeater/master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md) 자습서입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-190">When we originally designed this DataTable in the [Creating a Data Access Layer](../introduction/creating-a-data-access-layer-cs.md) tutorial, the `CategoriesDataTable` only had the first three columns; the `NumberOfProducts` column was added in the [Master/Detail Using a Bulleted List of Master Records with a Details DataList](../filtering-scenarios-with-the-datalist-and-repeater/master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md) tutorial.</span></span>

<span data-ttu-id="a6472-191">에 설명 된 대로 *데이터 액세스 레이어 만들기*, 형식화 된 DataSet의 Datatable 비즈니스 개체를 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-191">As discussed in *Creating a Data Access Layer*, the DataTables in the Typed DataSet make up the business objects.</span></span> <span data-ttu-id="a6472-192">Tableadapter는 데이터베이스와 통신 하 고 쿼리 결과 사용 하 여 비즈니스 개체를 채우는 하는 일을 담당 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-192">The TableAdapters are responsible for communicating with the database and populating the business objects with the query results.</span></span> <span data-ttu-id="a6472-193">`CategoriesDataTable` 채워집니다는 `CategoriesTableAdapter`, 세 가지 데이터 검색 메서드보다 있는:</span><span class="sxs-lookup"><span data-stu-id="a6472-193">The `CategoriesDataTable` is populated by the `CategoriesTableAdapter`, which has three data retrieval methods:</span></span>

- <span data-ttu-id="a6472-194">`GetCategories()` TableAdapter가 기본 쿼리를 실행 하 고 반환 합니다 `CategoryID`, `CategoryName`, 및 `Description` 의 모든 레코드의 필드는 `Categories` 테이블입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-194">`GetCategories()` executes the TableAdapter s main query and returns the `CategoryID`, `CategoryName`, and `Description` fields of all records in the `Categories` table.</span></span> <span data-ttu-id="a6472-195">기본 쿼리는 자동으로 생성 하 여 용도 `Insert` 고 `Update` 메서드.</span><span class="sxs-lookup"><span data-stu-id="a6472-195">The main query is what is used by the auto-generated `Insert` and `Update` methods.</span></span>
- <span data-ttu-id="a6472-196">`GetCategoryByCategoryID(categoryID)` 반환 합니다 `CategoryID`, `CategoryName`, 및 `Description` 범주 필드입니다 `CategoryID` equals *categoryID*합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-196">`GetCategoryByCategoryID(categoryID)` returns the `CategoryID`, `CategoryName`, and `Description` fields of the category whose `CategoryID` equals *categoryID*.</span></span>
- <span data-ttu-id="a6472-197">`GetCategoriesAndNumberOfProducts()` -반환 합니다 `CategoryID`, `CategoryName`, 및 `Description` 의 모든 레코드에 대 한 필드를 `Categories` 테이블입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-197">`GetCategoriesAndNumberOfProducts()` - returns the `CategoryID`, `CategoryName`, and `Description` fields for all records in the `Categories` table.</span></span> <span data-ttu-id="a6472-198">또한 하위 쿼리를 사용 하 여 각 범주와 관련 된 제품의 수를 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-198">Also uses a subquery to return the number of products associated with each category.</span></span>

<span data-ttu-id="a6472-199">이러한 반환을 쿼리 하는 알림을 `Categories` 테이블 s `Picture` 또는 `BrochurePath` 없으며 열을 `CategoriesDataTable` 제공 `DataColumn` 이러한 필드에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-199">Notice that none of these queries return the `Categories` table s `Picture` or `BrochurePath` columns; nor does the `CategoriesDataTable` provide `DataColumn` s for these fields.</span></span> <span data-ttu-id="a6472-200">그림 사용 하기 위해서는 및 `BrochurePath` 속성을 먼저 추가 해야 하는 `CategoriesDataTable` 한 다음 업데이트는 `CategoriesTableAdapter` 이러한 열이 반환 하는 클래스입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-200">In order to work with the Picture and `BrochurePath` properties, we need to first add them to the `CategoriesDataTable` and then update the `CategoriesTableAdapter` class to return these columns.</span></span>

## <a name="adding-thepictureandbrochurepathdatacolumn-s"></a><span data-ttu-id="a6472-201">추가 된`Picture`고`BrochurePath``DataColumn` s</span><span class="sxs-lookup"><span data-stu-id="a6472-201">Adding the`Picture`and`BrochurePath``DataColumn` s</span></span>

<span data-ttu-id="a6472-202">이러한 두 열을 추가 하 여 시작 된 `CategoriesDataTable`합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-202">Start by adding these two columns to the `CategoriesDataTable`.</span></span> <span data-ttu-id="a6472-203">마우스 오른쪽 단추로 클릭는 `CategoriesDataTable`의 헤더를 상황에 맞는 메뉴에서 추가 선택 하 고 다음 열 옵션을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-203">Right-click on the `CategoriesDataTable` s header, select Add from the context menu and then choose the Column option.</span></span> <span data-ttu-id="a6472-204">이렇게 하면 새 만들어집니다 `DataColumn` 이라는 DataTable에서 `Column1`합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-204">This will create a new `DataColumn` in the DataTable named `Column1`.</span></span> <span data-ttu-id="a6472-205">이 열의 이름을 바꿀 `Picture`합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-205">Rename this column to `Picture`.</span></span> <span data-ttu-id="a6472-206">속성 창에서 설정 합니다 `DataColumn` s `DataType` 속성을 `System.Byte[]` (드롭다운 목록에는 옵션이 아닙니다.) 입력 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-206">From the Properties window, set the `DataColumn` s `DataType` property to `System.Byte[]` (this is not an option in the drop-down list; you need to type it in).</span></span>


<span data-ttu-id="a6472-207">[![데이터 형식을 갖는 System.Byte DataColumn 라는 그림 만들기](uploading-files-cs/_static/image6.gif)](uploading-files-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="a6472-207">[![Create a DataColumn Named Picture whose DataType is System.Byte[]](uploading-files-cs/_static/image6.gif)](uploading-files-cs/_static/image7.png)</span></span>

<span data-ttu-id="a6472-208">**그림 6**: 만들기를 `DataColumn` 명명 된 `Picture` 인 `DataType` 됩니다 `System.Byte[]` ([클릭 하 여 큰 이미지 보기](uploading-files-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="a6472-208">**Figure 6**: Create a `DataColumn` Named `Picture` whose `DataType` is `System.Byte[]` ([Click to view full-size image](uploading-files-cs/_static/image8.png))</span></span>


<span data-ttu-id="a6472-209">다른 항목 추가 `DataColumn` 이름을 DataTable로 `BrochurePath` 기본값을 사용 하 여 `DataType` 값 (`System.String`).</span><span class="sxs-lookup"><span data-stu-id="a6472-209">Add another `DataColumn` to the DataTable, naming it `BrochurePath` using the default `DataType` value (`System.String`).</span></span>

## <a name="returning-thepictureandbrochurepathvalues-from-the-tableadapter"></a><span data-ttu-id="a6472-210">반환 된`Picture`고`BrochurePath`TableAdapter의 값</span><span class="sxs-lookup"><span data-stu-id="a6472-210">Returning the`Picture`and`BrochurePath`Values from the TableAdapter</span></span>

<span data-ttu-id="a6472-211">이 두 가지를 사용 하 여 `DataColumn` s에 추가 합니다 `CategoriesDataTable`, 업데이트 하려면 준비 된 것을 `CategoriesTableAdapter`.</span><span class="sxs-lookup"><span data-stu-id="a6472-211">With these two `DataColumn` s added to the `CategoriesDataTable`, we re ready to update the `CategoriesTableAdapter`.</span></span> <span data-ttu-id="a6472-212">주 TableAdapter 쿼리에서 반환 된 두 열의 값을 사용할 수도 있습니다 하지만이 데이터 다시 가져오기는 이진 때마다는 `GetCategories()` 메서드가 호출 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-212">We could have both of these column values returned in the main TableAdapter query, but this would bring back the binary data every time the `GetCategories()` method was invoked.</span></span> <span data-ttu-id="a6472-213">Let s를 다시 주 TableAdapter 쿼리를 업데이트 하는 대신 `BrochurePath` s 특정 범주를 반환 하는 추가 데이터 검색 메서드를 만들어 `Picture` 열입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-213">Instead, let s update the main TableAdapter query to bring back `BrochurePath` and create an additional data retrieval method that returns a particular category s `Picture` column.</span></span>

<span data-ttu-id="a6472-214">주 TableAdapter 쿼리를 업데이트 하려면 마우스 오른쪽 단추로 클릭는 `CategoriesTableAdapter`의 헤더 및 상황에 맞는 메뉴에서 구성 옵션을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-214">To update the main TableAdapter query, right-click on the `CategoriesTableAdapter` s header and choose the Configure option from the context menu.</span></span> <span data-ttu-id="a6472-215">그러면 어떤에서는 테이블 어댑터 구성 마법사 ve 다양 한 이전 자습서에에서 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-215">This brings up the Table Adapter Configuration Wizard, which we ve seen in a number of past tutorials.</span></span> <span data-ttu-id="a6472-216">쿼리 되돌리기를 업데이트 합니다 `BrochurePath` 하 고 마침을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-216">Update the query to bring back the `BrochurePath` and click Finish.</span></span>


<span data-ttu-id="a6472-217">[![또한 BrochurePath를 반환 하려면 SELECT 문에 열 목록을 업데이트합니다](uploading-files-cs/_static/image7.gif)](uploading-files-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="a6472-217">[![Update the Column List in the SELECT Statement to Also Return BrochurePath](uploading-files-cs/_static/image7.gif)](uploading-files-cs/_static/image9.png)</span></span>

<span data-ttu-id="a6472-218">**그림 7**: 열 목록을 업데이트 합니다 `SELECT` 반환할 수도 문을 `BrochurePath` ([클릭 하 여 큰 이미지 보기](uploading-files-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="a6472-218">**Figure 7**: Update the Column List in the `SELECT` Statement to Also Return `BrochurePath` ([Click to view full-size image](uploading-files-cs/_static/image10.png))</span></span>


<span data-ttu-id="a6472-219">TableAdapter에 대 한 임시 SQL 문을 사용 하는 경우 기본 쿼리에 열 목록을 업데이트 하는 모든 열 목록 업데이트는 `SELECT` TableAdapter의 메서드를 쿼리 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-219">When using ad-hoc SQL statements for the TableAdapter, updating the column list in the main query updates the column list for all of the `SELECT` query methods in the TableAdapter.</span></span> <span data-ttu-id="a6472-220">즉, 합니다 `GetCategoryByCategoryID(categoryID)` 메서드를 반환 하도록 업데이트 되었습니다는 `BrochurePath` 에서는 의도 될 수 있는 열입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-220">That means the `GetCategoryByCategoryID(categoryID)` method has been updated to return the `BrochurePath` column, which might be what we intended.</span></span> <span data-ttu-id="a6472-221">그러나 열 목록도 업데이트 된 `GetCategoriesAndNumberOfProducts()` 메서드를 제거 하는 각 범주에 대 한 제품 개수를 반환 하는 하위!</span><span class="sxs-lookup"><span data-stu-id="a6472-221">However, it also updated the column list in the `GetCategoriesAndNumberOfProducts()` method, removing the subquery that returns the number of products for each category!</span></span> <span data-ttu-id="a6472-222">가이 메서드를 업데이트 해야 하므로 `SELECT` 쿼리 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-222">Therefore, we need to update this method s `SELECT` query.</span></span> <span data-ttu-id="a6472-223">마우스 오른쪽 단추로 클릭 합니다 `GetCategoriesAndNumberOfProducts()` 메서드를 구성, 선택 및 되돌리기는 `SELECT` 원래 값으로 다시 쿼리:</span><span class="sxs-lookup"><span data-stu-id="a6472-223">Right-click on the `GetCategoriesAndNumberOfProducts()` method, choose Configure, and revert the `SELECT` query back to its original value:</span></span>


[!code-sql[Main](uploading-files-cs/samples/sample2.sql)]

<span data-ttu-id="a6472-224">다음으로, 특정 범주의 s를 반환 하는 새 TableAdapter 메서드를 만듭니다 `Picture` 열 값입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-224">Next, create a new TableAdapter method that returns a particular category s `Picture` column value.</span></span> <span data-ttu-id="a6472-225">마우스 오른쪽 단추로 클릭는 `CategoriesTableAdapter`의 헤더 TableAdapter 쿼리 구성 마법사를 시작 하는 추가 쿼리 옵션을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-225">Right-click on the `CategoriesTableAdapter` s header and choose the Add Query option to launch the TableAdapter Query Configuration Wizard.</span></span> <span data-ttu-id="a6472-226">이 마법사의 첫 번째 단계는 임시 SQL 문을 사용 하 여 데이터를 쿼리, 필요한 경우 새 저장 프로시저 또는 기존 우리를 요청 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-226">The first step of this wizard asks us if we want to query data using an ad-hoc SQL statement, a new stored procedure, or an existing one.</span></span> <span data-ttu-id="a6472-227">SQL 문 사용을 선택 하 고 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-227">Select Use SQL statements and click Next.</span></span> <span data-ttu-id="a6472-228">우리는 반환할 행, 하므로 행 옵션 두 번째 단계에서 반환 하는 SELECT를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-228">Since we will be returning a row, choose the SELECT which returns rows option from the second step.</span></span>


<span data-ttu-id="a6472-229">[![사용 하 여 SQL 문을 옵션 선택](uploading-files-cs/_static/image8.gif)](uploading-files-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="a6472-229">[![Select the Use SQL statements Option](uploading-files-cs/_static/image8.gif)](uploading-files-cs/_static/image11.png)</span></span>

<span data-ttu-id="a6472-230">**그림 8**: 사용 하 여 SQL 문을 옵션을 선택 ([큰 이미지를 보려면 클릭](uploading-files-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="a6472-230">**Figure 8**: Select the Use SQL statements Option ([Click to view full-size image](uploading-files-cs/_static/image12.png))</span></span>


<span data-ttu-id="a6472-231">[![선택 행을 반환 하는 SELECT 쿼리는 Categories 테이블에서 레코드를 반환 하 고, 이후](uploading-files-cs/_static/image9.gif)](uploading-files-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="a6472-231">[![Since the Query Will Return a Record from the Categories Table, Choose SELECT which returns rows](uploading-files-cs/_static/image9.gif)](uploading-files-cs/_static/image13.png)</span></span>

<span data-ttu-id="a6472-232">**그림 9**: 쿼리는 행을 반환 하는 선택 선택 범주 테이블에서 레코드를 반환 하므로 ([큰 이미지를 보려면 클릭](uploading-files-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="a6472-232">**Figure 9**: Since the Query Will Return a Record from the Categories Table, Choose SELECT which returns rows ([Click to view full-size image](uploading-files-cs/_static/image14.png))</span></span>


<span data-ttu-id="a6472-233">세 번째 단계에서는 다음 SQL 쿼리를 입력 하 고 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-233">In the third step, enter the following SQL query and click Next:</span></span>


[!code-sql[Main](uploading-files-cs/samples/sample3.sql)]

<span data-ttu-id="a6472-234">마지막 단계는 새 메서드의 이름을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-234">The last step is to choose the name for the new method.</span></span> <span data-ttu-id="a6472-235">사용 하 여 `FillCategoryWithBinaryDataByCategoryID` 및 `GetCategoryWithBinaryDataByCategoryID` 채우기 돌아가 DataTable DataTable 패턴, 각각.</span><span class="sxs-lookup"><span data-stu-id="a6472-235">Use `FillCategoryWithBinaryDataByCategoryID` and `GetCategoryWithBinaryDataByCategoryID` for the Fill a DataTable and Return a DataTable patterns, respectively.</span></span> <span data-ttu-id="a6472-236">마법사를 완료 하려면 마침을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-236">Click Finish to complete the wizard.</span></span>


<span data-ttu-id="a6472-237">[![TableAdapter가의 메서드에 대 한 이름을 선택 합니다.](uploading-files-cs/_static/image10.gif)](uploading-files-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="a6472-237">[![Choose the Names for the TableAdapter s Methods](uploading-files-cs/_static/image10.gif)](uploading-files-cs/_static/image15.png)</span></span>

<span data-ttu-id="a6472-238">**그림 10**: tableadapter 메서드 이름 선택 ([큰 이미지를 보려면 클릭](uploading-files-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="a6472-238">**Figure 10**: Choose the Names for the TableAdapter s Methods ([Click to view full-size image](uploading-files-cs/_static/image16.png))</span></span>


> [!NOTE]
> <span data-ttu-id="a6472-239">테이블 어댑터 쿼리 구성 마법사를 완료 한 후 새 명령 텍스트를 반환 하는 스키마를 사용 하 여 데이터와 다른 주 쿼리의 스키마를 알리는 대화 상자가 표시 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-239">After completing the Table Adapter Query Configuration Wizard you may see a dialog box informing you that the new command text returns data with schema different from the schema of the main query.</span></span> <span data-ttu-id="a6472-240">즉, 마법사는 유의 해야 하는 TableAdapter가 기본 쿼리 `GetCategories()` 방금 만든 아닌 다른 스키마를 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-240">In short, the wizard is noting that the TableAdapter s main query `GetCategories()` returns a different schema than the one we just created.</span></span> <span data-ttu-id="a6472-241">하지만이 원하는 항목 이므로이 메시지를 무시할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-241">But this is what we want, so you can disregard this message.</span></span>


<span data-ttu-id="a6472-242">또한 염두에 임시 SQL 문을 사용 하는 시간에 나중에 TableAdapter가 기본 쿼리를 변경 하려면 마법사를 사용 하는 경우 수정 됩니다는 `GetCategoryWithBinaryDataByCategoryID` s 메서드에 `SELECT`의 문 열 목록에서 해당 열을 포함 하는 기본 쿼리 (즉, 제거 됩니다는 `Picture` 쿼리에서 열).</span><span class="sxs-lookup"><span data-stu-id="a6472-242">Also, keep in mind that if you are using ad-hoc SQL statements and use the wizard to change the TableAdapter s main query at some later point in time, it will modify the `GetCategoryWithBinaryDataByCategoryID` method s `SELECT` statement s column list to include just those columns from the main query (that is, it will remove the `Picture` column from the query).</span></span> <span data-ttu-id="a6472-243">반환할 열 목록을 수동으로 업데이트 해야 합니다 `Picture` 열을 사용 하 여 저희 비슷합니다를 `GetCategoriesAndNumberOfProducts()` 이 단계에서는 이전 메서드.</span><span class="sxs-lookup"><span data-stu-id="a6472-243">You will have to manually update the column list to return the `Picture` column, similar to what we did with the `GetCategoriesAndNumberOfProducts()` method earlier in this step.</span></span>

<span data-ttu-id="a6472-244">두를 추가한 후 `DataColumn` 에 `CategoriesDataTable` 및 `GetCategoryWithBinaryDataByCategoryID` 메서드를는 `CategoriesTableAdapter`, 입력 데이터 집합 디자이너에서 이러한 클래스에 그림 11의 스크린샷과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-244">After adding the two `DataColumn` s to the `CategoriesDataTable` and the `GetCategoryWithBinaryDataByCategoryID` method to the `CategoriesTableAdapter`, these classes in the Typed DataSet Designer should look like the screenshot in Figure 11.</span></span>


![새 열 및 메서드를 포함 하는 데이터 집합 디자이너](uploading-files-cs/_static/image11.gif)

<span data-ttu-id="a6472-246">**그림 11**: 새 열 및 메서드를 포함 하는 데이터 집합 디자이너</span><span class="sxs-lookup"><span data-stu-id="a6472-246">**Figure 11**: The DataSet Designer Includes the New Columns and Method</span></span>


## <a name="updating-the-business-logic-layer-bll"></a><span data-ttu-id="a6472-247">비즈니스 논리 계층 BLL ()를 업데이트 하는 중</span><span class="sxs-lookup"><span data-stu-id="a6472-247">Updating the Business Logic Layer (BLL)</span></span>

<span data-ttu-id="a6472-248">업데이트 DAL을 사용 하 여 이제 남은 것은 계층 BLL (비즈니스 논리) 새 메서드를 포함 하도록 확장할 수 `CategoriesTableAdapter` 메서드.</span><span class="sxs-lookup"><span data-stu-id="a6472-248">With the DAL updated, all that remains is to augment the Business Logic Layer (BLL) to include a method for the new `CategoriesTableAdapter` method.</span></span> <span data-ttu-id="a6472-249">다음 메서드를 추가 합니다 `CategoriesBLL` 클래스:</span><span class="sxs-lookup"><span data-stu-id="a6472-249">Add the following method to the `CategoriesBLL` class:</span></span>


[!code-csharp[Main](uploading-files-cs/samples/sample4.cs)]

## <a name="step-5-uploading-a-file-from-the-client-to-the-web-server"></a><span data-ttu-id="a6472-250">웹 서버에 클라이언트에서 파일을 업로드 하는 5 단계:</span><span class="sxs-lookup"><span data-stu-id="a6472-250">Step 5: Uploading a File From the Client to the Web Server</span></span>

<span data-ttu-id="a6472-251">종종 이진 데이터를 수집 하려는 경우이 데이터는 최종 사용자가 제공 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-251">When collecting binary data, oftentimes this data is supplied by an end user.</span></span> <span data-ttu-id="a6472-252">이 정보를 캡처하려면 사용자는 자신의 컴퓨터에서 웹 서버에 파일을 업로드할 수 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-252">To capture this information, the user needs to be able to upload a file from their computer to the web server.</span></span> <span data-ttu-id="a6472-253">업로드 된 데이터를 웹 서버 파일 시스템 및 데이터베이스의 파일 경로 추가 또는 이진 콘텐츠 데이터베이스에 직접 작성 파일을 저장 합니다. 데이터 모델을 통합 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-253">The uploaded data then needs to be integrated with the data model, which may mean saving the file to the web server s file system and adding a path to the file in the database, or writing the binary contents directly into the database.</span></span> <span data-ttu-id="a6472-254">이 단계에서는 사용자가 자신의 컴퓨터에서 서버에 파일 업로드를 허용 하는 방법을 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-254">In this step we'll look at how to allow a user to upload files from their computer to the server.</span></span> <span data-ttu-id="a6472-255">다음 자습서에서는 데이터 모델을 사용 하 여 업로드 된 파일을 통합에 대해 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-255">In the next tutorial we'll turn our attention to integrating the uploaded file with data model.</span></span>

<span data-ttu-id="a6472-256">ASP.NET 2.0 새로운 [FileUpload 웹 컨트롤](https://msdn.microsoft.com/library/ms227677(VS.80).aspx) 자신의 컴퓨터에서 파일을 웹 서버에 보낼 사용자에 대 한 메커니즘을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-256">ASP.NET 2.0 s new [FileUpload Web control](https://msdn.microsoft.com/library/ms227677(VS.80).aspx) provides a mechanism for users to send a file from their computer to the web server.</span></span> <span data-ttu-id="a6472-257">FileUpload 컨트롤 렌더링을 `<input>` 요소입니다 `type` 파일 브라우저 찾아보기 단추를 사용 하 여 텍스트 상자로 표시 하는 특성이 설정 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-257">The FileUpload control renders as an `<input>` element whose `type` attribute is set to file, which browsers display as a textbox with a Browse button.</span></span> <span data-ttu-id="a6472-258">찾아보기 단추를 누르면 사용자 파일을 선택할 수 있는 대화 상자를 나타납니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-258">Clicking the Browse button brings up a dialog box from which the user can select a file.</span></span> <span data-ttu-id="a6472-259">양식에 다시 게시 되 면 선택한 파일이의 내용은 포스트백 함께 전송 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-259">When the form is posted back, the selected file s contents are sent along with the postback.</span></span> <span data-ttu-id="a6472-260">서버 쪽에서 업로드 된 파일에 대 한 정보는 FileUpload 컨트롤 속성을 통해 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-260">On the server-side, information about the uploaded file is accessible through the FileUpload control s properties.</span></span>

<span data-ttu-id="a6472-261">파일 업로드를 보여 주기 위해 엽니다는 `FileUpload.aspx` 페이지에 `BinaryData` 폴더 디자이너 도구 상자에서 FileUpload 컨트롤을 끌어서 s control 설정 `ID` 속성을 `UploadTest`.</span><span class="sxs-lookup"><span data-stu-id="a6472-261">To demonstrate uploading files, open the `FileUpload.aspx` page in the `BinaryData` folder, drag a FileUpload control from the Toolbox onto the Designer, and set the control s `ID` property to `UploadTest`.</span></span> <span data-ttu-id="a6472-262">다음으로 설정 단추 웹 컨트롤을 추가 해당 `ID` 하 고 `Text` 속성을 `UploadButton` 각각 선택한 파일을 업로드 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-262">Next, add a Button Web control setting its `ID` and `Text` properties to `UploadButton` and Upload Selected File, respectively.</span></span> <span data-ttu-id="a6472-263">마지막으로 지웁니다 단추 아래의 Label 웹 컨트롤을 배치할 해당 `Text` 속성 집합과 해당 `ID` 속성을 `UploadDetails`입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-263">Finally, place a Label Web control beneath the Button, clear out its `Text` property and set its `ID` property to `UploadDetails`.</span></span>


<span data-ttu-id="a6472-264">[![ASP.NET 페이지에 FileUpload 컨트롤을 추가 합니다.](uploading-files-cs/_static/image12.gif)](uploading-files-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="a6472-264">[![Add a FileUpload Control to the ASP.NET Page](uploading-files-cs/_static/image12.gif)](uploading-files-cs/_static/image17.png)</span></span>

<span data-ttu-id="a6472-265">**그림 12**: ASP.NET 페이지에 FileUpload 컨트롤 추가 ([큰 이미지를 보려면 클릭](uploading-files-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="a6472-265">**Figure 12**: Add a FileUpload Control to the ASP.NET Page ([Click to view full-size image](uploading-files-cs/_static/image18.png))</span></span>


<span data-ttu-id="a6472-266">그림 13에서는 브라우저를 통해 볼 때이 페이지를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-266">Figure 13 shows this page when viewed through a browser.</span></span> <span data-ttu-id="a6472-267">사용자가 자신의 컴퓨터에서 파일을 선택할 수 있도록 파일 선택 대화 상자, 표시 찾아보기 단추를 클릭 하는 참고 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-267">Note that clicking the Browse button brings up a file selection dialog box, allowing the user to pick a file from their computer.</span></span> <span data-ttu-id="a6472-268">파일 선택 되 면 웹 서버로 선택한 파일이 이진 콘텐츠를 전송 하는 포스트백을 발생 시키는 선택한 파일 업로드 단추를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-268">Once a file has been selected, clicking the Upload Selected File button causes a postback that sends the selected file s binary content to the web server.</span></span>


<span data-ttu-id="a6472-269">[![사용자가 자신의 컴퓨터에서 서버로 업로드할 파일을 선택할 수 있습니다.](uploading-files-cs/_static/image13.gif)](uploading-files-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="a6472-269">[![The User Can Select a File to Upload from their Computer to the Server](uploading-files-cs/_static/image13.gif)](uploading-files-cs/_static/image19.png)</span></span>

<span data-ttu-id="a6472-270">**그림 13**: 사용자가 컴퓨터를 서버에서 업로드할 파일을 선택할 수 ([큰 이미지를 보려면 클릭](uploading-files-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="a6472-270">**Figure 13**: The User Can Select a File to Upload from their Computer to the Server ([Click to view full-size image](uploading-files-cs/_static/image20.png))</span></span>


<span data-ttu-id="a6472-271">포스트백에서 업로드 한 파일이 파일 시스템에 저장할 수 있습니다 또는 이진 데이터는 Stream을 통해 직접 작동할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-271">On postback, the uploaded file can be saved to the file system or its binary data can be worked with directly through a Stream.</span></span> <span data-ttu-id="a6472-272">예를 들어 만든 수는 `~/Brochures` 폴더에 업로드 된 파일을 저장 하 고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-272">For this example, let s create a `~/Brochures` folder and save the uploaded file there.</span></span> <span data-ttu-id="a6472-273">추가 하 여 시작 합니다 `Brochures` 루트 디렉터리의 하위 사이트에는 폴더입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-273">Start by adding the `Brochures` folder to the site as a subfolder of the root directory.</span></span> <span data-ttu-id="a6472-274">다음에 대 한 이벤트 처리기를 만듭니다는 `UploadButton` s `Click` 이벤트 다음 코드를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-274">Next, create an event handler for the `UploadButton` s `Click` event and add the following code:</span></span>


[!code-csharp[Main](uploading-files-cs/samples/sample5.cs)]

<span data-ttu-id="a6472-275">FileUpload 컨트롤 다양 한 업로드 된 데이터로 작업 하기 위한 속성을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-275">The FileUpload control provides a variety of properties for working with the uploaded data.</span></span> <span data-ttu-id="a6472-276">예를 들어 합니다 [ `HasFile` 속성](https://msdn.microsoft.com/library/system.web.ui.webcontrols.fileupload.hasfile.aspx) 파일로 된 사용자가 업로드 되었는지 여부를 나타냅니다 하는 동안는 [ `FileBytes` 속성](https://msdn.microsoft.com/library/system.web.ui.webcontrols.fileupload.filebytes.aspx) 바이트 배열 업로드 된 이진 데이터에 대 한 액세스를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-276">For instance, the [`HasFile` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.fileupload.hasfile.aspx) indicates whether a file was uploaded by the user, while the [`FileBytes` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.fileupload.filebytes.aspx) provides access to the uploaded binary data as an array of bytes.</span></span> <span data-ttu-id="a6472-277">`Click` 이벤트 처리기는 파일이 업로드 된 함으로써 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-277">The `Click` event handler starts by ensuring that a file has been uploaded.</span></span> <span data-ttu-id="a6472-278">파일을 업로드 한 경우 레이블 이름을 업로드 된 파일, 해당 크기 (바이트)에서 및 해당 콘텐츠 형식을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-278">If a file has been uploaded, the Label shows the name of the uploaded file, its size in bytes, and its content-type.</span></span>

> [!NOTE]
> <span data-ttu-id="a6472-279">사용자를 확인할 수 있습니다 파일 업로드를 확인 하는 `HasFile` 속성 경우 경고를 표시 하 고이 s `false`, 하거나 사용할 수 있습니다를 [RequiredFieldValidator 컨트롤](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/validation/default.aspx) 대신 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-279">To ensure that the user uploads a file you can check the `HasFile` property and display a warning if it s `false`, or you may use the [RequiredFieldValidator control](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/validation/default.aspx) instead.</span></span>


<span data-ttu-id="a6472-280">S FileUpload `SaveAs(filePath)` 업로드 된 파일을에 저장 된 *filePath*합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-280">The FileUpload s `SaveAs(filePath)` saves the uploaded file to the specified *filePath*.</span></span> <span data-ttu-id="a6472-281">*filePath* 이어야 합니다는 *실제 경로* (`C:\Websites\Brochures\SomeFile.pdf`) 대신 *virtual* *경로* (`/Brochures/SomeFile.pdf`).</span><span class="sxs-lookup"><span data-stu-id="a6472-281">*filePath* must be a *physical path* (`C:\Websites\Brochures\SomeFile.pdf`) rather than a *virtual* *path* (`/Brochures/SomeFile.pdf`).</span></span> <span data-ttu-id="a6472-282">합니다 [ `Server.MapPath(virtPath)` 메서드](https://msdn.microsoft.com/library/system.web.httpserverutility.mappath.aspx) 가상 경로 사용 하 고 실제 경로 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-282">The [`Server.MapPath(virtPath)` method](https://msdn.microsoft.com/library/system.web.httpserverutility.mappath.aspx) takes a virtual path and returns its corresponding physical path.</span></span> <span data-ttu-id="a6472-283">여기서는 가상 경로 `~/Brochures/fileName`, 여기서 *fileName* 업로드 된 파일의 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-283">Here, the virtual path is `~/Brochures/fileName`, where *fileName* is the name of the uploaded file.</span></span> <span data-ttu-id="a6472-284">참조 [Server.MapPath를 사용 하 여](http://www.4guysfromrolla.com/webtech/121799-1.shtml) 가상 및 실제 경로 및 사용에 대 한 자세한 내용은 `Server.MapPath`합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-284">See [Using Server.MapPath](http://www.4guysfromrolla.com/webtech/121799-1.shtml) for more information on virtual and physical paths and using `Server.MapPath`.</span></span>

<span data-ttu-id="a6472-285">완료 한 후의 `Click` 이벤트 처리기를 잠시 브라우저에서 페이지를 테스트 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-285">After completing the `Click` event handler, take a moment to test out the page in a browser.</span></span> <span data-ttu-id="a6472-286">찾아보기 단추를 클릭 하 고 하드 드라이브에서 파일을 선택 합니다. 선택한 파일 업로드 단추를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-286">Click the Browse button and select a file from your hard drive and then click the Upload Selected File button.</span></span> <span data-ttu-id="a6472-287">그런 다음 저장 하기 전에 파일에 대 한 정보를 표시 하는 웹 서버에 포스트백 선택한 파일의 내용을 전송할는 `~/Brochures` 폴더입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-287">The postback will send the contents of the selected file to the web server, which will then display information about the file before saving it to the `~/Brochures` folder.</span></span> <span data-ttu-id="a6472-288">파일을 업로드 한 후 Visual Studio로 반환 하 고 솔루션 탐색기에서 새로 고침 단추를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-288">After uploading the file, return to Visual Studio and click the Refresh button in the Solution Explorer.</span></span> <span data-ttu-id="a6472-289">~/Brochures 폴더에서 방금 업로드 한 파일에 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-289">You should see the file you just uploaded in the ~/Brochures folder!</span></span>


<span data-ttu-id="a6472-290">[![웹 서버에 업로드 된 파일 EvolutionValley.jpg](uploading-files-cs/_static/image14.gif)](uploading-files-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="a6472-290">[![The File EvolutionValley.jpg Has Been Uploaded to the Web Server](uploading-files-cs/_static/image14.gif)](uploading-files-cs/_static/image21.png)</span></span>

<span data-ttu-id="a6472-291">**그림 14**: 파일 `EvolutionValley.jpg` 웹 서버에 업로드 된 ([클릭 하 여 큰 이미지 보기](uploading-files-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="a6472-291">**Figure 14**: The File `EvolutionValley.jpg` Has Been Uploaded to the Web Server ([Click to view full-size image](uploading-files-cs/_static/image22.png))</span></span>


![EvolutionValley.jpg은 ~/Brochures 폴더에 저장 된](uploading-files-cs/_static/image15.gif)

<span data-ttu-id="a6472-293">**그림 15**: `EvolutionValley.jpg` 에 저장 된 된 `~/Brochures` 폴더</span><span class="sxs-lookup"><span data-stu-id="a6472-293">**Figure 15**: `EvolutionValley.jpg` Was Saved to the `~/Brochures` Folder</span></span>


## <a name="subtleties-with-saving-uploaded-files-to-the-file-system"></a><span data-ttu-id="a6472-294">파일 시스템에 업로드 된 파일을 저장 하는 미묘한</span><span class="sxs-lookup"><span data-stu-id="a6472-294">Subtleties with Saving Uploaded Files to the File System</span></span>

<span data-ttu-id="a6472-295">웹 서버의 파일 시스템에 파일 업로드를 저장할 때 해결 해야 하는 몇 가지 미묘한 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-295">There are several subtleties that must be addressed when saving uploading files to the web server s file system.</span></span> <span data-ttu-id="a6472-296">보안 먼저 여기의 문제입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-296">First, there s the issue of security.</span></span> <span data-ttu-id="a6472-297">파일 시스템에 파일을 저장 하는 ASP.NET 페이지가 실행 되는 보안 컨텍스트는 쓰기 권한이 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-297">To save a file to the file system, the security context under which the ASP.NET page is executing must have Write permissions.</span></span> <span data-ttu-id="a6472-298">ASP.NET 개발 웹 서버를 현재 사용자 계정의 컨텍스트에서 실행 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-298">The ASP.NET Development Web Server runs under the context of your current user account.</span></span> <span data-ttu-id="a6472-299">Microsoft가의 인터넷 정보 서비스 (IIS) 웹 서버를 사용 하는 경우 보안 컨텍스트는 버전의 IIS 및 해당 구성에 따라 달라 집니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-299">If you are using Microsoft s Internet Information Services (IIS) as the web server, the security context depends on the version of IIS and its configuration.</span></span>

<span data-ttu-id="a6472-300">파일 시스템에 파일을 저장 하는 또 다른 문제는 다음 파일 이름 지정을 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-300">Another challenge of saving files to the file system revolves around naming the files.</span></span> <span data-ttu-id="a6472-301">페이지에 업로드 된 파일의 모든 저장 현재는 `~/Brochures`의 클라이언트 컴퓨터의 파일로 동일한 이름을 사용 하 여 디렉터리입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-301">Currently, our page saves all of the uploaded files to the `~/Brochures` directory using the same name as the file on the client s computer.</span></span> <span data-ttu-id="a6472-302">사용자는 이름의 브로슈어 업로드 하는 경우 `Brochure.pdf`, 파일으로 저장 됩니다 `~/Brochure/Brochure.pdf`합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-302">If User A uploads a brochure with the name `Brochure.pdf`, the file will be saved as `~/Brochure/Brochure.pdf`.</span></span> <span data-ttu-id="a6472-303">하지만 이후 잠시 사용자 B는 동일한 파일 이름을 가진 다른 브로슈어 파일을 업로드 하는 경우 (`Brochure.pdf`)?</span><span class="sxs-lookup"><span data-stu-id="a6472-303">But what if sometime later User B uploads a different brochure file that happens to have the same filename (`Brochure.pdf`)?</span></span> <span data-ttu-id="a6472-304">코드를 사용 하 여에서는 이제 사용자를 사용자 B가의 업로드를 사용 하 여 s 파일을 덮어쓰게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-304">With the code we have now, User A s file will be overwritten with User B s upload.</span></span>

<span data-ttu-id="a6472-305">파일 이름 충돌을 해결 하기 위한 기술의 여러 가지가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-305">There are a number of techniques for resolving file name conflicts.</span></span> <span data-ttu-id="a6472-306">한 가지 방법은 이미 있을 경우 동일한 이름의 파일을 업로드 하지 못하도록 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-306">One option is to prohibit uploading a file if there already exists one with the same name.</span></span> <span data-ttu-id="a6472-307">이 방법에서는 사용자 B 라는 파일을 업로드 하려고 할 때 `Brochure.pdf`, 시스템은 하지 해당 파일을 저장 하 고 대신 파일 이름을 바꾸고 다시 시도를 사용자 B에 게 알리는 메시지를 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-307">With this approach, when User B attempts to upload a file named `Brochure.pdf`, the system would not save their file and instead display a message informing User B to rename the file and try again.</span></span> <span data-ttu-id="a6472-308">일 수 있는 고유한 파일 이름을 사용 하 여 파일을 저장 하는 또 다른 방법은 [전역적으로 고유 식별자 (GUID)](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) 또는 레코드 s 기본 키 열을 데이터베이스에서 해당 값 (업로드 연관 된 가정를 특정 행에서 데이터 모델)입니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-308">Another approach is to save the file using a unique file name, which could be a [globally unique identifier (GUID)](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) or the value from the corresponding database record s primary key column(s) (assuming that the upload is associated with a particular row in the data model).</span></span> <span data-ttu-id="a6472-309">다음 자습서에서는 이러한 옵션을을 더 자세히 살펴봅니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-309">In the next tutorial we'll explore these options in more detail.</span></span>

## <a name="challenges-involved-with-very-large-amounts-of-binary-data"></a><span data-ttu-id="a6472-310">매우 많은 양의 이진 데이터와 연관 된 문제</span><span class="sxs-lookup"><span data-stu-id="a6472-310">Challenges Involved with Very Large Amounts of Binary Data</span></span>

<span data-ttu-id="a6472-311">이러한 자습서 캡처된 이진 데이터 크기에 있다고 가정 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-311">These tutorials assume that the binary data captured is modest in size.</span></span> <span data-ttu-id="a6472-312">매우 많은 양의 이진 데이터 파일을 몇 메가바이트 작업 또는 더 큰 이러한 자습서에서 다루지 않은 새로운 과제가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-312">Working with very large amounts of binary data files that are several megabytes or larger introduces new challenges that are beyond the scope of these tutorials.</span></span> <span data-ttu-id="a6472-313">예를 들어, 기본적으로 ASP.NET는 거부 4MB 보다의 업로드를 통해 구성할 수 있습니다 하지만 합니다 [ `<httpRuntime>` 요소](https://msdn.microsoft.com/library/e1f13641.aspx) 에서 `Web.config`합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-313">For example, by default ASP.NET will reject uploads of more than 4 MB, although this can be configured through the [`<httpRuntime>` element](https://msdn.microsoft.com/library/e1f13641.aspx) in `Web.config`.</span></span> <span data-ttu-id="a6472-314">IIS 자체 파일 업로드 크기 제한이 너무 적용합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-314">IIS imposes its own file upload size limitations, too.</span></span> <span data-ttu-id="a6472-315">참조 [IIS 업로드 파일 크기](http://vandamme.typepad.com/development/2005/09/iis_upload_file.html) 자세한 내용은 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-315">See [IIS Upload File Size](http://vandamme.typepad.com/development/2005/09/iis_upload_file.html) for more information.</span></span> <span data-ttu-id="a6472-316">또한 큰 파일을 업로드 하는 데 걸리는 시간이 기본 ASP.NET 요청을 기다리는 110 초 초과할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-316">Furthermore, the time taken to upload large files might exceed the default 110 seconds ASP.NET will wait for a request.</span></span> <span data-ttu-id="a6472-317">큰 파일로 작업할 때 발생 하는 메모리 및 성능 문제가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-317">There are also memory and performance issues that arise when working with large files.</span></span>

<span data-ttu-id="a6472-318">FileUpload 컨트롤 불가능 한 대형 파일 업로드에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-318">The FileUpload control is impractical for large file uploads.</span></span> <span data-ttu-id="a6472-319">파일의 콘텐츠 서버에 게시 되는, 최종 사용자가 업로드 진행 되 고 있는지 확인 하지 않고 있으므로 편안 하 게 대기 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-319">As the file s contents are being posted to the server, the end user must patiently wait without any confirmation that their upload is progressing.</span></span> <span data-ttu-id="a6472-320">잠시 후에 업로드할 수 있지만 업로드할 분 정도 더 큰 파일을 처리할 때 문제가 발생할 수 있는 작은 파일을 처리 하는 경우에 많은 문제가 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-320">This is not so much an issue when dealing with smaller files that can be uploaded in a few seconds, but can be an issue when dealing with larger files that may take minutes to upload.</span></span> <span data-ttu-id="a6472-321">많은 공급이 업체 제공 진행률 표시기와 ActiveX 업로드를 훨씬 더 세련 된 사용자 환경을 제공 하는 관리자와 다양 한 타사 파일을 더 큰 업로드를 처리 하기 위한 적합 한 업로드 컨트롤 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-321">There are a variety of third-party file upload controls that are better suited for handling large uploads and many of these vendors provide progress indicators and ActiveX upload managers that present a much more polished user experience.</span></span>

<span data-ttu-id="a6472-322">큰 파일을 처리 하도록 응용 프로그램에 필요한 경우 신중 하 게 문제를 조사 하 고 특정 요구 사항에 대 한 적합 한 솔루션을 찾을를 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-322">If your application needs to handle large files, you'll need to carefully investigate the challenges and find suitable solutions for your particular needs.</span></span>

## <a name="summary"></a><span data-ttu-id="a6472-323">요약</span><span class="sxs-lookup"><span data-stu-id="a6472-323">Summary</span></span>

<span data-ttu-id="a6472-324">이진 데이터를 캡처 하는데 필요한 응용 프로그램을 빌드하는 많은 문제를 소개 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-324">Building an application that needs to capture binary data introduces a number of challenges.</span></span> <span data-ttu-id="a6472-325">이 자습서에서는 처음 두 살펴보았습니다: 이진 데이터를 저장할 위치를 결정 하 고 사용자가 웹 페이지를 통해 이진 콘텐츠를 업로드할 수 있도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-325">In this tutorial we explored the first two: deciding where to store the binary data and allowing a user to upload binary content through a web page.</span></span> <span data-ttu-id="a6472-326">다음 세 개의 자습서를 통해 데이터베이스에서 레코드를 사용 하 여 업로드 된 데이터를 연결 하는 방법 뿐만 아니라 해당 텍스트 데이터 필드와 함께 이진 데이터를 표시 하는 방법을 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-326">Over the next three tutorials, we'll see how to associate the uploaded data with a record in the database as well as how to display the binary data alongside its text data fields.</span></span>

<span data-ttu-id="a6472-327">즐거운 프로그래밍!</span><span class="sxs-lookup"><span data-stu-id="a6472-327">Happy Programming!</span></span>

## <a name="further-reading"></a><span data-ttu-id="a6472-328">추가 정보</span><span class="sxs-lookup"><span data-stu-id="a6472-328">Further Reading</span></span>

<span data-ttu-id="a6472-329">이 자습서에서 다루는 항목에 대 한 자세한 내용은 다음 리소스를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="a6472-329">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="a6472-330">큰 값 데이터 형식 사용</span><span class="sxs-lookup"><span data-stu-id="a6472-330">Using Large-Value Data Types</span></span>](https://msdn.microsoft.com/library/ms178158.aspx)
- [<span data-ttu-id="a6472-331">FileUpload 컨트롤 빠른 시작</span><span class="sxs-lookup"><span data-stu-id="a6472-331">FileUpload Control QuickStarts</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/standard/fileupload.aspx)
- [<span data-ttu-id="a6472-332">ASP.NET 2.0 FileUpload 서버 컨트롤</span><span class="sxs-lookup"><span data-stu-id="a6472-332">The ASP.NET 2.0 FileUpload Server Control</span></span>](http://www.wrox.com/WileyCDA/Section/id-292158.html)
- [<span data-ttu-id="a6472-333">파일의 업로드</span><span class="sxs-lookup"><span data-stu-id="a6472-333">The Dark Side of File Uploads</span></span>](http://www.aspnetresources.com/articles/dark_side_of_file_uploads.aspx)

## <a name="about-the-author"></a><span data-ttu-id="a6472-334">저자 소개</span><span class="sxs-lookup"><span data-stu-id="a6472-334">About the Author</span></span>

<span data-ttu-id="a6472-335">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), 7 ASP/ASP.NET 서적의 저자 이자 설립자입니다 [4GuysFromRolla.com](http://www.4guysfromrolla.com), 1998 Microsoft 웹 기술을 사용 하 여 왔습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-335">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="a6472-336">Scott는 독립 컨설턴트, 강사, 그리고 기록기로 작동합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-336">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="a6472-337">최근 저서는 [ *Sams 설명 직접 ASP.NET 2.0 24 시간 동안의*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-337">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="a6472-338">그에 도달할 수 있습니다 [ mitchell@4GuysFromRolla.com합니다.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a6472-338">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="a6472-339">찾을 수 있는 저자의 블로그를 통해 또는 [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET)합니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-339">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="a6472-340">특별히 감사</span><span class="sxs-lookup"><span data-stu-id="a6472-340">Special Thanks To</span></span>

<span data-ttu-id="a6472-341">이 자습서 시리즈는 많은 유용한 검토자가 검토 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-341">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="a6472-342">이 자습서에 대 한 선행 검토자는 Teresa Murphy 및 박 광 준 Leigh 있었습니다.</span><span class="sxs-lookup"><span data-stu-id="a6472-342">Lead reviewers for this tutorial were Teresa Murphy and Bernadette Leigh.</span></span> <span data-ttu-id="a6472-343">내 향후 MSDN 문서를 검토에 관심이 있으십니까?</span><span class="sxs-lookup"><span data-stu-id="a6472-343">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="a6472-344">그렇다면 삭제 나에서 선 [ mitchell@4GuysFromRolla.com합니다.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a6472-344">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="a6472-345">다음</span><span class="sxs-lookup"><span data-stu-id="a6472-345">Next</span></span>](displaying-binary-data-in-the-data-web-controls-cs.md)
