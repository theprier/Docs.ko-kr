---
uid: web-forms/overview/data-access/working-with-batched-data/batch-updating-cs
title: 일괄 업데이트 (C#) | Microsoft Docs
author: rick-anderson
description: 단일 작업에서 여러 데이터베이스 레코드를 업데이트 하는 방법에 알아봅니다. 사용자 인터페이스 계층의 각 행이 편집 가능한 GridView를 빌드합니다. 데이터에서...
ms.author: riande
ms.date: 06/26/2007
ms.assetid: 4e849bcc-c557-4bc3-937e-f7453ee87265
msc.legacyurl: /web-forms/overview/data-access/working-with-batched-data/batch-updating-cs
msc.type: authoredcontent
ms.openlocfilehash: c878056273ea821e4dd4481fa1b6f7690f22b285
ms.sourcegitcommit: 45ac74e400f9f2b7dbded66297730f6f14a4eb25
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/16/2018
ms.locfileid: "41827733"
---
<a name="batch-updating-c"></a><span data-ttu-id="21dea-105">일괄 업데이트 (C#)</span><span class="sxs-lookup"><span data-stu-id="21dea-105">Batch Updating (C#)</span></span>
====================
<span data-ttu-id="21dea-106">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="21dea-106">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="21dea-107">[코드를 다운로드](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_64_CS.zip) 또는 [PDF 다운로드](batch-updating-cs/_static/datatutorial64cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="21dea-107">[Download Code](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_64_CS.zip) or [Download PDF](batch-updating-cs/_static/datatutorial64cs1.pdf)</span></span>

> <span data-ttu-id="21dea-108">단일 작업에서 여러 데이터베이스 레코드를 업데이트 하는 방법에 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-108">Learn how to update multiple database records in a single operation.</span></span> <span data-ttu-id="21dea-109">사용자 인터페이스 계층의 각 행이 편집 가능한 GridView를 빌드합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-109">In the User Interface Layer we build a GridView where each row is editable.</span></span> <span data-ttu-id="21dea-110">데이터 액세스 계층에서는 모든 업데이트가 성공 하거나 모든 업데이트 내용이 롤백됩니다 않도록 트랜잭션 내에서 여러 업데이트 작업 래핑합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-110">In the Data Access Layer we wrap the multiple Update operations within a transaction to ensure that all updates succeed or all updates are rolled back.</span></span>


## <a name="introduction"></a><span data-ttu-id="21dea-111">소개</span><span class="sxs-lookup"><span data-stu-id="21dea-111">Introduction</span></span>

<span data-ttu-id="21dea-112">에 [이전 자습서](wrapping-database-modifications-within-a-transaction-cs.md) 데이터베이스 트랜잭션에 대 한 지원을 추가 하려면 데이터 액세스 계층을 확장 하는 방법에 살펴보았습니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-112">In the [preceding tutorial](wrapping-database-modifications-within-a-transaction-cs.md) we saw how to extend the Data Access Layer to add support for database transactions.</span></span> <span data-ttu-id="21dea-113">데이터베이스 트랜잭션은 보장 일련의 데이터 수정 문 모든 수정 실패 하거나 성공할 모두 하나의 원자성 작업으로 간주 됩니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-113">Database transactions guarantee that a series of data modification statements will be treated as one atomic operation, which ensures that all modifications will fail or all will succeed.</span></span> <span data-ttu-id="21dea-114">이 하위 수준 DAL 기능으로 사용 하 여 일괄 처리 데이터 수정 인터페이스 만들기에 대해 준비가 다시 했습니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-114">With this low-level DAL functionality out of the way, we re ready to turn our attention to creating batch data modification interfaces.</span></span>

<span data-ttu-id="21dea-115">이 자습서의 각 행이 편집 가능한 (그림 1 참조) GridView를 빌드 해 보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-115">In this tutorial we'll build a GridView where each row is editable (see Figure 1).</span></span> <span data-ttu-id="21dea-116">각 행의 편집 인터페이스에 여기의 편집 열 필요가 없습니다를 렌더링 하므로 업데이트 및 취소 단추가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-116">Since each row is rendered in its editing interface, there s no need for a column of Edit, Update, and Cancel buttons.</span></span> <span data-ttu-id="21dea-117">대신는 두 개의 제품 업데이트 페이지를 클릭 하면 GridView 행을 열거 하 고 데이터베이스를 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-117">Instead, there are two Update Products buttons on the page that, when clicked, enumerate the GridView rows and update the database.</span></span>


<span data-ttu-id="21dea-118">[![GridView의 각 행은 편집 가능](batch-updating-cs/_static/image1.gif)](batch-updating-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="21dea-118">[![Each Row in the GridView is Editable](batch-updating-cs/_static/image1.gif)](batch-updating-cs/_static/image1.png)</span></span>

<span data-ttu-id="21dea-119">**그림 1**: GridView의 각 행이 편집 가능 ([큰 이미지를 보려면 클릭](batch-updating-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="21dea-119">**Figure 1**: Each Row in the GridView is Editable ([Click to view full-size image](batch-updating-cs/_static/image2.png))</span></span>


<span data-ttu-id="21dea-120">Let s 시작!</span><span class="sxs-lookup"><span data-stu-id="21dea-120">Let s get started!</span></span>

> [!NOTE]
> <span data-ttu-id="21dea-121">에 [일괄 처리 업데이트 수행](../editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs.md) DataList 컨트롤을 사용 하 여 자습서를 편집 하는 일괄 처리에서 만든 인터페이스입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-121">In the [Performing Batch Updates](../editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs.md) tutorial we created a batch editing interface using the DataList control.</span></span> <span data-ttu-id="21dea-122">이 자습서에서 사용 하는 하나는 이전 GridView 다르며 일괄 업데이트는 트랜잭션 범위 내에서 수행 됩니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-122">This tutorial differs from the previous one in that is uses a GridView and the batch update is performed within the scope of a transaction.</span></span> <span data-ttu-id="21dea-123">이 자습서를 완료 한 후 바랍니다 이전 자습서로 돌아와서 이전 자습서에서 추가한 데이터베이스 트랜잭션 관련 기능을 사용 하도록 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-123">After completing this tutorial I encourage you to return to the earlier tutorial and update it to use the database transaction-related functionality added in the preceding tutorial.</span></span>


## <a name="examining-the-steps-for-making-all-gridview-rows-editable"></a><span data-ttu-id="21dea-124">모든 GridView 행을 편집할 수 있도록 하는 단계를 검사 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-124">Examining the Steps for Making All GridView Rows Editable</span></span>

<span data-ttu-id="21dea-125">에 설명 된 대로 합니다 [An 개요의 삽입, 업데이트 및 삭제 데이터](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) 자습서에서는 GridView 행 단위로에서 해당 기본 데이터를 편집 하는 것에 대 한 기본 제공 지원을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-125">As discussed in the [An Overview of Inserting, Updating, and Deleting Data](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) tutorial, the GridView offers built-in support for editing its underlying data on a per-row basis.</span></span> <span data-ttu-id="21dea-126">GridView의 어떤 행이를 통해 편집할 수 있는 정보 내부적으로 해당 [ `EditIndex` 속성](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.editindex(VS.80).aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-126">Internally, the GridView notes what row is editable through its [`EditIndex` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.editindex(VS.80).aspx).</span></span> <span data-ttu-id="21dea-127">각 행을 행의 인덱스 값과 동일한 경우 참조 확인 GridView 되 고 해당 데이터 원본에 바인딩되어 대로 `EditIndex`입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-127">As the GridView is being bound to its data source, it checks each row to see if the index of the row equals the value of `EditIndex`.</span></span> <span data-ttu-id="21dea-128">그렇다면 해당 행 필드가 렌더링 되는 편집을 사용 하는 s 인터페이스입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-128">If so, that row s fields are rendered using their editing interfaces.</span></span> <span data-ttu-id="21dea-129">BoundFields, 편집 인터페이스는 텍스트 상자 인 `Text` 속성 BoundField s로 지정 된 데이터 필드의 값이 할당 됩니다 `DataField` 속성입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-129">For BoundFields, the editing interface is a TextBox whose `Text` property is assigned the value of the data field specified by the BoundField s `DataField` property.</span></span> <span data-ttu-id="21dea-130">TemplateFields에 대 한 합니다 `EditItemTemplate` 대신 사용 되는 `ItemTemplate`합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-130">For TemplateFields, the `EditItemTemplate` is used in place of the `ItemTemplate`.</span></span>

<span data-ttu-id="21dea-131">사용자가의 행 편집 단추를 클릭할 때 편집 워크플로가 시작 되는 것을 기억 하십시오.</span><span class="sxs-lookup"><span data-stu-id="21dea-131">Recall that the editing workflow starts when a user clicks a row s Edit button.</span></span> <span data-ttu-id="21dea-132">포스트백을 발생 시키는이 설정 하는 GridView의 `EditIndex` 속성을 클릭 한 행의 인덱스 및 데이터 표를 다시 바인딩 횟수입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-132">This causes a postback, sets the GridView s `EditIndex` property to the clicked row s index, and rebinds the data to the grid.</span></span> <span data-ttu-id="21dea-133">포스트백 될 때 행의 취소 단추를 클릭할 때 합니다 `EditIndex` 의 값으로 설정 되어 `-1` 표에 데이터를 다시 바인딩하기 전에 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-133">When a row s Cancel button is clicked, on postback the `EditIndex` is set to a value of `-1` before rebinding the data to the grid.</span></span> <span data-ttu-id="21dea-134">GridView의 행은 0에서 인덱싱을 시작, 설정 `EditIndex` 에 `-1` 읽기 전용 모드에서 GridView를 표시 하는 효과가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-134">Since the GridView s rows start indexing at zero, setting `EditIndex` to `-1` has the effect of displaying the GridView in read-only mode.</span></span>

<span data-ttu-id="21dea-135">`EditIndex` 속성은 행별 편집에 적합 하지만 일괄 편집 적합 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-135">The `EditIndex` property works well for per-row editing, but is not designed for batch editing.</span></span> <span data-ttu-id="21dea-136">전체 GridView를 편집할 수 있도록 하려면 각 행의 편집 인터페이스를 사용 하 여 렌더링 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-136">To make the entire GridView editable, we need to have each row render using its editing interface.</span></span> <span data-ttu-id="21dea-137">이 작업을 수행 하는 가장 쉬운 방법은 각 편집 가능한 필드를 TemplateField의 편집 인터페이스에 정의 된 대로 구현 되는 위치를 만들 때의 `ItemTemplate`합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-137">The easiest way to accomplish this is to create where each editable field is implemented as a TemplateField with its editing interface defined in the `ItemTemplate`.</span></span>

<span data-ttu-id="21dea-138">다음을 통해 몇 가지 단계 만들겠습니다 GridView를 완전히 편집할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-138">Over the next several steps we'll create a completely editable GridView.</span></span> <span data-ttu-id="21dea-139">1 단계에서에서에서는 GridView 및 해당 ObjectDataSource를 만들어 시작 하 고 해당 BoundFields 및 CheckBoxField TemplateFields 변환 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-139">In Step 1 we'll start by creating the GridView and its ObjectDataSource and convert its BoundFields and CheckBoxField into TemplateFields.</span></span> <span data-ttu-id="21dea-140">2 단계와 3의 설명으로 넘어가겠습니다 편집 인터페이스는 TemplateFields에서 `EditItemTemplate` s를 해당 `ItemTemplate` s입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-140">In Steps 2 and 3 we'll move the editing interfaces from the TemplateFields `EditItemTemplate` s to their `ItemTemplate` s.</span></span>

## <a name="step-1-displaying-product-information"></a><span data-ttu-id="21dea-141">1 단계: 제품 정보를 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-141">Step 1: Displaying Product Information</span></span>

<span data-ttu-id="21dea-142">GridView를 만드는 지 걱정 되기 전에 편집할 수 있는 다음 행, s 단순히 제품 정보를 표시 하 여 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-142">Before we worry about creating a GridView where are rows are editable, let s start by simply displaying the product information.</span></span> <span data-ttu-id="21dea-143">열기는 `BatchUpdate.aspx` 페이지에 `BatchData` 폴더 및 디자이너 도구 상자에서 끌어서 GridView입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-143">Open the `BatchUpdate.aspx` page in the `BatchData` folder and drag a GridView from the Toolbox onto the Designer.</span></span> <span data-ttu-id="21dea-144">GridView가 설정 `ID` 하 `ProductsGrid` 하 고 스마트 태그, 라는 새로운 ObjectDataSource는 바인딩할 선택 `ProductsDataSource`합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-144">Set the GridView s `ID` to `ProductsGrid` and, from its smart tag, choose to bind it to a new ObjectDataSource named `ProductsDataSource`.</span></span> <span data-ttu-id="21dea-145">해당 데이터를 검색할 ObjectDataSource를 구성 합니다 `ProductsBLL` s 클래스 `GetProducts` 메서드.</span><span class="sxs-lookup"><span data-stu-id="21dea-145">Configure the ObjectDataSource to retrieve its data from the `ProductsBLL` class s `GetProducts` method.</span></span>


<span data-ttu-id="21dea-146">[![ProductsBLL 클래스를 사용 하는 ObjectDataSource 구성](batch-updating-cs/_static/image2.gif)](batch-updating-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="21dea-146">[![Configure the ObjectDataSource to Use the ProductsBLL Class](batch-updating-cs/_static/image2.gif)](batch-updating-cs/_static/image3.png)</span></span>

<span data-ttu-id="21dea-147">**그림 2**: ObjectDataSource 사용 하도록 구성 된 `ProductsBLL` 클래스 ([클릭 하 여 큰 이미지 보기](batch-updating-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="21dea-147">**Figure 2**: Configure the ObjectDataSource to Use the `ProductsBLL` Class ([Click to view full-size image](batch-updating-cs/_static/image4.png))</span></span>


<span data-ttu-id="21dea-148">[![GetProducts 메서드를 사용 하 여 제품 데이터 검색](batch-updating-cs/_static/image3.gif)](batch-updating-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="21dea-148">[![Retrieve the Product Data Using the GetProducts Method](batch-updating-cs/_static/image3.gif)](batch-updating-cs/_static/image5.png)</span></span>

<span data-ttu-id="21dea-149">**그림 3**: 사용 하 여 제품 데이터를 검색 합니다 `GetProducts` 메서드 ([클릭 하 여 큰 이미지 보기](batch-updating-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="21dea-149">**Figure 3**: Retrieve the Product Data Using the `GetProducts` Method ([Click to view full-size image](batch-updating-cs/_static/image6.png))</span></span>


<span data-ttu-id="21dea-150">GridView와 같은 ObjectDataSource가의 수정 기능을 행 단위로에서 작동 하도록 설계 됩니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-150">Like the GridView, the ObjectDataSource s modification features are designed to work on a per-row basis.</span></span> <span data-ttu-id="21dea-151">레코드 집합을 업데이트 하기 위해 데이터를 일괄 처리 및 BLL에 전달 하는 ASP.NET 페이지의 코드 숨김 클래스에 약간의 코드를 작성 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-151">In order to update a set of records, we'll need to write a bit of code in the ASP.NET page s code-behind class that batches the data and passes it to the BLL.</span></span> <span data-ttu-id="21dea-152">따라서 탭을 설정할 드롭 다운 목록을 ObjectDataSource에서 업데이트, 삽입 및 삭제를 (없음).</span><span class="sxs-lookup"><span data-stu-id="21dea-152">Therefore, set the drop-down lists in the ObjectDataSource s UPDATE, INSERT, and DELETE tabs to (None).</span></span> <span data-ttu-id="21dea-153">마법사를 완료 하려면 마침을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-153">Click Finish to complete the wizard.</span></span>


<span data-ttu-id="21dea-154">[![UPDATE, INSERT 드롭 다운 목록을 설정 하 고 탭 삭제 (없음)](batch-updating-cs/_static/image4.gif)](batch-updating-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="21dea-154">[![Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE Tabs to (None)](batch-updating-cs/_static/image4.gif)](batch-updating-cs/_static/image7.png)</span></span>

<span data-ttu-id="21dea-155">**그림 4**: 드롭다운 목록에서 업데이트, 삽입 및 삭제 탭 하도록 설정 (없음) ([큰 이미지를 보려면 클릭](batch-updating-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="21dea-155">**Figure 4**: Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE Tabs to (None) ([Click to view full-size image](batch-updating-cs/_static/image8.png))</span></span>


<span data-ttu-id="21dea-156">데이터 소스 구성 마법사를 완료 한 후 ObjectDataSource가 선언적 태그는 다음과 같이 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-156">After completing the Configure Data Source wizard, the ObjectDataSource s declarative markup should look like the following:</span></span>


[!code-aspx[Main](batch-updating-cs/samples/sample1.aspx)]

<span data-ttu-id="21dea-157">Visual Studio BoundFields 만들고 GridView에서 제품 데이터 필드에 대 한 CheckBoxField 해도 데이터 소스 구성 마법사를 완료 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-157">Completing the Configure Data Source wizard also causes Visual Studio to create BoundFields and a CheckBoxField for the product data fields in the GridView.</span></span> <span data-ttu-id="21dea-158">이 자습서에서는 s만 보고 제품의 이름, 범주, 가격 및 지원 되지 않는 상태를 편집 하는 사용자를 허용 하도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-158">For this tutorial, let s only allow the user to view and edit the product s name, category, price, and discontinued status.</span></span> <span data-ttu-id="21dea-159">제거를 제외한 모든 `ProductName`, `CategoryName`를 `UnitPrice`, 및 `Discontinued` 필드 및 이름 바꾸기는 `HeaderText` 의 처음 3 개 속성 각각 Product, Category 및 Price를 필드입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-159">Remove all but the `ProductName`, `CategoryName`, `UnitPrice`, and `Discontinued` fields and rename the `HeaderText` properties of the first three fields to Product, Category, and Price, respectively.</span></span> <span data-ttu-id="21dea-160">마지막으로, GridView가 스마트 태그를 사용 하도록 설정 페이징 및 정렬 사용 확인란을 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-160">Lastly, check the Enable Paging and Enable Sorting checkboxes in the GridView s smart tag.</span></span>

<span data-ttu-id="21dea-161">이 시점에서 GridView에 세 개의 BoundFields (`ProductName`, `CategoryName`, 및 `UnitPrice`) 및는 CheckBoxField (`Discontinued`).</span><span class="sxs-lookup"><span data-stu-id="21dea-161">At this point the GridView has three BoundFields (`ProductName`, `CategoryName`, and `UnitPrice`) and a CheckBoxField (`Discontinued`).</span></span> <span data-ttu-id="21dea-162">TemplateFields 이러한 네 가지 필드로 변환 하 고 다음 TemplateField s에서 편집 인터페이스를 이동 해야 `EditItemTemplate` 에 해당 `ItemTemplate`합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-162">We need to convert these four fields into TemplateFields and then move the editing interface from the TemplateField s `EditItemTemplate` to its `ItemTemplate`.</span></span>

> [!NOTE]
> <span data-ttu-id="21dea-163">만들기 및 TemplateFields에서 사용자 지정 살펴보았습니다 합니다 [데이터 수정 인터페이스 사용자 지정](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) 자습서입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-163">We explored creating and customizing TemplateFields in the [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) tutorial.</span></span> <span data-ttu-id="21dea-164">TemplateFields CheckBoxField 고 BoundFields 변환 단계를 안내 및 인터페이스 정의 편집 해당 해당 `ItemTemplate` s, 있지만 막히면 또는 필요한 안 리프레셔가 언제 든 지이 이전 자습서를 다시 참조 하는 경우.</span><span class="sxs-lookup"><span data-stu-id="21dea-164">We'll walk through the steps of converting the BoundFields and CheckBoxField into TemplateFields and defining their editing interfaces in their `ItemTemplate` s, but if you get stuck or need a refresher, don t hesitate to refer back to this earlier tutorial.</span></span>


<span data-ttu-id="21dea-165">GridView가 스마트 태그에서 필드 대화 상자를 열려면 열 편집 링크를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-165">From the GridView s smart tag, click the Edit Columns link to open the Fields dialog box.</span></span> <span data-ttu-id="21dea-166">그런 다음 각 필드를 선택 하 고 TemplateField 링크로 변환이이 필드를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-166">Next, select each field and click the Convert this field into a TemplateField link.</span></span>


![기존 BoundFields 및 CheckBoxField TemplateField로 변환](batch-updating-cs/_static/image5.gif)

<span data-ttu-id="21dea-168">**그림 5**: 기존 BoundFields 및 CheckBoxField TemplateField로 변환</span><span class="sxs-lookup"><span data-stu-id="21dea-168">**Figure 5**: Convert the Existing BoundFields and CheckBoxField Into TemplateField</span></span>


<span data-ttu-id="21dea-169">인터페이스 편집 이동할 준비가에서는 이제는 각 필드를 TemplateField, 합니다 `EditItemTemplate` s를 `ItemTemplate` s.</span><span class="sxs-lookup"><span data-stu-id="21dea-169">Now that each field is a TemplateField, we re ready to move the editing interface from the `EditItemTemplate` s to the `ItemTemplate` s.</span></span>

## <a name="step-2-creating-theproductnameunitprice-anddiscontinuedediting-interfaces"></a><span data-ttu-id="21dea-170">2 단계: 만들기 합니다`ProductName`,`UnitPrice`, 및`Discontinued`인터페이스 편집</span><span class="sxs-lookup"><span data-stu-id="21dea-170">Step 2: Creating the`ProductName`,`UnitPrice`, and`Discontinued`Editing Interfaces</span></span>

<span data-ttu-id="21dea-171">만들기는 `ProductName`, `UnitPrice`, 및 `Discontinued` 인터페이스는이 단계의 주제 편집과 TemplateField에서 이미 정의 된 각 인터페이스가 간단 하지는 `EditItemTemplate`합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-171">Creating the `ProductName`, `UnitPrice`, and `Discontinued` editing interfaces are the topic of this step and are pretty straightforward, as each interface is already defined in the TemplateField s `EditItemTemplate`.</span></span> <span data-ttu-id="21dea-172">만들기는 `CategoryName` 편집 인터페이스는 해당 범주의 DropDownList를 만드는 필요 하므로 조금 더 복잡 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-172">Creating the `CategoryName` editing interface is a bit more involved since we need to create a DropDownList of the applicable categories.</span></span> <span data-ttu-id="21dea-173">이 `CategoryName` 3 단계에서에서 처리는 인터페이스를 편집 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-173">This `CategoryName` editing interface is tackled in Step 3.</span></span>

<span data-ttu-id="21dea-174">시작 s는 `ProductName` TemplateField 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-174">Let s start with the `ProductName` TemplateField.</span></span> <span data-ttu-id="21dea-175">GridView가 스마트 태그에서 템플릿 편집 링크를 클릭 하 고 드릴 다운 하 여 `ProductName` TemplateField의 `EditItemTemplate`입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-175">Click on the Edit Templates link from the GridView s smart tag and drill down to the `ProductName` TemplateField s `EditItemTemplate`.</span></span> <span data-ttu-id="21dea-176">텍스트 선택, 클립보드에 복사 및 붙여 넣습니다 합니다 `ProductName` TemplateField의 `ItemTemplate`입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-176">Select the TextBox, copy it to the clipboard, and then paste it to the `ProductName` TemplateField s `ItemTemplate`.</span></span> <span data-ttu-id="21dea-177">텍스트 상자 s 변경할 `ID` 속성을 `ProductName`입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-177">Change the TextBox s `ID` property to `ProductName`.</span></span>

<span data-ttu-id="21dea-178">RequiredFieldValidator를 다음으로, 추가 `ItemTemplate` 사용자는 각 제품의 이름에 대 한 값을 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-178">Next, add a RequiredFieldValidator to the `ItemTemplate` to ensure that the user provides a value for each product s name.</span></span> <span data-ttu-id="21dea-179">설정 합니다 `ControlToValidate` productname, 속성을 `ErrorMessage` 속성에는 제품의 이름을 제공 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-179">Set the `ControlToValidate` property to ProductName, the `ErrorMessage` property to You must provide the product's name.</span></span> <span data-ttu-id="21dea-180">하며 `Text` 속성을 \*입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-180">and the `Text` property to \*.</span></span> <span data-ttu-id="21dea-181">이러한 추가 마치면는 `ItemTemplate`, 화면 그림 6 비슷하게 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-181">After making these additions to the `ItemTemplate`, your screen should look similar to Figure 6.</span></span>


<span data-ttu-id="21dea-182">[![텍스트 상자와는 RequiredFieldValidator ProductName TemplateField 이제 포함](batch-updating-cs/_static/image6.gif)](batch-updating-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="21dea-182">[![The ProductName TemplateField Now Includes a TextBox and a RequiredFieldValidator](batch-updating-cs/_static/image6.gif)](batch-updating-cs/_static/image9.png)</span></span>

<span data-ttu-id="21dea-183">**그림 6**: 합니다 `ProductName` TemplateField 이제 텍스트 상자 및 RequiredFieldValidator ([클릭 하 여 큰 이미지 보기](batch-updating-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="21dea-183">**Figure 6**: The `ProductName` TemplateField Now Includes a TextBox and a RequiredFieldValidator ([Click to view full-size image](batch-updating-cs/_static/image10.png))</span></span>


<span data-ttu-id="21dea-184">에 대 한는 `UnitPrice` 인터페이스를 편집에서 텍스트를 복사 하 여 시작 합니다 `EditItemTemplate` 에 `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="21dea-184">For the `UnitPrice` editing interface, start by copying the TextBox from the `EditItemTemplate` to the `ItemTemplate`.</span></span> <span data-ttu-id="21dea-185">다음으로, 텍스트 상자 및 집합 앞에 $를 배치할 해당 `ID` UnitPrice 속성 및 해당 `Columns` 8 속성입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-185">Next, place a $ in front of the TextBox and set its `ID` property to UnitPrice and its `Columns` property to 8 .</span></span>

<span data-ttu-id="21dea-186">CompareValidator 추가 합니다 `UnitPrice` s `ItemTemplate` 되도록 사용자가 입력 한 값 보다 크거나 같은 $0.00 유효한 통화 값입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-186">Also add a CompareValidator to the `UnitPrice` s `ItemTemplate` to ensure that the value entered by the user is a valid currency value greater than or equal to $0.00.</span></span> <span data-ttu-id="21dea-187">유효성 검사기가 설정 `ControlToValidate` 속성을 UnitPrice, 해당 `ErrorMessage` 속성에 유효한 통화 값을 입력 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-187">Set the validator s `ControlToValidate` property to UnitPrice, its `ErrorMessage` property to You must enter a valid currency value.</span></span> <span data-ttu-id="21dea-188">모든 통화 기호.를 생략 하세요 해당 `Text` 속성을 \*, 해당 `Type` 속성을 `Currency`, 해당 `Operator` 속성을 `GreaterThanEqual`, 및 해당 `ValueToCompare` 속성을 0입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-188">Please omit any currency symbols., its `Text` property to \*, its `Type` property to `Currency`, its `Operator` property to `GreaterThanEqual`, and its `ValueToCompare` property to 0 .</span></span>


<span data-ttu-id="21dea-189">[![가격 입력 되도록 CompareValidator는 음수가 아닌 통화 값 추가](batch-updating-cs/_static/image7.gif)](batch-updating-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="21dea-189">[![Add a CompareValidator to Ensure the Price Entered is a Non-Negative Currency Value](batch-updating-cs/_static/image7.gif)](batch-updating-cs/_static/image11.png)</span></span>

<span data-ttu-id="21dea-190">**그림 7**: 가격 입력 되도록 CompareValidator는 음수가 아닌 통화 값을 추가 ([큰 이미지를 보려면 클릭](batch-updating-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="21dea-190">**Figure 7**: Add a CompareValidator to Ensure the Price Entered is a Non-Negative Currency Value ([Click to view full-size image](batch-updating-cs/_static/image12.png))</span></span>


<span data-ttu-id="21dea-191">에 대 한 합니다 `Discontinued` TemplateField에 이미 정의 된 확인란을 사용할 수 있습니다는 `ItemTemplate`합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-191">For the `Discontinued` TemplateField you can use the CheckBox already defined in the `ItemTemplate`.</span></span> <span data-ttu-id="21dea-192">설정 하기만 하면 됩니다 해당 `ID` Discontinued 하 고 `Enabled` 속성을 `true`입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-192">Simply set its `ID` to Discontinued and its `Enabled` property to `true`.</span></span>

## <a name="step-3-creating-thecategorynameediting-interface"></a><span data-ttu-id="21dea-193">3 단계: 만들기는`CategoryName`인터페이스 편집</span><span class="sxs-lookup"><span data-stu-id="21dea-193">Step 3: Creating the`CategoryName`Editing Interface</span></span>

<span data-ttu-id="21dea-194">편집 인터페이스는 `CategoryName` TemplateField s `EditItemTemplate` 의 값을 표시 하는 텍스트 상자가 포함는 `CategoryName` 데이터 필드입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-194">The editing interface in the `CategoryName` TemplateField s `EditItemTemplate` contains a TextBox that displays the value of the `CategoryName` data field.</span></span> <span data-ttu-id="21dea-195">가능한 범주를 나열 하는 DropDownList 한 개로 대체 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-195">We need to replace this with a DropDownList that lists the possible categories.</span></span>

> [!NOTE]
> <span data-ttu-id="21dea-196">합니다 [데이터 수정 인터페이스 사용자 지정](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) 자습서 더 철저 하 고 전체 토론 TextBox와 달리 DropDownList를 포함 하도록 템플릿을 사용자 지정에 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-196">The [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) tutorial contains a more thorough and complete discussion on customizing a template to include a DropDownList as opposed to a TextBox.</span></span> <span data-ttu-id="21dea-197">여기에 나오는 단계를 완료 하는 동안 상품 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-197">While the steps here are complete, they are presented tersely.</span></span> <span data-ttu-id="21dea-198">에 대 한 더 상세한 만들기 및 구성 범주 DropDownList를 다시 참조를 [데이터 수정 인터페이스 사용자 지정](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) 자습서입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-198">For a more in-depth look at creating and configuring the categories DropDownList, refer back to the [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) tutorial.</span></span>


<span data-ttu-id="21dea-199">DropDownList를 도구 상자에서 끌어 합니다 `CategoryName` TemplateField s `ItemTemplate`설정, 해당 `ID` 에 `Categories`입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-199">Drag a DropDownList from the Toolbox onto the `CategoryName` TemplateField s `ItemTemplate`, setting its `ID` to `Categories`.</span></span> <span data-ttu-id="21dea-200">이 시점에서 우리는 일반적으로 Dropdownlist의 데이터 원본을 정의할 해당 스마트 태그를 통해 새 ObjectDataSource 만들기.</span><span class="sxs-lookup"><span data-stu-id="21dea-200">At this point we would usually define the DropDownLists s data source through its smart tag, creating a new ObjectDataSource.</span></span> <span data-ttu-id="21dea-201">그러나 내 ObjectDataSource 추가이 `ItemTemplate`, 각 GridView 행에 대해 만든 ObjectDataSource 인스턴스 결과 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-201">However, this will add the ObjectDataSource within the `ItemTemplate`, which will result in an ObjectDataSource instance created for each GridView row.</span></span> <span data-ttu-id="21dea-202">대신 만든을 GridView의 TemplateFields 외부 ObjectDataSource 사용 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-202">Instead, let s create the ObjectDataSource outside of the GridView s TemplateFields.</span></span> <span data-ttu-id="21dea-203">아래에 디자이너 도구 상자에서 ObjectDataSource를 끌어서 템플릿 편집을 종료 합니다 `ProductsDataSource` ObjectDataSource 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-203">End the template editing and drag an ObjectDataSource from the Toolbox onto the Designer beneath the `ProductsDataSource` ObjectDataSource.</span></span> <span data-ttu-id="21dea-204">이름을 새 ObjectDataSource `CategoriesDataSource` 사용 하도록 구성 하는 `CategoriesBLL` s 클래스 `GetCategories` 메서드.</span><span class="sxs-lookup"><span data-stu-id="21dea-204">Name the new ObjectDataSource `CategoriesDataSource` and configure it to use the `CategoriesBLL` class s `GetCategories` method.</span></span>


<span data-ttu-id="21dea-205">[![ObjectDataSource CategoriesBLL Clas를 사용 하도록 구성](batch-updating-cs/_static/image8.gif)](batch-updating-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="21dea-205">[![Configure the ObjectDataSource to Use the CategoriesBLL Clas](batch-updating-cs/_static/image8.gif)](batch-updating-cs/_static/image13.png)</span></span>

<span data-ttu-id="21dea-206">**그림 8**: ObjectDataSource 사용 하도록 구성 된 `CategoriesBLL` Clas ([클릭 하 여 큰 이미지 보기](batch-updating-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="21dea-206">**Figure 8**: Configure the ObjectDataSource to Use the `CategoriesBLL` Clas ([Click to view full-size image](batch-updating-cs/_static/image14.png))</span></span>


<span data-ttu-id="21dea-207">[![GetCategories 메서드를 사용 하 여 범주 데이터를 검색 합니다.](batch-updating-cs/_static/image9.gif)](batch-updating-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="21dea-207">[![Retrieve the Category Data Using the GetCategories Method](batch-updating-cs/_static/image9.gif)](batch-updating-cs/_static/image15.png)</span></span>

<span data-ttu-id="21dea-208">**그림 9**: 사용 하 여 범주 데이터를 검색 합니다 `GetCategories` 메서드 ([클릭 하 여 큰 이미지 보기](batch-updating-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="21dea-208">**Figure 9**: Retrieve the Category Data Using the `GetCategories` Method ([Click to view full-size image](batch-updating-cs/_static/image16.png))</span></span>


<span data-ttu-id="21dea-209">이 ObjectDataSource를 사용 하 여 데이터를 검색 하는 단순히, 드롭 다운 목록에서 UPDATE 및 DELETE 탭 (없음)을 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-209">Since this ObjectDataSource is used merely to retrieve data, set the drop-down lists in the UPDATE and DELETE tabs to (None).</span></span> <span data-ttu-id="21dea-210">마법사를 완료 하려면 마침을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-210">Click Finish to complete the wizard.</span></span>


<span data-ttu-id="21dea-211">[![집합에 UPDATE 및 DELETE 탭 (없음)을 드롭다운 목록](batch-updating-cs/_static/image10.gif)](batch-updating-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="21dea-211">[![Set the Drop-Down Lists in the UPDATE and DELETE Tabs to (None)](batch-updating-cs/_static/image10.gif)](batch-updating-cs/_static/image17.png)</span></span>

<span data-ttu-id="21dea-212">**그림 10**: (없음)로 업데이트 및 삭제 하는 탭의 드롭다운 목록을 설정 ([큰 이미지를 보려면 클릭](batch-updating-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="21dea-212">**Figure 10**: Set the Drop-Down Lists in the UPDATE and DELETE Tabs to (None) ([Click to view full-size image](batch-updating-cs/_static/image18.png))</span></span>


<span data-ttu-id="21dea-213">마법사를 완료 한 후의 `CategoriesDataSource` s 선언적 태그는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-213">After completing the wizard, the `CategoriesDataSource` s declarative markup should look like the following:</span></span>


[!code-aspx[Main](batch-updating-cs/samples/sample2.aspx)]

<span data-ttu-id="21dea-214">사용 하 여 합니다 `CategoriesDataSource` 를 만들고 구성한 돌아갑니다 합니다 `CategoryName` TemplateField의 `ItemTemplate` DropDownList s 스마트 태그에서 데이터 원본 선택 링크를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-214">With the `CategoriesDataSource` created and configured, return to the `CategoryName` TemplateField s `ItemTemplate` and, from the DropDownList s smart tag, click on the Choose Data Source link.</span></span> <span data-ttu-id="21dea-215">데이터 소스 구성 마법사에서 선택 합니다 `CategoriesDataSource` 첫 번째 드롭다운 목록에서 옵션을 선택할 `CategoryName` 표시에 사용 하 고 `CategoryID` 값으로.</span><span class="sxs-lookup"><span data-stu-id="21dea-215">In the Data Source Configuration wizard, select the `CategoriesDataSource` option from the first drop-down list and choose to have `CategoryName` used for the display and `CategoryID` as the value.</span></span>


<span data-ttu-id="21dea-216">[![DropDownList를 CategoriesDataSource에 바인딩](batch-updating-cs/_static/image11.gif)](batch-updating-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="21dea-216">[![Bind the DropDownList to the CategoriesDataSource](batch-updating-cs/_static/image11.gif)](batch-updating-cs/_static/image19.png)</span></span>

<span data-ttu-id="21dea-217">**그림 11**: DropDownList를 바인딩하는 `CategoriesDataSource` ([클릭 하 여 큰 이미지 보기](batch-updating-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="21dea-217">**Figure 11**: Bind the DropDownList to the `CategoriesDataSource` ([Click to view full-size image](batch-updating-cs/_static/image20.png))</span></span>


<span data-ttu-id="21dea-218">이 시점에서 `Categories` DropDownList 모든 범주가 나열 되지만 선택 되지 않습니다 아직 자동으로 GridView 행에 바인딩된 제품에 대 한 적절 한 범주입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-218">At this point the `Categories` DropDownList lists all of the categories, but it does not yet automatically select the appropriate category for the product bound to the GridView row.</span></span> <span data-ttu-id="21dea-219">로 설정 해야이 작업을 수행 하는 `Categories` DropDownList s `SelectedValue` s 제품 `CategoryID` 값입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-219">To accomplish this we need to set the `Categories` DropDownList s `SelectedValue` to the product s `CategoryID` value.</span></span> <span data-ttu-id="21dea-220">DropDownList s 스마트 태그에서 데이터 바인딩 편집 링크를 클릭 하 고 연결 합니다 `SelectedValue` 속성과 `CategoryID` 그림 12에 나와 있는 것 처럼 데이터 필드입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-220">Click on the Edit DataBindings link from the DropDownList s smart tag and associate the `SelectedValue` property with the `CategoryID` data field as shown in Figure 12.</span></span>


![제품의 CategoryID DropDownList의 SelectedValue 속성에 바인딩](batch-updating-cs/_static/image12.gif)

<span data-ttu-id="21dea-222">**그림 12**: 제품 s 바인딩할 `CategoryID` DropDownList의 값 `SelectedValue` 속성</span><span class="sxs-lookup"><span data-stu-id="21dea-222">**Figure 12**: Bind the Product s `CategoryID` Value to the DropDownList s `SelectedValue` Property</span></span>


<span data-ttu-id="21dea-223">한 마지막 문제 유지: 제품 만들어지고 t를 사용 하는 경우는 `CategoryID` 값에 지정 된 다음 데이터 바인딩 문을 `SelectedValue` 예외가 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-223">One last problem remains: if the product doesn t have a `CategoryID` value specified then the databinding statement on `SelectedValue` will result in an exception.</span></span> <span data-ttu-id="21dea-224">DropDownList 범주에 대 한 항목만 포함 하 고 해당 제품에 대 한 옵션을 제공 하지 않습니다 있기 때문에 `NULL` 데이터베이스에 대 한 값 `CategoryID`합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-224">This is because the DropDownList contains only items for the categories and does not offer an option for those products that have a `NULL` database value for `CategoryID`.</span></span> <span data-ttu-id="21dea-225">이 문제를 해결 하려면 DropDownList s를 설정 `AppendDataBoundItems` 속성을 `true` 드롭다운 목록에서 새 항목을 추가 하 고 생략는 `Value` 선언적 구문에서 속성입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-225">To remedy this, set the DropDownList s `AppendDataBoundItems` property to `true` and add a new item to the DropDownList, omitting the `Value` property from the declarative syntax.</span></span> <span data-ttu-id="21dea-226">즉, 있는지는 `Categories` DropDownList s 선언적 구문은 다음과 같습니다:</span><span class="sxs-lookup"><span data-stu-id="21dea-226">That is, make sure that the `Categories` DropDownList s declarative syntax looks like the following:</span></span>


[!code-aspx[Main](batch-updating-cs/samples/sample3.aspx)]

<span data-ttu-id="21dea-227">참고 하는 방법을 `<asp:ListItem Value="">` -하나 선택-가 해당 `Value` 특성이 명시적으로 빈 문자열로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-227">Note how the `<asp:ListItem Value="">` -- Select One -- has its `Value` attribute explicitly set to an empty string.</span></span> <span data-ttu-id="21dea-228">다시 참조를 [데이터 수정 인터페이스 사용자 지정](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) 이 추가 DropDownList 항목 처리에 필요한 이유는 대 한 더 상세히 논의 자습서 합니다 `NULL` 사례 이유와 할당은 `Value` 속성을 빈 문자열로 반드시 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-228">Refer back to the [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) tutorial for a more thorough discussion on why this additional DropDownList item is needed to handle the `NULL` case and why assignment of the `Value` property to an empty string is essential.</span></span>

> [!NOTE]
> <span data-ttu-id="21dea-229">잠재적인 성능 및 확장성 문제를 여기서 유의 해야 하는 경우</span><span class="sxs-lookup"><span data-stu-id="21dea-229">There is a potential performance and scalability issue here that is worth mentioning.</span></span> <span data-ttu-id="21dea-230">각 행에는 DropDownList를 `CategoriesDataSource` 해당 데이터 원본으로는 `CategoriesBLL` s 클래스 `GetCategories` 메서드가 호출 될 *n* 페이지 마다 한 번 방문 위치 *n* 입니다 GridView의 행 수입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-230">Since each row has a DropDownList that uses the `CategoriesDataSource` as its data source, the `CategoriesBLL` class s `GetCategories` method will be called *n* times per page visit, where *n* is the number of rows in the GridView.</span></span> <span data-ttu-id="21dea-231">이러한 *n* 호출 `GetCategories` 될 *n* 데이터베이스에 쿼리 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-231">These *n* calls to `GetCategories` result in *n* queries to the database.</span></span> <span data-ttu-id="21dea-232">이 미치는 데이터베이스 요청 캐시 또는 종속성 또는 매우 짧은 시간 기반 만료 캐싱을 SQL을 사용 하 여 캐싱 계층을 통해 반환 된 범주를 캐시 하 여 떨어질 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-232">This impact on the database could be lessened by caching the returned categories either in a per-request cache or through the Caching Layer using a SQL caching dependency or a very short time-based expiry.</span></span> <span data-ttu-id="21dea-233">캐싱 옵션에 당 요청에 대 한 자세한 내용은 참조 [ `HttpContext.Items` 당 요청 캐시 저장소](http://aspnet.4guysfromrolla.com/articles/060904-1.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-233">For more information on the per-request caching option, see [`HttpContext.Items` a Per-Request Cache Store](http://aspnet.4guysfromrolla.com/articles/060904-1.aspx).</span></span>


## <a name="step-4-completing-the-editing-interface"></a><span data-ttu-id="21dea-234">4 단계: 완료 편집 인터페이스</span><span class="sxs-lookup"><span data-stu-id="21dea-234">Step 4: Completing the Editing Interface</span></span>

<span data-ttu-id="21dea-235">에서는 ve 진행 상황을 보려면 일시 중지 하지 않고 GridView가 템플릿에 변경 횟수를 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-235">We ve made a number of changes to the GridView s templates without pausing to view our progress.</span></span> <span data-ttu-id="21dea-236">시간을 내어 브라우저를 통해 진행 상황을 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-236">Take a moment to view our progress through a browser.</span></span> <span data-ttu-id="21dea-237">사용 하 여 각 행은 렌더링 그림 13에서 볼 수 있듯이 해당 `ItemTemplate`, 인터페이스 편집 셀 s를 포함 하는 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-237">As Figure 13 shows, each row is rendered using its `ItemTemplate`, which contains the cell s editing interface.</span></span>


<span data-ttu-id="21dea-238">[![각 GridView 행은 편집 가능](batch-updating-cs/_static/image13.gif)](batch-updating-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="21dea-238">[![Each GridView Row is Editable](batch-updating-cs/_static/image13.gif)](batch-updating-cs/_static/image21.png)</span></span>

<span data-ttu-id="21dea-239">**그림 13**: 각 GridView 행은 편집 가능 ([큰 이미지를 보려면 클릭](batch-updating-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="21dea-239">**Figure 13**: Each GridView Row is Editable ([Click to view full-size image](batch-updating-cs/_static/image22.png))</span></span>


<span data-ttu-id="21dea-240">관리 하는 것은 시점에서 몇 가지 사소한 서식 문제가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-240">There are a few minor formatting issues that we should take care of at this point.</span></span> <span data-ttu-id="21dea-241">이때 먼저는 `UnitPrice` 값 네 개의 소수 자릿수가 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-241">First, note that the `UnitPrice` value contains four decimal points.</span></span> <span data-ttu-id="21dea-242">이 문제를 해결 하려면 돌아갑니다 합니다 `UnitPrice` TemplateField의 `ItemTemplate` TextBox가 스마트 태그에서 데이터 바인딩 편집 링크를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-242">To fix this, return to the `UnitPrice` TemplateField s `ItemTemplate` and, from the TextBox s smart tag, click on the Edit DataBindings link.</span></span> <span data-ttu-id="21dea-243">다음으로, 지정 된 `Text` 숫자로 속성의 서식을 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-243">Next, specify that the `Text` property should be formatted as a number.</span></span>


![숫자로 Text 속성 형식](batch-updating-cs/_static/image14.gif)

<span data-ttu-id="21dea-245">**그림 14**: 형식은 `Text` 숫자로 속성</span><span class="sxs-lookup"><span data-stu-id="21dea-245">**Figure 14**: Format the `Text` Property as a Number</span></span>


<span data-ttu-id="21dea-246">둘째, let s center에서 확인란을 `Discontinued` 열 대신 왼쪽 맞춤 하 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-246">Second, let s center the checkbox in the `Discontinued` column (rather than having it left-aligned).</span></span> <span data-ttu-id="21dea-247">GridView가 스마트 태그에서 열 편집을 클릭 하 고 선택 된 `Discontinued` TemplateField 왼쪽된 아래 모퉁이의 필드 목록에서.</span><span class="sxs-lookup"><span data-stu-id="21dea-247">Click on Edit Columns from the GridView s smart tag and select the `Discontinued` TemplateField from the list of fields in the bottom left corner.</span></span> <span data-ttu-id="21dea-248">드릴 다운 `ItemStyle` 설정의 `HorizontalAlign` 그림 15 에서처럼 센터로 속성입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-248">Drill down into `ItemStyle` and set the `HorizontalAlign` property to Center as shown in Figure 15.</span></span>


![Center는 지원 되지 않는 확인란](batch-updating-cs/_static/image15.gif)

<span data-ttu-id="21dea-250">**그림 15**: Center는 `Discontinued` 확인란</span><span class="sxs-lookup"><span data-stu-id="21dea-250">**Figure 15**: Center the `Discontinued` CheckBox</span></span>


<span data-ttu-id="21dea-251">그런 다음 페이지로 ValidationSummary 컨트롤을 추가 하 고 설정 해당 `ShowMessageBox` 속성을 `true` 및 해당 `ShowSummary` 속성을 `false`입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-251">Next, add a ValidationSummary control to the page and set its `ShowMessageBox` property to `true` and its `ShowSummary` property to `false`.</span></span> <span data-ttu-id="21dea-252">또한 단추 웹 컨트롤을 클릭할 때를 추가, 변경 하는 사용자가 업데이트 됩니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-252">Also add the Button Web controls that, when clicked, will update the user s changes.</span></span> <span data-ttu-id="21dea-253">특히, 두 개의 단추 웹 컨트롤을 GridView 위와 및 한 수준 아래에 두 컨트롤 모두 설정 추가 `Text` 속성 업데이트 제품을 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-253">Specifically, add two Button Web controls, one above the GridView and one below it, setting both controls `Text` properties to Update Products .</span></span>

<span data-ttu-id="21dea-254">GridView가 이후 해당 TemplateFields에 정의 된 인터페이스를 편집 `ItemTemplate` s를 `EditItemTemplate` s 불필요 한 되어 삭제 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-254">Since the GridView s editing interface is defined in its TemplateFields `ItemTemplate` s, the `EditItemTemplate` s are superfluous and may be deleted.</span></span>

<span data-ttu-id="21dea-255">위의 만드는 서식 변경 사항을 언급 했 듯이, 후 단추 컨트롤을 추가 하 고 불필요 한 제거 `EditItemTemplate` s, 페이지 s 선언적 구문에는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-255">After making the above mentioned formatting changes, adding the Button controls, and removing the unnecessary `EditItemTemplate` s, your page s declarative syntax should look like the following:</span></span>


[!code-aspx[Main](batch-updating-cs/samples/sample4.aspx)]

<span data-ttu-id="21dea-256">그림 16에서는 단추 웹 컨트롤을 추가한 후 브라우저를 통해 볼 때이 페이지 및 서식 지정 변경 내용을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-256">Figure 16 shows this page when viewed through a browser after the Button Web controls have been added and the formatting changes made.</span></span>


<span data-ttu-id="21dea-257">[![이제 페이지에는 두 업데이트 제품 단추가 포함 되어 있습니다.](batch-updating-cs/_static/image16.gif)](batch-updating-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="21dea-257">[![The Page Now Includes Two Update Products Buttons](batch-updating-cs/_static/image16.gif)](batch-updating-cs/_static/image23.png)</span></span>

<span data-ttu-id="21dea-258">**그림 16**: The 페이지 이제 포함 두 업데이트 제품 단추 ([큰 이미지를 보려면 클릭](batch-updating-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="21dea-258">**Figure 16**: The Page Now Includes Two Update Products Buttons ([Click to view full-size image](batch-updating-cs/_static/image24.png))</span></span>


## <a name="step-5-updating-the-products"></a><span data-ttu-id="21dea-259">5 단계: 업데이트 제품</span><span class="sxs-lookup"><span data-stu-id="21dea-259">Step 5: Updating the Products</span></span>

<span data-ttu-id="21dea-260">사용자가이 페이지를 방문 하는 경우 이러한 수정 내용이 두 개의 업데이트 제품 단추 중 하나를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-260">When a user visits this page they will make their modifications and then click one of the two Update Products buttons.</span></span> <span data-ttu-id="21dea-261">어떤 이유로 든 각 행에 대 한 사용자가 입력 한 값을 저장 하려고 하는 시점을 `ProductsDataTable` 인스턴스 및 다음 전달한 됩니다 하는 BLL 메서드에 전달할 `ProductsDataTable` DAL의 인스턴스 `UpdateWithTransaction` 메서드.</span><span class="sxs-lookup"><span data-stu-id="21dea-261">At that point we need to somehow save the user-entered values for each row into a `ProductsDataTable` instance and then pass that to a BLL method that will then pass that `ProductsDataTable` instance to the DAL s `UpdateWithTransaction` method.</span></span> <span data-ttu-id="21dea-262">합니다 `UpdateWithTransaction` 에서 만든 메서드를 [이전 자습서](wrapping-database-modifications-within-a-transaction-cs.md), 되도록 변경 내용의 일괄 처리는 원자성 작업으로 업데이트 됩니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-262">The `UpdateWithTransaction` method, which we created in the [preceding tutorial](wrapping-database-modifications-within-a-transaction-cs.md), ensures that the batch of changes will be updated as an atomic operation.</span></span>

<span data-ttu-id="21dea-263">라는 메서드를 만듭니다 `BatchUpdate` 에서 `BatchUpdate.aspx.cs` 다음 코드를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-263">Create a method named `BatchUpdate` in `BatchUpdate.aspx.cs` and add the following code:</span></span>


[!code-csharp[Main](batch-updating-cs/samples/sample5.cs)]

<span data-ttu-id="21dea-264">이 메서드가 모든 제품으로 시작에 `ProductsDataTable` BLL s에 대 한 호출을 통해 `GetProducts` 메서드.</span><span class="sxs-lookup"><span data-stu-id="21dea-264">This method starts out by getting all of the products back in a `ProductsDataTable` via a call to the BLL s `GetProducts` method.</span></span> <span data-ttu-id="21dea-265">그런 다음 열거 하는 `ProductGrid` GridView s [ `Rows` 컬렉션](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rows(VS.80).aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-265">It then enumerates the `ProductGrid` GridView s [`Rows` collection](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rows(VS.80).aspx).</span></span> <span data-ttu-id="21dea-266">`Rows` 컬렉션에는 [ `GridViewRow` 인스턴스](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridviewrow.aspx) GridView에 표시 되는 각 행에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-266">The `Rows` collection contains a [`GridViewRow` instance](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridviewrow.aspx) for each row displayed in the GridView.</span></span> <span data-ttu-id="21dea-267">각 페이지에 GridView가 최대 10 개의 행을 표시 하는 것 이므로 `Rows` 컬렉션 10 개 이하의 항목이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-267">Since we are showing at most ten rows per page, the GridView s `Rows` collection will have no more than ten items.</span></span>

<span data-ttu-id="21dea-268">각 행에 대 한는 `ProductID` 에서 놓은는 `DataKeys` 컬렉션 및 적절 한 `ProductsRow` 에서 선택 된를 `ProductsDataTable`합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-268">For each row the `ProductID` is grabbed from the `DataKeys` collection and the appropriate `ProductsRow` is selected from the `ProductsDataTable`.</span></span> <span data-ttu-id="21dea-269">네 가지 TemplateField 입력된 컨트롤을 참조 하는 프로그래밍 방식으로 및 해당 값에 할당 합니다 `ProductsRow` 속성 인스턴스.</span><span class="sxs-lookup"><span data-stu-id="21dea-269">The four TemplateField input controls are programmatically referenced and their values assigned to the `ProductsRow` instance s properties.</span></span> <span data-ttu-id="21dea-270">각 GridView 후 s 행에 값 사용 되어 업데이트를 `ProductsDataTable`, 해당 s BLL s에 전달 `UpdateWithTransaction` 메서드를 호출 하는, 이전 자습서에서 살펴본 것 처럼 간단히 DAL s에 `UpdateWithTransaction` 메서드.</span><span class="sxs-lookup"><span data-stu-id="21dea-270">After each GridView row s values have been used to update the `ProductsDataTable`, it s passed to the BLL s `UpdateWithTransaction` method which, as we saw in the preceding tutorial, simply calls down into the DAL s `UpdateWithTransaction` method.</span></span>

<span data-ttu-id="21dea-271">이 자습서에 사용 된 일괄 처리 업데이트 알고리즘에서 각 행을 업데이트 합니다 `ProductsDataTable`의 제품 정보가 변경 되었는지 여부에 관계 없이 GridView의 행에 해당 하는 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-271">The batch update algorithm used for this tutorial updates each row in the `ProductsDataTable` that corresponds to a row in the GridView, regardless of whether the product s information has been changed.</span></span> <span data-ttu-id="21dea-272">이러한 과제를 안겨 유효 하지 t 일반적으로 성능 문제를 업데이트 하는 동안 데이터베이스 테이블에 변경 내용을 다시 감사 하는 경우 불필요 한 레코드를 발생할 수 있습니다 이러한 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-272">While such blind updates aren t usually a performance issue, they can lead to superfluous records if you re auditing changes to the database table.</span></span> <span data-ttu-id="21dea-273">다시 합니다 [일괄 처리 업데이트 수행](../editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs.md) 자습서 DataList를 사용 하 여 인터페이스를 업데이트 하는 일괄 처리를 탐색 하 고만 실제로 사용자가 수정 된 레코드만 업데이트 하는 코드를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-273">Back in the [Performing Batch Updates](../editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs.md) tutorial we explored a batch updating interface with the DataList and added code that would only update those records that were actually modified by the user.</span></span> <span data-ttu-id="21dea-274">기술을 사용 하 여 자유롭게 [일괄 처리 업데이트 수행](../editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs.md) 원하는 경우이 자습서에서는 코드를 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-274">Feel free to use the techniques from [Performing Batch Updates](../editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs.md) to update the code in this tutorial, if desired.</span></span>

> [!NOTE]
> <span data-ttu-id="21dea-275">Visual Studio GridView s에 기본 키 값의 원본 데이터를 자동으로 할당 스마트 태그를 통해 GridView에 데이터 원본을 바인딩할 경우 `DataKeyNames` 속성입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-275">When binding the data source to the GridView through its smart tag, Visual Studio automatically assigns the data source s primary key value(s) to the GridView s `DataKeyNames` property.</span></span> <span data-ttu-id="21dea-276">바인딩하지 않았습니다 ObjectDataSource GridView가 스마트 태그를 통해 GridView에 1 단계에에서 설명 된 대로 경우 GridView가 수동으로 설정 해야 합니다 `DataKeyNames` 속성에 액세스 하기 위해 ProductID는 `ProductID` 통해 각 행에 대 한 값을 `DataKeys` 컬렉션입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-276">If you did not bind the ObjectDataSource to the GridView through the GridView s smart tag as outlined in Step 1, then you will need to manually set the GridView s `DataKeyNames` property to ProductID in order to access the `ProductID` value for each row through the `DataKeys` collection.</span></span>


<span data-ttu-id="21dea-277">사용 된 코드 `BatchUpdate` BLL에서 사용 되는 것과 비슷합니다 `UpdateProduct` 메서드, 주요 차이점에는 합니다 `UpdateProduct` 메서드 하나만 `ProductRow` 아키텍처에서 인스턴스를 검색 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-277">The code used in `BatchUpdate` is similar to that used in the BLL s `UpdateProduct` methods, the main difference being that in the `UpdateProduct` methods only a single `ProductRow` instance is retrieved from the architecture.</span></span> <span data-ttu-id="21dea-278">속성을 할당 하는 코드를 `ProductRow` 간에 동일 합니다 `UpdateProducts` 메서드 및 코드를 `foreach` 루프 `BatchUpdate`전체 패턴에는 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-278">The code that assigns the properties of the `ProductRow` is the same between the `UpdateProducts` methods and the code within the `foreach` loop in `BatchUpdate`, as is the overall pattern.</span></span>

<span data-ttu-id="21dea-279">이 자습서를 완료 하려면 할 필요는 `BatchUpdate` 메서드를 호출 하는 경우 업데이트 제품 단추 중 하나를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-279">To complete this tutorial, we need to have the `BatchUpdate` method invoked when either of the Update Products buttons is clicked.</span></span> <span data-ttu-id="21dea-280">에 대 한 이벤트 처리기 만들기는 `Click` 이러한 두 이벤트 단추 컨트롤 및 이벤트 처리기에 다음 코드를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-280">Create event handlers for the `Click` events of these two Button controls and add the following code in the event handlers:</span></span>


[!code-csharp[Main](batch-updating-cs/samples/sample6.cs)]

<span data-ttu-id="21dea-281">호출 하려고 먼저 `BatchUpdate`합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-281">First a call is made to `BatchUpdate`.</span></span> <span data-ttu-id="21dea-282">다음으로 `ClientScript property` 제품 업데이트 되었습니다. 읽는 messagebox를 표시 하는 JavaScript를 삽입 하는 데 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-282">Next, the `ClientScript property` is used to inject JavaScript that will display a messagebox that reads The products have been updated.</span></span>

<span data-ttu-id="21dea-283">이 코드를 테스트해 1 분이 걸립니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-283">Take a minute to test out this code.</span></span> <span data-ttu-id="21dea-284">방문 `BatchUpdate.aspx` 브라우저를 통해 많은 행을 편집 하 고 업데이트 제품 단추 중 하나를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-284">Visit `BatchUpdate.aspx` through a browser, edit a number of rows, and click one of the Update Products buttons.</span></span> <span data-ttu-id="21dea-285">입력된 유효성 검사 오류가 없는 경우 제품 업데이트 되었습니다. 읽는 messagebox를 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-285">Assuming there are no input validation errors, you should see a messagebox that reads The products have been updated.</span></span> <span data-ttu-id="21dea-286">원자성 업데이트를 확인 하려면 추가할 임의 `CHECK` 제약 조건을 허용 하지 않는 것 처럼 `UnitPrice` 1234.56의 값입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-286">To verify the atomicity of the update, consider adding a random `CHECK` constraint, like one that disallows `UnitPrice` values of 1234.56.</span></span> <span data-ttu-id="21dea-287">다음 `BatchUpdate.aspx`, s 제품 중 하나를 설정할 수 있도록 레코드 수가 편집 `UnitPrice` 금지 된 값 (1234.56) 값입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-287">Then from `BatchUpdate.aspx`, edit a number of records, making sure to set one of the product s `UnitPrice` value to the forbidden value ( 1234.56 ).</span></span> <span data-ttu-id="21dea-288">이 원래 값으로 롤백할 해당 일괄 처리 작업 중 다른 변경 내용으로 업데이트 제품을 클릭 하는 경우 오류가 발생 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-288">This should result in an error when clicking Update Products with the other changes during that batch operation rolled back to their original values.</span></span>

## <a name="an-alternativebatchupdatemethod"></a><span data-ttu-id="21dea-289">대 안으로`BatchUpdate`메서드</span><span class="sxs-lookup"><span data-stu-id="21dea-289">An Alternative`BatchUpdate`Method</span></span>

<span data-ttu-id="21dea-290">`BatchUpdate` 방금 메서드 검사 검색 *모든* BLL s에서 제품 `GetProducts` 메서드 다음 GridView에 표시 되는 해당 레코드를 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-290">The `BatchUpdate` method we just examined retrieves *all* of the products from the BLL s `GetProducts` method and then updates just those records that appear in the GridView.</span></span> <span data-ttu-id="21dea-291">이 방법은 GridView 페이징, 사용 하지 않지만 경우 있을 수백, 수천 또는 수만 개의 제품을 GridView에 10 번만 행의 경우에 적합 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-291">This approach is ideal if the GridView does not use paging, but if it does, there may be hundreds, thousands, or tens of thousands of products, but only ten rows in the GridView.</span></span> <span data-ttu-id="21dea-292">이러한 경우에만 수정할 데이터베이스를 그 중 10 개에서 시작 하는 모든 제품은 그다지 적합 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-292">In such a case, getting all of the products from the database only to modify 10 of them is less than ideal.</span></span>

<span data-ttu-id="21dea-293">이러한 유형의 경우 다음을 사용 하는 것이 좋습니다 `BatchUpdateAlternate` 메서드 대신:</span><span class="sxs-lookup"><span data-stu-id="21dea-293">For those types of situations, consider using the following `BatchUpdateAlternate` method instead:</span></span>


[!code-csharp[Main](batch-updating-cs/samples/sample7.cs)]

<span data-ttu-id="21dea-294">`BatchMethodAlternate` 비어 있는 새를 만들어 시작 `ProductsDataTable` 라는 `products`합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-294">`BatchMethodAlternate` starts by creating a new empty `ProductsDataTable` named `products`.</span></span> <span data-ttu-id="21dea-295">그런 다음 GridView의 단계별로 `Rows` 컬렉션 및 BLL s를 사용 하 여 특정 제품 정보를 가져옵니다 하는 각 행에 대 한 `GetProductByProductID(productID)` 메서드.</span><span class="sxs-lookup"><span data-stu-id="21dea-295">It then steps through the GridView s `Rows` collection and for each row gets the particular product information using the BLL s `GetProductByProductID(productID)` method.</span></span> <span data-ttu-id="21dea-296">검색 `ProductsRow` 인스턴스에 해당 속성을 동일한 방식으로 업데이트 `BatchUpdate`, 뒤에 가져온 행을 업데이트 합니다 `products``ProductsDataTable` DataTable s를 통해 [ `ImportRow(DataRow)` 메서드](https://msdn.microsoft.com/library/system.data.datatable.importrow(VS.80).aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-296">The retrieved `ProductsRow` instance has its properties updated in the same fashion as `BatchUpdate`, but after updating the row it is imported into the `products``ProductsDataTable` via the DataTable s [`ImportRow(DataRow)` method](https://msdn.microsoft.com/library/system.data.datatable.importrow(VS.80).aspx).</span></span>

<span data-ttu-id="21dea-297">후 합니다 `foreach` 루프가 완료 되 면 `products` 하나가 포함 되어 있습니다 `ProductsRow` GridView의 각 행에 대 한 인스턴스.</span><span class="sxs-lookup"><span data-stu-id="21dea-297">After the `foreach` loop completes, `products` contains one `ProductsRow` instance for each row in the GridView.</span></span> <span data-ttu-id="21dea-298">이후 각를 `ProductsRow` 에 추가 된 인스턴스를 `products` (대신 업데이트) 맹목적으로 전달 되도록 하는 경우를 `UpdateWithTransaction` 메서드를 `ProductsTableAdatper` 레코드의 각 데이터베이스에 삽입 하려고 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-298">Since each of the `ProductsRow` instances have been added to the `products` (instead of updated), if we blindly pass it to the `UpdateWithTransaction` method the `ProductsTableAdatper` will try to insert each of the records into the database.</span></span> <span data-ttu-id="21dea-299">대신, 각이 행의 수정 되었다는 사실을 (추가 됨)을 지정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-299">Instead, we need to specify that each of these rows has been modified (not added).</span></span>

<span data-ttu-id="21dea-300">명명 된 BLL에 새 메서드를 추가 하 여 수행할 수 있습니다이 `UpdateProductsWithTransaction`합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-300">This can be accomplished by adding a new method to the BLL named `UpdateProductsWithTransaction`.</span></span> <span data-ttu-id="21dea-301">`UpdateProductsWithTransaction`아래와 같이 설정 합니다 `RowState` 각를 `ProductsRow` 인스턴스를 `ProductsDataTable` 에 `Modified` 다음 전달를 `ProductsDataTable` DAL s에 `UpdateWithTransaction` 메서드.</span><span class="sxs-lookup"><span data-stu-id="21dea-301">`UpdateProductsWithTransaction`, shown below, sets the `RowState` of each of the `ProductsRow` instances in the `ProductsDataTable` to `Modified` and then passes the `ProductsDataTable` to the DAL s `UpdateWithTransaction` method.</span></span>


[!code-csharp[Main](batch-updating-cs/samples/sample8.cs)]

## <a name="summary"></a><span data-ttu-id="21dea-302">요약</span><span class="sxs-lookup"><span data-stu-id="21dea-302">Summary</span></span>

<span data-ttu-id="21dea-303">GridView 행 마다 기본 편집 기능을 제공 하지만 완벽 하 게 편집할 수 있는 인터페이스를 만들기 위한 지원 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-303">The GridView provides built-in per-row editing capabilities, but lacks support for creating fully editable interfaces.</span></span> <span data-ttu-id="21dea-304">이 자습서에서 살펴본 것 처럼 이러한 인터페이스 가능 하지만, 약간의 작업이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-304">As we saw in this tutorial, such interfaces are possible, but require a bit of work.</span></span> <span data-ttu-id="21dea-305">모든 행은 편집할 수는 GridView를 만들려면 TemplateFields GridView의 필드를 변환 하 여 내 편집 인터페이스를 정의 해야 합니다 `ItemTemplate` s입니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-305">To create a GridView where every row is editable, we need to convert the GridView s fields into TemplateFields and define the editing interface within the `ItemTemplate` s.</span></span> <span data-ttu-id="21dea-306">또한 업데이트 All-단추 웹 컨트롤 형식 GridView에서 별도 페이지에 추가 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-306">Additionally, Update All -type Button Web controls must be added to the page, separate from the GridView.</span></span> <span data-ttu-id="21dea-307">이러한 단추 `Click` GridView가 열거 해야 하는 이벤트 처리기 `Rows` 컬렉션에서 변경 내용을 저장을 `ProductsDataTable`, 업데이트 된 정보는 해당 BLL 메서드에 전달 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-307">These Buttons `Click` event handlers need to enumerate the GridView s `Rows` collection, store the changes in a `ProductsDataTable`, and pass the updated information into the appropriate BLL method.</span></span>

<span data-ttu-id="21dea-308">다음 자습서에서 일괄 처리를 삭제 하기 위한 인터페이스를 만드는 방법에 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-308">In the next tutorial we'll see how to create an interface for batch deleting.</span></span> <span data-ttu-id="21dea-309">각 GridView 행 되는 확인란을 포함 하 고 대신 모든를 업데이트 하는 특히-단추 입력 단추 선택한 행을 삭제 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-309">In particular, each GridView row will include a checkbox and instead of Update All -type buttons, we'll have Delete Selected Rows buttons.</span></span>

<span data-ttu-id="21dea-310">즐거운 프로그래밍!</span><span class="sxs-lookup"><span data-stu-id="21dea-310">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="21dea-311">저자 소개</span><span class="sxs-lookup"><span data-stu-id="21dea-311">About the Author</span></span>

<span data-ttu-id="21dea-312">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), 7 ASP/ASP.NET 서적의 저자 이자 설립자입니다 [4GuysFromRolla.com](http://www.4guysfromrolla.com), 1998 Microsoft 웹 기술을 사용 하 여 왔습니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-312">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="21dea-313">Scott는 독립 컨설턴트, 강사, 그리고 기록기로 작동합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-313">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="21dea-314">최근 저서는 [ *Sams 설명 직접 ASP.NET 2.0 24 시간 동안의*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-314">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="21dea-315">그에 도달할 수 있습니다 [ mitchell@4GuysFromRolla.com합니다.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="21dea-315">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="21dea-316">찾을 수 있는 저자의 블로그를 통해 또는 [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET)합니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-316">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="21dea-317">특별히 감사</span><span class="sxs-lookup"><span data-stu-id="21dea-317">Special Thanks To</span></span>

<span data-ttu-id="21dea-318">이 자습서 시리즈는 많은 유용한 검토자가 검토 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-318">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="21dea-319">이 자습서에 대 한 선행 검토자는 Teresa Murphy 및 David Suru 있었습니다.</span><span class="sxs-lookup"><span data-stu-id="21dea-319">Lead reviewers for this tutorial were Teresa Murphy and David Suru.</span></span> <span data-ttu-id="21dea-320">내 향후 MSDN 문서를 검토에 관심이 있으십니까?</span><span class="sxs-lookup"><span data-stu-id="21dea-320">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="21dea-321">그렇다면 삭제 나에서 선 [ mitchell@4GuysFromRolla.com합니다.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="21dea-321">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="21dea-322">[이전](wrapping-database-modifications-within-a-transaction-cs.md)
> [다음](batch-deleting-cs.md)</span><span class="sxs-lookup"><span data-stu-id="21dea-322">[Previous](wrapping-database-modifications-within-a-transaction-cs.md)
[Next](batch-deleting-cs.md)</span></span>
