---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/deploying-database-projects
title: 데이터베이스 프로젝트 배포 | Microsoft Docs
author: jrjlee
description: '참고: 다 수의 엔터프라이즈 배포 시나리오에 필요한 배포 된 데이터베이스를 증분 업데이트를 게시 하는 기능입니다. 대안은를 다시 만드는 중...'
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: 832f226a-1aa3-4093-8c29-ce4196793259
ms.technology: dotnet-webforms
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/deploying-database-projects
msc.type: authoredcontent
ms.openlocfilehash: 3d261acbd6f8dab60a02c21546d8bc276de486ba
ms.sourcegitcommit: 953ff9ea4369f154d6fd0239599279ddd3280009
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/03/2018
ms.locfileid: "37374965"
---
<a name="deploying-database-projects"></a><span data-ttu-id="783c8-104">데이터베이스 프로젝트 배포</span><span class="sxs-lookup"><span data-stu-id="783c8-104">Deploying Database Projects</span></span>
====================
<span data-ttu-id="783c8-105">[Jason lee 공저](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="783c8-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="783c8-106">PDF 다운로드</span><span class="sxs-lookup"><span data-stu-id="783c8-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> [!NOTE]
> <span data-ttu-id="783c8-107">다 수의 엔터프라이즈 배포 시나리오, 배포 된 데이터베이스를 증분 업데이트를 게시 하는 기능을 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-107">In lots of enterprise deployment scenarios, you need the ability to publish incremental updates to a deployed database.</span></span> <span data-ttu-id="783c8-108">대안은 기존 데이터베이스에서 데이터를 잃게 즉 모든 배포에서 데이터베이스를 다시 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-108">The alternative is to recreate the database on every deployment, which means you lose any data in the existing database.</span></span> <span data-ttu-id="783c8-109">Visual Studio 2010을 사용 하 여 작업할 때 VSDBCMD 사용할 증분 데이터베이스 게시에 대 한 권장된 접근 방법입니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-109">When you work with Visual Studio 2010, using VSDBCMD is the recommended approach to incremental database publishing.</span></span> <span data-ttu-id="783c8-110">그러나 다음 버전의 Visual Studio 및 웹 게시 파이프라인 (WPP) 증분 게시 직접 지원 되는 도구가 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-110">However, the next version of Visual Studio and the Web Publishing Pipeline (WPP) will include tooling that supports incremental publishing directly.</span></span>


<span data-ttu-id="783c8-111">Visual Studio 2010에서 Contact Manager 샘플 솔루션을 열면 데이터베이스 프로젝트 파일 4 개를 포함 하는 속성 폴더에 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-111">If you open the Contact Manager sample solution in Visual Studio 2010, you'll see that the database project includes a Properties folder that contains four files.</span></span>

![](deploying-database-projects/_static/image1.png)

<span data-ttu-id="783c8-112">프로젝트 파일과 함께 (*ContactManager.Database.dbproj* 이 경우), 빌드 및 배포 프로세스의 다양 한 측면을 제어 하는 이러한 파일:</span><span class="sxs-lookup"><span data-stu-id="783c8-112">Together with the project file (*ContactManager.Database.dbproj* in this case), these files control various aspects of the build and deployment process:</span></span>

- <span data-ttu-id="783c8-113">합니다 *Database.sqlcmdvars* 파일 프로젝트를 배포할 때 사용할 SQLCMD 변수에 대 한 값을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-113">The *Database.sqlcmdvars* file provides values for any SQLCMD variables you use when you deploy the project.</span></span> <span data-ttu-id="783c8-114">각 솔루션 구성 (예: 디버그 및 릴리스) 다른.sqlcmdvars 파일을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-114">Each solution configuration (for example, debug and release) can specify a different .sqlcmdvars file.</span></span>
- <span data-ttu-id="783c8-115">합니다 *Database.sqldeployment* 파일은 프로젝트 또는 대상 서버의 데이터 정렬에 정의 된 데이터 정렬을 사용할지 여부와 같은 배포 별 설정 제공 대상 데이터베이스를 다시 여부를 모든 시간 또는 단순히 기존 데이터베이스를 최신으로 가져오고 등을 수정 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-115">The *Database.sqldeployment* file provides deployment-specific settings, like whether to use the collation defined in your project or the collation of the destination server, whether to recreate the destination database every time or simply amend the existing database to bring it up to date, and so on.</span></span> <span data-ttu-id="783c8-116">각 솔루션 구성 다른.sqldeployment 파일을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-116">Each solution configuration can specify a different .sqldeployment file.</span></span>
- <span data-ttu-id="783c8-117">합니다 *Database.sqlpermissions* 파일은 대상 데이터베이스에 추가 하려는 모든 사용 권한을 정의 하는 데 사용할 수 있는 XML 문서입니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-117">The *Database.sqlpermissions* file is an XML document that you can use to define any permissions you want to add to the target database.</span></span> <span data-ttu-id="783c8-118">솔루션 구성을 모두 동일한.sqlpermissions 파일을 공유 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-118">All solution configurations share the same .sqlpermissions file.</span></span>
- <span data-ttu-id="783c8-119">합니다 *Database.sqlsettings* 파일 데이터 정렬 비교 연산자의 동작을 사용할 등과 같은 데이터베이스를 만들 때 사용할 데이터베이스 수준 속성을 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-119">The *Database.sqlsettings* file specifies the database-level properties to use when creating the database, like the collation to use, the behavior of comparison operators, and so on.</span></span> <span data-ttu-id="783c8-120">모든 솔루션 구성과 동일한.sqlsettings 파일을 공유 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-120">All solution configurations share the same .sqlsettings file.</span></span>

<span data-ttu-id="783c8-121">Visual Studio에서 이러한 파일을 열고 내용을 숙지 살펴보도록 것입니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-121">It's worth taking a moment to open these files in Visual Studio and familiarize yourself with the contents.</span></span>

<span data-ttu-id="783c8-122">데이터베이스 프로젝트를 빌드할 때 빌드 프로세스는 두 개의 파일을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-122">When you build a database project, the build process creates two files:</span></span>

- <span data-ttu-id="783c8-123">A *데이터베이스 스키마* (.dbschema 파일).</span><span class="sxs-lookup"><span data-stu-id="783c8-123">A *database schema* (.dbschema file).</span></span> <span data-ttu-id="783c8-124">XML 형식으로 만들려는 데이터베이스의 스키마를 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-124">This describes the schema of the database you want to create in XML format.</span></span>
- <span data-ttu-id="783c8-125">A *배포 매니페스트* (.deploymanifest 파일).</span><span class="sxs-lookup"><span data-stu-id="783c8-125">A *deployment manifest* (.deploymanifest file).</span></span> <span data-ttu-id="783c8-126">이 만들고 데이터베이스를 배포 하는 데 필요한 모든 정보를 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-126">This contains all the information required to create and deploy your database.</span></span> <span data-ttu-id="783c8-127">배포 지침 (.sqldeployment 파일) 및 모든 배포 전 또는 배포 후 SQL 스크립트와 같은 다른 리소스와 함께.dbschema 파일을 참조합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-127">It references the .dbschema file along with other resources, like the deployment instructions (the .sqldeployment file) and any pre-deployment or post-deployment SQL scripts.</span></span>

<span data-ttu-id="783c8-128">이러한 리소스 간의 관계를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-128">This shows the relationship between these resources:</span></span>

![](deploying-database-projects/_static/image2.png)

<span data-ttu-id="783c8-129">알 수 있듯이.sqlsettings 파일과.sqlpermissions 파일은 빌드 프로세스에 입력 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-129">As you can see, the .sqlsettings file and the .sqlpermissions file are inputs to the build process.</span></span> <span data-ttu-id="783c8-130">데이터베이스 프로젝트 파일과 함께 이러한 파일은 데이터베이스 스키마 파일을 만들려면 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-130">Along with the database project file, these files are used to create the database schema file.</span></span> <span data-ttu-id="783c8-131">.Sqlcmdvars 파일과.sqldeployment 파일 변경 하지 않고 빌드 프로세스를 통해 전달 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-131">The .sqldeployment file and the .sqlcmdvars file pass through the build process unchanged.</span></span> <span data-ttu-id="783c8-132">배포 매니페스트는 데이터베이스 스키마,.sqldeployment 파일,.sqlcmdvars 파일 및 모든 배포 전 또는 배포 후 SQL 스크립트의 위치를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-132">The deployment manifest indicates the location of the database schema, the .sqldeployment file, the .sqlcmdvars file, and any pre-deployment or post-deployment SQL scripts.</span></span>

## <a name="why-use-vsdbcmd-to-deploy-a-database-project"></a><span data-ttu-id="783c8-133">VSDBCMD를 사용 하 여 데이터베이스 프로젝트를 배포 하는 이유?</span><span class="sxs-lookup"><span data-stu-id="783c8-133">Why Use VSDBCMD to Deploy a Database Project?</span></span>

<span data-ttu-id="783c8-134">데이터베이스 프로젝트를 배포 하는 데 다양 한 다른 방법이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-134">There are various different approaches to deploying database projects.</span></span> <span data-ttu-id="783c8-135">그러나 엔터프라이즈 환경에서 원격 서버에 데이터베이스 프로젝트 배포에 그 중 일부만 적합 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-135">However, not all of them are suitable for deploying a database project to remote servers in an enterprise environment.</span></span> <span data-ttu-id="783c8-136">데이터베이스 프로젝트 배포에서 원하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-136">Consider what you want from a database project deployment.</span></span> <span data-ttu-id="783c8-137">엔터프라이즈 배포 시나리오에서 원하는 가능성이:</span><span class="sxs-lookup"><span data-stu-id="783c8-137">In enterprise deployment scenarios, you're likely to want:</span></span>

- <span data-ttu-id="783c8-138">원격 위치에서 데이터베이스 프로젝트를 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-138">The ability to deploy the database project from a remote location.</span></span>
- <span data-ttu-id="783c8-139">기존 데이터베이스를 증분 업데이트를 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-139">The ability to make incremental updates to an existing database.</span></span>
- <span data-ttu-id="783c8-140">배포 전 스크립트 또는 배포 후 스크립트를 포함할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-140">The ability to include pre-deployment scripts or post-deployment scripts.</span></span>
- <span data-ttu-id="783c8-141">여러 대상 환경에 배포를 조정 하는 기능.</span><span class="sxs-lookup"><span data-stu-id="783c8-141">The ability to tailor the deployment to multiple destination environments.</span></span>
- <span data-ttu-id="783c8-142">보다 크고의 일부로 데이터베이스 프로젝트를 배포 하는 기능 일반적으로 스크립팅된 단일 단계 솔루션을 배포 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-142">The ability to deploy the database project as part of a larger, typically scripted, single-step solution deployment.</span></span>

<span data-ttu-id="783c8-143">가지 데이터베이스 프로젝트를 배포 하 여 세 가지 주요 방법이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-143">There are three main approaches you can use to deploy a database project:</span></span>

- <span data-ttu-id="783c8-144">Visual Studio 2010에서 데이터베이스 프로젝트 형식을 사용 하 여 배포 기능을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-144">You can use the deployment functionality with the database project type in Visual Studio 2010.</span></span> <span data-ttu-id="783c8-145">빌드하고 Visual Studio 2010에서 데이터베이스 프로젝트를 배포할 때 배포 프로세스 배포 매니페스트를 사용 하 여 빌드 구성에 적용 하 여 SQL 기반 배포 파일을 생성 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-145">When you build and deploy a database project in Visual Studio 2010, the deployment process uses the deployment manifest to generate a SQL-based deployment file specific to the build configuration.</span></span> <span data-ttu-id="783c8-146">이 이미 존재 및 이미 있을 경우 데이터베이스에 필요한 변경을 수행 하지 않는 경우 데이터베이스를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-146">This will create the database if it doesn't already exist or make any necessary changes to the database if it does already exist.</span></span> <span data-ttu-id="783c8-147">SQLCMD.exe를 사용 하 여 대상 서버에서이 파일을 실행 하거나 만들고 파일을 실행 하려면 Visual Studio를 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-147">You can use SQLCMD.exe to run this file on your destination server, or you can set Visual Studio to create and run the file.</span></span> <span data-ttu-id="783c8-148">이 방법의 단점은 배포 설정 제어할만 제한 됩니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-148">The disadvantage of this approach is that you have only limited control over the deployment settings.</span></span> <span data-ttu-id="783c8-149">또한 종종 환경별 변수 값을 제공 하도록 SQL 배포 파일을 수정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-149">You may often also need to modify the SQL deployment file to provide environment-specific variable values.</span></span> <span data-ttu-id="783c8-150">Visual Studio 2010이 설치를 사용 하 여 컴퓨터에서이 방법을 사용할 수 있습니다 및 개발자 인지 알고 있어야 하 고 모든 대상 환경에 대 한 연결 문자열 및 자격 증명을 제공 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-150">You can only use this approach from a computer with Visual Studio 2010 installed, and the developer would need to know and provide connection strings and credentials for all destination environments.</span></span>
- <span data-ttu-id="783c8-151">인터넷 정보 서비스 (IIS) 웹 배포 도구 (웹 배포)를 사용 하 여 하 [웹 응용 프로그램 프로젝트의 일부로 데이터베이스를 배포](https://msdn.microsoft.com/library/dd465343.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-151">You can use the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to [deploy a database as part of a web application project](https://msdn.microsoft.com/library/dd465343.aspx).</span></span> <span data-ttu-id="783c8-152">그러나이 방법은 단순히 대상 서버에 기존 로컬 데이터베이스를 복제 하는 것이 아니라 데이터베이스 프로젝트를 배포 하려는 경우에 훨씬 더 복잡 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-152">However, this approach is a lot more complex if you want to deploy a database project rather than simply replicate an existing local database on a destination server.</span></span> <span data-ttu-id="783c8-153">데이터베이스 프로젝트를 생성 하는 SQL 배포 스크립트를 실행 하지만 이렇게 하려면 웹 배포를 구성할 수 있습니다, 웹 응용 프로그램 프로젝트에 대 한 사용자 지정 WPP 대상 파일을 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-153">You can configure Web Deploy to run the SQL deployment script that the database project generates, but in order to do this, you need to create a custom WPP targets file for your web application project.</span></span> <span data-ttu-id="783c8-154">배포 프로세스에 상당한 복잡성이 추가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-154">This adds a substantial amount of complexity to the deployment process.</span></span> <span data-ttu-id="783c8-155">또한 웹 배포에서는 직접 없습니다 기존 데이터베이스에 대 한 증분 업데이트를.</span><span class="sxs-lookup"><span data-stu-id="783c8-155">In addition, Web Deploy does not directly support incremental updates to existing databases.</span></span> <span data-ttu-id="783c8-156">이 방식에 대 한 자세한 내용은 참조 하세요. [SQL 파일을 배포 패키지 데이터베이스 프로젝트에 웹 게시 파이프라인 확장](https://go.microsoft.com/?linkid=9805121)합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-156">For more information on this approach, see [Extending the Web Publishing Pipeline to package database project deployed SQL file](https://go.microsoft.com/?linkid=9805121).</span></span>
- <span data-ttu-id="783c8-157">VSDBCMD 유틸리티를 사용 하 여 데이터베이스 스키마 또는 배포 매니페스트를 사용 하 여 데이터베이스를 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-157">You can use the VSDBCMD utility to deploy the database, using either the database schema or the deployment manifest.</span></span> <span data-ttu-id="783c8-158">큰 스크립트를 사용한 배포 프로세스의 일부로 데이터베이스를 게시할 수 있는 MSBuild 대상에서 VSDBCMD.exe를 호출할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-158">You can call VSDBCMD.exe from an MSBuild target, which lets you publish databases as part of a larger, scripted deployment process.</span></span> <span data-ttu-id="783c8-159">여러 빌드 구성 만들기 않고 다양 한 환경에 대 한 배포를 사용자 지정할 수 있는 VSDBCMD 명령에서 다른 데이터베이스 속성도 많은 고.sqlcmdvars 파일에서 변수를 재정의할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-159">You can override the variables in your .sqlcmdvars file and lots of other database properties from a VSDBCMD command, which allows you to customize your deployment for different environments without creating multiple build configurations.</span></span> <span data-ttu-id="783c8-160">VSDBCMD는 데이터베이스 스키마와 대상 데이터베이스에 맞게 필요한 변경 내용만 것을 의미 하는 차별화 기능을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-160">VSDBCMD provides differentiation functionality, which means it will make only the necessary changes to align a destination database with your database schema.</span></span> <span data-ttu-id="783c8-161">또한 VSDBCMD 다양 한 배포 프로세스를 보다 세분화 된 제어 기능을 제공 하는 명령줄 옵션을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-161">VSDBCMD also offers a wide range of command-line options, which give you fine-grained control over the deployment process.</span></span>

<span data-ttu-id="783c8-162">이 개요에서 VSDBCMD를 사용 하 여 MSBuild를 사용 하 여 일반적인 엔터프라이즈 배포 시나리오에 가장 적합 한 방법 인지를 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-162">From this overview, you can see that using VSDBCMD with MSBuild is the approach best suited to a typical enterprise deployment scenario:</span></span>

|  | <span data-ttu-id="783c8-163">Visual Studio 2010</span><span class="sxs-lookup"><span data-stu-id="783c8-163">Visual Studio 2010</span></span> | <span data-ttu-id="783c8-164">웹 배포 2.0</span><span class="sxs-lookup"><span data-stu-id="783c8-164">Web Deploy 2.0</span></span> | <span data-ttu-id="783c8-165">VSDBCMD.exe</span><span class="sxs-lookup"><span data-stu-id="783c8-165">VSDBCMD.exe</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="783c8-166">원격 배포를 지원 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-166">Supports remote deployment?</span></span> | <span data-ttu-id="783c8-167">예</span><span class="sxs-lookup"><span data-stu-id="783c8-167">Yes</span></span> | <span data-ttu-id="783c8-168">예</span><span class="sxs-lookup"><span data-stu-id="783c8-168">Yes</span></span> | <span data-ttu-id="783c8-169">예</span><span class="sxs-lookup"><span data-stu-id="783c8-169">Yes</span></span> |
| <span data-ttu-id="783c8-170">증분 업데이트를 지원 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-170">Supports incremental updates?</span></span> | <span data-ttu-id="783c8-171">예</span><span class="sxs-lookup"><span data-stu-id="783c8-171">Yes</span></span> | <span data-ttu-id="783c8-172">아니요</span><span class="sxs-lookup"><span data-stu-id="783c8-172">No</span></span> | <span data-ttu-id="783c8-173">예</span><span class="sxs-lookup"><span data-stu-id="783c8-173">Yes</span></span> |
| <span data-ttu-id="783c8-174">배포 전/후 배포 스크립트를 지원 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-174">Supports pre/post-deployment scripts?</span></span> | <span data-ttu-id="783c8-175">예</span><span class="sxs-lookup"><span data-stu-id="783c8-175">Yes</span></span> | <span data-ttu-id="783c8-176">예</span><span class="sxs-lookup"><span data-stu-id="783c8-176">Yes</span></span> | <span data-ttu-id="783c8-177">예</span><span class="sxs-lookup"><span data-stu-id="783c8-177">Yes</span></span> |
| <span data-ttu-id="783c8-178">다중 환경 배포를 지원 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-178">Supports multi-environment deployment?</span></span> | <span data-ttu-id="783c8-179">제한됨</span><span class="sxs-lookup"><span data-stu-id="783c8-179">Limited</span></span> | <span data-ttu-id="783c8-180">제한됨</span><span class="sxs-lookup"><span data-stu-id="783c8-180">Limited</span></span> | <span data-ttu-id="783c8-181">예</span><span class="sxs-lookup"><span data-stu-id="783c8-181">Yes</span></span> |
| <span data-ttu-id="783c8-182">배포 스크립트 작성된 지원?</span><span class="sxs-lookup"><span data-stu-id="783c8-182">Supports scripted deployment?</span></span> | <span data-ttu-id="783c8-183">제한됨</span><span class="sxs-lookup"><span data-stu-id="783c8-183">Limited</span></span> | <span data-ttu-id="783c8-184">예</span><span class="sxs-lookup"><span data-stu-id="783c8-184">Yes</span></span> | <span data-ttu-id="783c8-185">예</span><span class="sxs-lookup"><span data-stu-id="783c8-185">Yes</span></span> |

<span data-ttu-id="783c8-186">이 항목의 나머지 부분에서는 데이터베이스 프로젝트를 배포 하는 MSBuild 사용 하 여 VSDBCMD 사용을 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-186">The remainder of this topic describes the use of VSDBCMD with MSBuild to deploy database projects.</span></span>

## <a name="understanding-the-deployment-process"></a><span data-ttu-id="783c8-187">배포 프로세스를 이해합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-187">Understanding the Deployment Process</span></span>

<span data-ttu-id="783c8-188">VSDBCMD 유틸리티를 사용 하면 데이터베이스 스키마 (.dbschema 파일) 또는 배포 매니페스트 (.deploymanifest 파일)를 사용 하 여 데이터베이스를 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-188">The VSDBCMD utility lets you deploy a database using either the database schema (the .dbschema file) or the deployment manifest (the .deploymanifest file).</span></span> <span data-ttu-id="783c8-189">실제로 배포 매니페스트를 사용 하면 다양 한 배포 속성에 대 한 기본값을 제공 하 고 실행 하려면 모든 배포 전 또는 배포 후 SQL 스크립트를 식별 하는 대로 배포 매니페스트를 거의 항상 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-189">In practice, you'll almost always use the deployment manifest, as the deployment manifest lets you provide default values for various deployment properties and identify any pre-deployment or post-deployment SQL scripts you want to run.</span></span> <span data-ttu-id="783c8-190">예를 들어 배포 하려면이 VSDBCMD 명령을 사용 합니다 **ContactManager** 테스트 환경에서 데이터베이스 서버에 데이터베이스:</span><span class="sxs-lookup"><span data-stu-id="783c8-190">For example, this VSDBCMD command is used to deploy the **ContactManager** database to a database server in a test environment:</span></span>


[!code-console[Main](deploying-database-projects/samples/sample1.cmd)]


<span data-ttu-id="783c8-191">이 경우:</span><span class="sxs-lookup"><span data-stu-id="783c8-191">In this case:</span></span>

- <span data-ttu-id="783c8-192">합니다 **/a** (또는 **/Action**) 원하는 작업을 수행 하는 VSDBCMD 스위치를 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-192">The **/a** (or **/Action**) switch specifies what you want VSDBCMD to do.</span></span> <span data-ttu-id="783c8-193">이 설정할 수 있습니다 **가져오기** 하거나 **배포**합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-193">You can set this to **Import** or **Deploy**.</span></span> <span data-ttu-id="783c8-194">합니다 **가져오기** 옵션은 기존 데이터베이스에서.dbschema 파일을 생성 하는 데 하며 **배포** 옵션이.dbschema 파일을 대상 데이터베이스를 배포 하는 데 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-194">The **Import** option is used to generate a .dbschema file from an existing database, and the **Deploy** option is used to deploy a .dbschema file to a target database.</span></span>
- <span data-ttu-id="783c8-195">합니다 **/매니페스트** (또는 **/ManifestFile**) 스위치를 배포 하려는.deploymanifest 파일을 식별 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-195">The **/manifest** (or **/ManifestFile**) switch identifies the .deploymanifest file you want to deploy.</span></span> <span data-ttu-id="783c8-196">.Dbschema 파일을 대신 사용 하려는 경우 사용 합니다 **/모델** (또는 **/ModelFile**) 전환 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-196">If you wanted to use the .dbschema file instead, you'd use the **/model** (or **/ModelFile**) switch.</span></span>
- <span data-ttu-id="783c8-197">합니다 **/cs** (또는 **/ConnectionString**) 스위치는 대상 데이터베이스 서버에 대 한 연결 문자열을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-197">The **/cs** (or **/ConnectionString**) switch provides the connection string for the target database server.</span></span> <span data-ttu-id="783c8-198">데이터베이스의 이름을 포함 하지 않습니다이&#x2014;VSDBCMD 데이터베이스를 만들려면 서버에 연결 해야 합니다. 개별 데이터베이스에 연결할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-198">Note that this doesn't include the name of the database&#x2014;VSDBCMD needs to connect to the server to create the database; it doesn't need to connect to an individual database.</span></span> <span data-ttu-id="783c8-199">.Deploymanifest 파일에 연결 문자열에 포함 된 경우이 스위치를 생략할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-199">If your .deploymanifest file includes a connection string, you can omit this switch.</span></span> <span data-ttu-id="783c8-200">그래도 스위치를 사용 하면 스위치 값.deploymanifest 값 보다 우선 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-200">If you use the switch anyway, the switch value will override the .deploymanifest value.</span></span>
- <span data-ttu-id="783c8-201">합니다 <strong>/p:TargetDatabase</strong> 속성은 생성 시 대상 데이터베이스에 할당 하려는 이름을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-201">The <strong>/p:TargetDatabase</strong> property provides the name you want to assign to the target database on creation.</span></span> <span data-ttu-id="783c8-202">이 값을 재정의 합니다 <strong>TargetDatabase</strong> .deploymanifest 파일의 속성입니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-202">This overrides the value of the <strong>TargetDatabase</strong> property in the .deploymanifest file.</span></span> <span data-ttu-id="783c8-203">사용할 수는 <strong>/p:</strong> <em>[속성 이름]</em>.sqlcmdvars 파일에 선언 된 구문을 다양 한 배포 속성을 설정 하 고 모든 SQLCMD 변수를 재정의 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-203">You can use the <strong>/p:</strong> <em>[property name]</em>syntax to set a wide variety of deployment properties and to override any SQLCMD variables declared in your .sqlcmdvars file.</span></span>
- <span data-ttu-id="783c8-204">합니다 **/dd+** (또는 **/DeployToDatabase+**) 스위치를 배포를 만들고 대상 환경에 배포할 것임을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-204">The **/dd+** (or **/DeployToDatabase+**) switch indicates that you want to create a deployment and deploy it to the target environment.</span></span> <span data-ttu-id="783c8-205">지정 하는 경우 **/dd-**, 또는 스위치를 생략 VSDBCMD 배포 스크립트를 생성 합니다 있지만 대상 환경에 배포 되지 것입니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-205">If you specify **/dd-**, or omit the switch, VSDBCMD will generate a deployment script but will not deploy it to the target environment.</span></span> <span data-ttu-id="783c8-206">이 스위치 혼동의 원인이 있고 섹션에서 자세히 설명 됩니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-206">This switch is often the source of confusion and is explained in more detail in the next section.</span></span>
- <span data-ttu-id="783c8-207">합니다 **/script** (또는 **/DeploymentScriptFile**) 스위치 배포 스크립트를 생성 하려는 위치를 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-207">The **/script** (or **/DeploymentScriptFile**) switch specifies where you want to generate the deployment script.</span></span> <span data-ttu-id="783c8-208">이 값 배포 프로세스에 영향을 주지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-208">This value does not affect the deployment process.</span></span>

<span data-ttu-id="783c8-209">VSDBCMD에 대 한 자세한 내용은 참조 하세요. [VSDBCMD에 대 한 명령줄 참조 합니다. (배포 및 스키마 가져오기) EXE](https://msdn.microsoft.com/library/dd193283.aspx) 및 [방법: VSDBCMD를 사용 하 여 명령 프롬프트에서 배포에 대 한 데이터베이스를 준비 합니다. EXE](https://msdn.microsoft.com/library/dd193258.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-209">For more information on VSDBCMD, see [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx) and [How to: Prepare a Database for Deployment From a Command Prompt by Using VSDBCMD.EXE](https://msdn.microsoft.com/library/dd193258.aspx).</span></span>

<span data-ttu-id="783c8-210">MSBuild 프로젝트 파일에서 VSDBCMD를 사용 하는 방법의 예제를 참조 하세요 [빌드 프로세스를 이해](understanding-the-build-process.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-210">For an example of how you can use VSDBCMD from an MSBuild project file, see [Understanding the Build Process](understanding-the-build-process.md).</span></span> <span data-ttu-id="783c8-211">여러 환경에 대 한 데이터베이스 배포 설정을 구성 하는 방법의 예제를 참조 하세요 [여러 환경에 대 한 데이터베이스 배포 사용자 지정](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-211">For examples of how to configure database deployment settings for multiple environments, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span>

## <a name="understanding-the-deploytodatabase-switch"></a><span data-ttu-id="783c8-212">DeployToDatabase 전환 이해</span><span class="sxs-lookup"><span data-stu-id="783c8-212">Understanding the DeployToDatabase Switch</span></span>

<span data-ttu-id="783c8-213">동작을 **/dd** 또는 **/DeployToDatabase** 스위치 VSDBCMD.dbschema 파일 또는.deploymanifest 파일을 사용 하 여 사용 여부에 따라 달라 집니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-213">The behavior of the **/dd** or **/DeployToDatabase** switch depends on whether you're using VSDBCMD with a .dbschema file or a .deploymanifest file.</span></span> <span data-ttu-id="783c8-214">.Dbschema 파일을 사용 하는 동작을 매우 간단 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-214">If you're using a .dbschema file, the behavior is fairly straightforward:</span></span>

- <span data-ttu-id="783c8-215">지정 하는 경우 **/dd+** 하거나 **/dd**, VSDBCMD 배포 스크립트를 생성 되며 데이터베이스를 배포 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-215">If you specify **/dd+** or **/dd**, VSDBCMD will generate a deployment script and deploy the database.</span></span>
- <span data-ttu-id="783c8-216">지정 하는 경우 **/dd-** 스위치를 생략 하거나, VSDBCMD만 배포 스크립트를 생성 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-216">If you specify **/dd-** or omit the switch, VSDBCMD will generate a deployment script only.</span></span>

<span data-ttu-id="783c8-217">.Deploymanifest 파일을 사용 하는 경우 동작은 훨씬 더 복잡 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-217">If you're using a .deploymanifest file, the behavior is a lot more complicated.</span></span> <span data-ttu-id="783c8-218">.Deploymanifest 파일에 속성 이름이 때문에 이것이 **DeployToDatabase** 또한 결정 하는 데이터베이스 배포 되는지 여부를 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-218">This is because the .deploymanifest file contains a property name **DeployToDatabase** that also determines whether the database is deployed.</span></span>


[!code-xml[Main](deploying-database-projects/samples/sample2.xml)]


<span data-ttu-id="783c8-219">이 속성의 값은 데이터베이스 프로젝트의 속성에 따라 설정 됩니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-219">The value of this property is set according to the properties of the database project.</span></span> <span data-ttu-id="783c8-220">설정 하는 경우는 **배포 작업** 하 **배포 스크립트 (.sql)를 만들**, 값은 **False**합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-220">If you set the **Deploy action** to **Create a deployment script (.sql)**, the value will be **False**.</span></span> <span data-ttu-id="783c8-221">설정 하는 경우는 **배포 작업** 하 **배포 스크립트 (.sql)을 만들고 데이터베이스에 배포**, 값은 **True**.</span><span class="sxs-lookup"><span data-stu-id="783c8-221">If you set the **Deploy action** to **Create a deployment script (.sql) and deploy to the database**, the value will be **True**.</span></span>

> [!NOTE]
> <span data-ttu-id="783c8-222">이러한 설정은 특정 빌드 구성 및 플랫폼을 사용 하 여 연결 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-222">These settings are associated with a specific build configuration and platform.</span></span> <span data-ttu-id="783c8-223">예를 들어에 대 한 설정을 구성 하는 경우는 **디버그** 구성을 사용 하 여 게시 합니다 **릴리스** 구성 설정을 사용 하지 것입니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-223">For example, if you configure settings for the **Debug** configuration and then publish using the **Release** configuration, your settings will not be used.</span></span>


![](deploying-database-projects/_static/image3.png)

> [!NOTE]
> <span data-ttu-id="783c8-224">이 시나리오에서는 합니다 **배포 작업** 항상로 설정 해야 **배포 스크립트 (.sql)를 만들**데이터베이스를 배포 하려면 Visual Studio 2010 않으려고 하기 때문에, 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-224">In this scenario, the **Deploy action** should always be set to **Create a deployment script (.sql)**, because you don't want Visual Studio 2010 to deploy your database.</span></span> <span data-ttu-id="783c8-225">즉, 합니다 **DeployToDatabase** 속성은 항상 **False**합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-225">In other words, the **DeployToDatabase** property should always be **False**.</span></span>


<span data-ttu-id="783c8-226">경우는 **DeployToDatabase** 속성을 지정 합니다 **/dd** 속성 값이 스위치는 속성을 재정의 **false**:</span><span class="sxs-lookup"><span data-stu-id="783c8-226">When a **DeployToDatabase** property is specified, the **/dd** switch will only override the property if the property value is **false**:</span></span>

- <span data-ttu-id="783c8-227">경우는 **DeployToDatabase** 속성은 **False**를 지정 **/dd+** 또는 **/dd**, VSDBCMD 재정의  **DeployToDatabase** 속성 및 데이터베이스를 배포 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-227">If the **DeployToDatabase** property is **False**, and you specify **/dd+** or **/dd**, VSDBCMD will override the **DeployToDatabase** property and deploy the database.</span></span>
- <span data-ttu-id="783c8-228">경우는 **DeployToDatabase** 속성은 **False**를 지정 하면 **/dd-** 스위치를 생략 하거나, VSDBCMD 데이터베이스를 배포 하지 것입니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-228">If the **DeployToDatabase** property is **False**, and you specify **/dd-** or omit the switch, VSDBCMD will not deploy the database.</span></span>
- <span data-ttu-id="783c8-229">경우는 **DeployToDatabase** 속성은 **True**, VSDBCMD는 스위치를 무시 하 고 데이터베이스를 배포 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-229">If the **DeployToDatabase** property is **True**, VSDBCMD will ignore the switch and deploy the database.</span></span>
- <span data-ttu-id="783c8-230">배포 스크립트는 물론 데이터베이스를 배포 하 든 관계 없이 각각의 경우에 생성 됩니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-230">A deployment script is generated in each case, regardless of whether you're deploying the database as well.</span></span>

## <a name="conclusion"></a><span data-ttu-id="783c8-231">결론</span><span class="sxs-lookup"><span data-stu-id="783c8-231">Conclusion</span></span>

<span data-ttu-id="783c8-232">이 항목에서는 Visual Studio 2010에서 데이터베이스 프로젝트 빌드 및 배포 프로세스의 개요를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-232">This topic provided an overview of the build and deployment process for database projects in Visual Studio 2010.</span></span> <span data-ttu-id="783c8-233">또한 엔터프라이즈 규모 데이터베이스 배포를 지원 하기 위해 MSBuild를 사용 하 여 VSDBCMD.exe를 사용 하는 방법을 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-233">It also described how you can use VSDBCMD.exe with MSBuild to support enterprise-scale database deployment.</span></span>

<span data-ttu-id="783c8-234">실제로 작동 하는 방법에 대 한 자세한 내용은 참조 하세요. [여러 환경에 대 한 데이터베이스 배포 사용자 지정](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-234">For more information on how this works in practice, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span>

## <a name="further-reading"></a><span data-ttu-id="783c8-235">추가 정보</span><span class="sxs-lookup"><span data-stu-id="783c8-235">Further Reading</span></span>

<span data-ttu-id="783c8-236">각 환경에 대 한 별도 배포 구성 파일을 만들어 데이터베이스 배포를 사용자 지정 하는 방법에 대 한 자세한 내용은 [여러 환경에 대 한 데이터베이스 배포 사용자 지정](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-236">For information on how to customize database deployments by creating a separate deployment configuration file for each environment, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span> <span data-ttu-id="783c8-237">배포 후 스크립트를 실행 하 여 데이터베이스 역할 멤버 자격을 구성 하는 방법에 대 한 지침을 참조 하세요 [배포 데이터베이스 역할 멤버 자격 테스트 환경에](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md)입니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-237">For guidance on how to configure database role memberships by running a post-deployment script, see [Deploying Database Role Memberships to Test Environments](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md).</span></span> <span data-ttu-id="783c8-238">고유한 과제 중 일부는 멤버 자격을 관리 하는 지침은 데이터베이스 적용, 참조 [엔터프라이즈 환경에 멤버 자격 데이터베이스 배포](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-238">For guidance on managing some of the unique challenges that membership databases impose, see [Deploying Membership Databases to Enterprise Environments](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md).</span></span>

<span data-ttu-id="783c8-239">MSDN의 이러한 항목에는 광범위 한 지침 및 배경 정보는 Visual Studio 데이터베이스 프로젝트 및 데이터베이스 배포 프로세스를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="783c8-239">These topics on MSDN provide broader guidance and background information on Visual Studio database projects and the database deployment process:</span></span>

- [<span data-ttu-id="783c8-240">Visual Studio 2010 SQL Server 데이터베이스 프로젝트</span><span class="sxs-lookup"><span data-stu-id="783c8-240">Visual Studio 2010 SQL Server Database Projects</span></span>](https://msdn.microsoft.com/library/ff678491.aspx)
- [<span data-ttu-id="783c8-241">데이터베이스 변경 내용 관리</span><span class="sxs-lookup"><span data-stu-id="783c8-241">Managing Database Change</span></span>](https://msdn.microsoft.com/library/aa833404.aspx)
- [<span data-ttu-id="783c8-242">방법: VSDBCMD를 사용 하 여 명령 프롬프트에서 배포에 대 한 데이터베이스를 준비 합니다. EXE</span><span class="sxs-lookup"><span data-stu-id="783c8-242">How to: Prepare a Database for Deployment From a Command Prompt by Using VSDBCMD.EXE</span></span>](https://msdn.microsoft.com/library/dd193258.aspx)
- [<span data-ttu-id="783c8-243">데이터베이스 빌드 및 배포 개요</span><span class="sxs-lookup"><span data-stu-id="783c8-243">An Overview of Database Build and Deployment</span></span>](https://msdn.microsoft.com/library/aa833165.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="783c8-244">[이전](deploying-web-packages.md)
> [다음](creating-and-running-a-deployment-command-file.md)</span><span class="sxs-lookup"><span data-stu-id="783c8-244">[Previous](deploying-web-packages.md)
[Next](creating-and-running-a-deployment-command-file.md)</span></span>
