---
uid: mvc/overview/older-versions-1/contact-manager/iteration-7-add-ajax-functionality-cs
title: '반복 #7 – Ajax 기능 추가 (C#) | Microsoft Docs'
author: microsoft
description: 일곱 번째 반복에서 개선할 응용 프로그램의 성능과 응답성 Ajax에 대 한 지원을 추가 하 여 합니다.
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/20/2009
ms.topic: article
ms.assetid: f1b0809e-8909-444e-b6bb-a5cd1dea3f72
ms.technology: dotnet-mvc
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-7-add-ajax-functionality-cs
msc.type: authoredcontent
ms.openlocfilehash: 17978cc8deacb6c023afa1c81f91a256e4eacb28
ms.sourcegitcommit: 953ff9ea4369f154d6fd0239599279ddd3280009
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/03/2018
ms.locfileid: "37394231"
---
<a name="iteration-7--add-ajax-functionality-c"></a><span data-ttu-id="b1a4d-103">반복 #7 – Ajax 기능 추가 (C#)</span><span class="sxs-lookup"><span data-stu-id="b1a4d-103">Iteration #7 – Add Ajax functionality (C#)</span></span>
====================
<span data-ttu-id="b1a4d-104">[Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="b1a4d-104">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="b1a4d-105">코드 다운로드</span><span class="sxs-lookup"><span data-stu-id="b1a4d-105">Download Code</span></span>](iteration-7-add-ajax-functionality-cs/_static/contactmanager_7_cs1.zip)

> <span data-ttu-id="b1a4d-106">일곱 번째 반복에서 개선할 응용 프로그램의 성능과 응답성 Ajax에 대 한 지원을 추가 하 여 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-106">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>


## <a name="building-a-contact-management-aspnet-mvc-application-c"></a><span data-ttu-id="b1a4d-107">연락처 관리 ASP.NET MVC 응용 프로그램을 작성 (C#)</span><span class="sxs-lookup"><span data-stu-id="b1a4d-107">Building a Contact Management ASP.NET MVC Application (C#)</span></span>

<span data-ttu-id="b1a4d-108">이 시리즈의 자습서에서 전체 연락처 관리 응용을 프로그램 시작부터 완료를 빌드합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-108">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="b1a4d-109">연락처 관리자 응용 프로그램에 사용자의 목록을 포함 된 상점 연락처 정보-이름, 전화 번호 및 전자 메일 주소-할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-109">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="b1a4d-110">여러 반복에 응용 프로그램을 빌드합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-110">We build the application over multiple iterations.</span></span> <span data-ttu-id="b1a4d-111">각 반복에서 점진적으로 응용 프로그램을 개선 했습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-111">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="b1a4d-112">이렇게 여러 반복의 목표는 각 변경의 이유를 이해할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-112">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="b1a4d-113">반복 #1-응용 프로그램을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-113">Iteration #1 - Create the application.</span></span> <span data-ttu-id="b1a4d-114">첫 번째 반복에서 연락처 관리자에서에서 만드는 가장 간단한 방법은 가능 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-114">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="b1a4d-115">기본 데이터베이스 작업에 대 한 지원 추가: 만들기, 읽기, 업데이트 및 삭제 (CRUD).</span><span class="sxs-lookup"><span data-stu-id="b1a4d-115">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="b1a4d-116">반복 #2-보기 좋게 응용 프로그램을 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-116">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="b1a4d-117">이 반복에서 기본 ASP.NET MVC 보기 마스터 페이지를 수정 및 스타일 시트를 연계 하 여 응용 프로그램의 모양을 개선 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-117">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="b1a4d-118">반복 #3-양식 유효성 검사를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-118">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="b1a4d-119">세 번째 반복에서는 기본 양식 유효성 검사를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-119">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="b1a4d-120">사용자를 방지할 수를 필요한 형식의 필드를 완료 하지 않고 폼을 제출 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-120">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="b1a4d-121">또한 전자 메일 주소 및 전화 번호 유효성을 검사 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-121">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="b1a4d-122">반복 #4-느슨하게 결합 된 응용 프로그램을 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-122">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="b1a4d-123">이 세 번째 반복에서는 활용 쉽게 유지 관리 하 고 연락처 관리자 응용 프로그램을 수정 하려면 몇 가지 소프트웨어 디자인 패턴입니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-123">In this third iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="b1a4d-124">예를 들어, 리포지토리 패턴 및 종속성 주입 패턴을 사용 하 여 응용 프로그램을 리팩터링 했습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-124">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="b1a4d-125">반복 #5-단위 테스트를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-125">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="b1a4d-126">다섯 번째 반복에서에서는 쉽게 응용 프로그램 유지 관리 하 고 단위 테스트를 추가 하 여 수정 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-126">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="b1a4d-127">데이터 모델 클래스를 모의 하 고는 컨트롤러 및 유효성 검사 논리에 대 한 단위 테스트를 작성 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-127">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="b1a4d-128">반복 #6-테스트 중심 개발을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-128">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="b1a4d-129">이 여섯 번째 반복에서는 추가 새로운 기능을 응용 프로그램 먼저 단위 테스트를 작성 하 고 단위 테스트에 대 한 코드를 작성 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-129">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="b1a4d-130">이 반복에서는 메일 그룹을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-130">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="b1a4d-131">반복 #7 – Ajax 기능을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-131">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="b1a4d-132">일곱 번째 반복에서 개선할 응용 프로그램의 성능과 응답성 Ajax에 대 한 지원을 추가 하 여 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-132">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="b1a4d-133">이 반복</span><span class="sxs-lookup"><span data-stu-id="b1a4d-133">This Iteration</span></span>

<span data-ttu-id="b1a4d-134">연락처 관리자 응용 프로그램의이 반복에서 Ajax를 활용 하도록 응용 프로그램을 리팩터링 했습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-134">In this iteration of the Contact Manager application, we refactor our application to make use of Ajax.</span></span> <span data-ttu-id="b1a4d-135">Ajax를 활용 하 여 우리가 응용 프로그램 응답성이 향상 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-135">By taking advantage of Ajax, we make our application more responsive.</span></span> <span data-ttu-id="b1a4d-136">에서는 페이지에 특정 지역 에서만 업데이트 해야 할 때 전체 페이지 렌더링을 방지할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-136">We can avoid rendering an entire page when we need to update only a certain region in a page.</span></span>

<span data-ttu-id="b1a4d-137">인덱스 보기 할 필요도 새 연락처 그룹을 선택할 때마다 전체 페이지를 다시 표시 하지 것 하도록 리팩터링 됩니다 것입니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-137">We'll refactor our Index view so that we don t need to redisplay the entire page whenever someone selects a new contact group.</span></span> <span data-ttu-id="b1a4d-138">대신 메일 그룹을 클릭할 때 것만 연락처 목록을 업데이트 하 고 페이지의 나머지 부분을 단독으로 그대로 둡니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-138">Instead, when someone clicks a contact group, we'll just update the list of contacts and leave the rest of the page alone.</span></span>

<span data-ttu-id="b1a4d-139">또한이 삭제 링크 작동 방식에서는 변경 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-139">We'll also change the way our delete link works.</span></span> <span data-ttu-id="b1a4d-140">별도 확인 페이지를 표시 하는 대신 JavaScript 확인 대화 상자가 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-140">Instead of displaying a separate confirmation page, we'll display a JavaScript confirmation dialog.</span></span> <span data-ttu-id="b1a4d-141">연락처 삭제 되도록 확인 하는 경우 연락처 레코드를 데이터베이스에서 삭제 하는 서버에 대해 HTTP DELETE 작업 수행 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-141">If you confirm that you want to delete a contact, an HTTP DELETE operation is performed against the server to delete the contact record from the database.</span></span>

<span data-ttu-id="b1a4d-142">게다가 우리가 이용 하는 인덱스 보기에 애니메이션 효과 추가 하려면 jQuery의 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-142">Furthermore, we will take advantage of jQuery to add animation effects to our Index view.</span></span> <span data-ttu-id="b1a4d-143">새 연락처 목록을 서버에서 인출 되는 경우 애니메이션을 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-143">We'll display an animation when the new list of contacts is being fetched from the server.</span></span>

<span data-ttu-id="b1a4d-144">마지막으로 ASP.NET AJAX 프레임 워크는 브라우저 기록을 관리 하는 것에 대 한 지원 기능을 알아보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-144">Finally, we'll take advantage of the ASP.NET AJAX framework support for managing browser history.</span></span> <span data-ttu-id="b1a4d-145">연락처 목록을 업데이트 하는 Ajax 호출이 수행 될 때마다 기록 점을 만들어 보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-145">We'll create history points whenever we perform an Ajax call to update the contact list.</span></span> <span data-ttu-id="b1a4d-146">이런 방식으로 브라우저 뒤로 및 앞으로 단추는 작동 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-146">That way, the browser backward and forward buttons will work.</span></span>

## <a name="why-use-ajax"></a><span data-ttu-id="b1a4d-147">Ajax를 사용 하는 이유는?</span><span class="sxs-lookup"><span data-stu-id="b1a4d-147">Why use Ajax?</span></span>

<span data-ttu-id="b1a4d-148">Ajax를 사용 하 여 많은 장점이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-148">Using Ajax has many benefits.</span></span> <span data-ttu-id="b1a4d-149">먼저 더 나은 사용자 환경은 응용 프로그램에 Ajax 기능을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-149">First, adding Ajax functionality to an application results in a better user experience.</span></span> <span data-ttu-id="b1a4d-150">일반 웹 응용 프로그램에서 전체 페이지를 게시 해야 서버에 사용자 작업을 수행 하는 각 시간입니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-150">In a normal web application, the entire page must be posted back to the server each and every time a user performs an action.</span></span> <span data-ttu-id="b1a4d-151">작업을 수행할 때마다 브라우저 잠금과 사용자 전체 페이지를 인출 하 고 다시 표시 될 때까지 대기 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-151">Whenever you perform an action, the browser locks and the user must wait until the entire page is fetched and redisplayed.</span></span>

<span data-ttu-id="b1a4d-152">이 데스크톱 응용 프로그램의 경우 허용 되지 않는 환경을 것입니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-152">This would be an unacceptable experience in the case of a desktop application.</span></span> <span data-ttu-id="b1a4d-153">하지만 일반적으로 우리 수명이 웹 응용 프로그램의 경우이 안 좋은 사용자 환경을 더 잘 우리가 알지 못했던 때문입니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-153">But, traditionally, we lived with this bad user experience in the case of a web application because we did not know that we could do any better.</span></span> <span data-ttu-id="b1a4d-154">생각 했을 때, 실제로 imaginations에 대 한 제한만 웹 응용 프로그램에 대 한 제한 된 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-154">We thought it was a limitation of web applications when, in actuality, it was just a limitation of our imaginations.</span></span>

<span data-ttu-id="b1a4d-155">Ajax 응용 프로그램에서는 페이지 업데이트를 중단 하는 사용자 경험을 t 필요를 하지 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-155">In an Ajax application, you don t need to bring the user experience to a halt just to update a page.</span></span> <span data-ttu-id="b1a4d-156">대신 페이지 업데이트는 백그라운드에서 비동기 요청을 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-156">Instead, you can perform an asynchronous request in the background to update the page.</span></span> <span data-ttu-id="b1a4d-157">사용자가 페이지의 부분 업데이트 하는 동안 기다려야 t 강제 하지.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-157">You don t force the user to wait while part of the page gets updated.</span></span>

<span data-ttu-id="b1a4d-158">Ajax를 활용 하 여도 응용 프로그램의 성능이 향상 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-158">By taking advantage of Ajax, you also can improve the performance of your application.</span></span> <span data-ttu-id="b1a4d-159">연락처 관리자 응용 프로그램의 작동 원리 지금 당장 Ajax 기능 없이 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-159">Consider how the Contact Manager application works right now without Ajax functionality.</span></span> <span data-ttu-id="b1a4d-160">문의 그룹을 클릭 하면 전체 인덱스 뷰에 다시 표시 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-160">When you click a contact group, the entire Index view must be redisplayed.</span></span> <span data-ttu-id="b1a4d-161">데이터베이스 서버에서 연락처 목록과 연락처 그룹 목록을 검색 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-161">The list of contacts and list of contact groups must be retrieved from the database server.</span></span> <span data-ttu-id="b1a4d-162">이 모든 데이터를 전달 해야 네트워크를 통해 웹 서버에서 웹 브라우저입니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-162">All of this data must be passed across the wire from web server to web browser.</span></span>

<span data-ttu-id="b1a4d-163">그러나 Ajax 기능을 응용 프로그램을 추가한 후에서는 방지할 수 있습니다 연락처 그룹을 클릭할 때 전체 페이지를 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-163">After we add Ajax functionality to our application, however, we can avoid redisplaying the entire page when a user clicks a contact group.</span></span> <span data-ttu-id="b1a4d-164">더 이상 데이터베이스에서 메일 그룹을 선택 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-164">We no longer need to grab the contact groups from the database.</span></span> <span data-ttu-id="b1a4d-165">에서는 네트워크를 통해 전체 인덱스 뷰를 푸시할 필요가 t도 하지.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-165">We also don t need to push the entire Index view across the wire.</span></span> <span data-ttu-id="b1a4d-166">Ajax를 활용 하 여 데이터베이스 서버에서 수행 해야 하는 작업량이 줄어듭니다 및 응용 프로그램에 필요한 네트워크 트래픽 양을 줄입니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-166">By taking advantage of Ajax, we reduce the amount of work that our database server must perform and we reduce the amount of network traffic required by our application.</span></span>

## <a name="don-t-be-afraid-of-ajax"></a><span data-ttu-id="b1a4d-167">안 될 두려워의 Ajax</span><span class="sxs-lookup"><span data-stu-id="b1a4d-167">Don t be Afraid of Ajax</span></span>

<span data-ttu-id="b1a4d-168">일부 개발자는 하위 브라우저에 대 한 걱정 때문에 Ajax를 사용 하지 마십시오.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-168">Some developers avoid using Ajax because they worry about downlevel browsers.</span></span> <span data-ttu-id="b1a4d-169">JavaScript를 지원 하지 않는 브라우저에서 액세스할 때 웹 응용 프로그램은 계속 작동 하는지 확인 하려고 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-169">They want to make sure that their web applications will still work when accessed by a browser that does not support JavaScript.</span></span> <span data-ttu-id="b1a4d-170">Ajax JavaScript에 의존 하기 때문에 일부 개발자 들은 Ajax를 사용 하지 마십시오.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-170">Because Ajax depends on JavaScript, some developers avoid using Ajax.</span></span>

<span data-ttu-id="b1a4d-171">그러나 Ajax를 구현 하는 방법에 대 한 주의 상위 및 하위 브라우저는 응용 프로그램을 빌드할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-171">However, if you are careful about how you implement Ajax then you can build applications that work with both uplevel and downlevel browsers.</span></span> <span data-ttu-id="b1a4d-172">연락처 관리자 응용 프로그램은 JavaScript를 지 원하는 브라우저 및 하지 않는 브라우저를 사용 하 여 작동 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-172">Our Contact Manager application will work with browsers that support JavaScript and browsers that do not.</span></span>

<span data-ttu-id="b1a4d-173">JavaScript를 지 원하는 브라우저를 사용 하 여 연락처 관리자 응용 프로그램을 사용 하면 더 나은 사용자 환경을 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-173">If you use the Contact Manager application with a browser that supports JavaScript then you will have a better user experience.</span></span> <span data-ttu-id="b1a4d-174">예를 들어, 메일 그룹을 클릭 하면 연락처를 표시 하는 페이지의 영역에만 업데이트 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-174">For example, when you click a contact group, only the region of the page that displays contacts will be updated.</span></span>

<span data-ttu-id="b1a4d-175">브라우저 JavaScript를 지원 하지 않는 (또는 사용 하지 않도록 설정 하는 JavaScript 포함)를 사용 하 여 연락처 관리자 응용 프로그램을 사용 하는 반면, 하는 경우 하면 약간 그다지 사용자 경험을 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-175">If, on the other hand, you use the Contact Manager application with a browser that does not support JavaScript (or that has JavaScript disabled) then you will have a slightly less desirable user experience.</span></span> <span data-ttu-id="b1a4d-176">예를 들어, 메일 그룹을 클릭 하면 전체 인덱스 보기 게시 해야 브라우저를 다시 일치 하는 연락처 목록을 표시 하기 위해.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-176">For example, when you click a contact group, the entire Index view must be posted back to the browser in order to display the matching list of contacts.</span></span>

## <a name="adding-the-required-javascript-files"></a><span data-ttu-id="b1a4d-177">필요한 JavaScript 파일 추가</span><span class="sxs-lookup"><span data-stu-id="b1a4d-177">Adding the Required JavaScript Files</span></span>

<span data-ttu-id="b1a4d-178">세 개의 JavaScript 파일을 사용 하 여 응용 프로그램에 Ajax 기능을 추가 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-178">We'll need to use three JavaScript files to add Ajax functionality to our application.</span></span> <span data-ttu-id="b1a4d-179">이러한 파일의 세 가지를 모두 새 ASP.NET MVC 응용 프로그램의 스크립트 폴더에 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-179">All three of these files are included in the Scripts folder of a new ASP.NET MVC application.</span></span>

<span data-ttu-id="b1a4d-180">응용 프로그램의 여러 페이지에서 Ajax를 사용 하려는 경우 다음 편이 응용 프로그램의 보기 마스터 페이지에 필요한 JavaScript 파일을 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-180">If you plan to use Ajax in multiple pages in your application then it makes sense to include the required JavaScript files in your application s view master page.</span></span> <span data-ttu-id="b1a4d-181">이런 방식으로 JavaScript 파일은 모든 응용 프로그램에서 페이지의 자동으로 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-181">That way, the JavaScript files will be included in all of the pages in your application automatically.</span></span>

<span data-ttu-id="b1a4d-182">내에 포함 되어 다음과 같은 JavaScript를 추가 합니다 &lt;head&gt; 보기 마스터 페이지의 태그:</span><span class="sxs-lookup"><span data-stu-id="b1a4d-182">Add the following JavaScript includes inside the &lt;head&gt; tag of your view master page:</span></span>

[!code-html[Main](iteration-7-add-ajax-functionality-cs/samples/sample1.html)]

## <a name="refactoring-the-index-view-to-use-ajax"></a><span data-ttu-id="b1a4d-183">Ajax를 사용 하도록 인덱스 뷰 리팩터링</span><span class="sxs-lookup"><span data-stu-id="b1a4d-183">Refactoring the Index View to use Ajax</span></span>

<span data-ttu-id="b1a4d-184">S를 인덱스 보기 수정 연락처를 표시 하는 보기의 영역을 업데이트만 연락처 그룹을 클릭 하 여 시작할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-184">Let s start by modifying our Index view so that clicking a contact group only updates the region of the view that displays contacts.</span></span> <span data-ttu-id="b1a4d-185">그림 1에 빨간색 상자 업데이트 하고자 하는 영역을 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-185">The red box in Figure 1 contains the region that we want to update.</span></span>


<span data-ttu-id="b1a4d-186">[![만 연락처를 업데이트 하는 중](iteration-7-add-ajax-functionality-cs/_static/image1.jpg)](iteration-7-add-ajax-functionality-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="b1a4d-186">[![Updating only contacts](iteration-7-add-ajax-functionality-cs/_static/image1.jpg)](iteration-7-add-ajax-functionality-cs/_static/image1.png)</span></span>

<span data-ttu-id="b1a4d-187">**그림 01**:만 연락처를 업데이트 하는 중 ([큰 이미지를 보려면 클릭](iteration-7-add-ajax-functionality-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="b1a4d-187">**Figure 01**: Updating only contacts([Click to view full-size image](iteration-7-add-ajax-functionality-cs/_static/image2.png))</span></span>


<span data-ttu-id="b1a4d-188">첫 번째 단계는 별도 부분 (뷰 사용자 컨트롤)를 비동기적으로 업데이트 하려는 보기의 일부를 분리 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-188">The first step is to separate the part of the view that we want to update asynchronously into a separate partial (view user control).</span></span> <span data-ttu-id="b1a4d-189">연락처의 테이블을 표시 하는 인덱스 뷰의 섹션 목록 1에서 부분으로 이동 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-189">The section of the Index view that displays the table of contacts has been moved into the partial in Listing 1.</span></span>

<span data-ttu-id="b1a4d-190">**Listing 1 - Views\Contact\ContactList.ascx**</span><span class="sxs-lookup"><span data-stu-id="b1a4d-190">**Listing 1 - Views\Contact\ContactList.ascx**</span></span>

[!code-aspx[Main](iteration-7-add-ajax-functionality-cs/samples/sample2.aspx)]

<span data-ttu-id="b1a4d-191">목록 1에서 부분 인덱스 보기 보다 다른 모델에 있는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-191">Notice that the partial in Listing 1 has a different model than the Index view.</span></span> <span data-ttu-id="b1a4d-192">*Inherits* 특성을 &lt;페이지 % @ %&gt; 지시문 부분을 ViewUserControl에서 상속 되도록 지정&lt;그룹&gt; 클래스입니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-192">The *Inherits* attribute in the &lt;%@ Page %&gt; directive specifies that the partial inherits from the ViewUserControl&lt;Group&gt; class.</span></span>

<span data-ttu-id="b1a4d-193">업데이트 된 인덱스 뷰는 목록 2에 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-193">The updated Index view is contained in Listing 2.</span></span>

<span data-ttu-id="b1a4d-194">**Listing 2 - Views\Contact\Index.aspx**</span><span class="sxs-lookup"><span data-stu-id="b1a4d-194">**Listing 2 - Views\Contact\Index.aspx**</span></span>

[!code-aspx[Main](iteration-7-add-ajax-functionality-cs/samples/sample3.aspx)]

<span data-ttu-id="b1a4d-195">목록 2에서 업데이트 된 보기에 대 한 유의 해야 하는 방법은 두 가지 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-195">There are two things that you should notice about the updated view in Listing 2.</span></span> <span data-ttu-id="b1a4d-196">첫째, 콘텐츠의 모든 부분으로 이동 하는 알림 Html.RenderPartial()에 대 한 호출으로 대체 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-196">First, notice that all of the content moved into the partial is replaced with a call to Html.RenderPartial().</span></span> <span data-ttu-id="b1a4d-197">Html.RenderPartial() 메서드는 인덱스 보기 연락처의 초기 집합을 표시 하려면 먼저 요청 될 때 호출 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-197">The Html.RenderPartial() method is called when the Index view is first requested in order to display the initial set of contacts.</span></span>

<span data-ttu-id="b1a4d-198">둘째, 메일 그룹을 표시 하는 데는 Html.ActionLink()는 Ajax.ActionLink()를 사용 하 여 대체 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-198">Second, notice that the Html.ActionLink() used to display contact groups has been replaced with an Ajax.ActionLink().</span></span> <span data-ttu-id="b1a4d-199">다음 매개 변수를 사용 하 여는 Ajax.ActionLink() 라고 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-199">The Ajax.ActionLink() is called with the following parameters:</span></span>

[!code-aspx[Main](iteration-7-add-ajax-functionality-cs/samples/sample4.aspx)]

<span data-ttu-id="b1a4d-200">첫 번째 매개 변수 링크에 대해 표시할 텍스트를 나타내는, 두 번째 매개 변수가 나타내는 경로 값 및 세 번째 매개 변수는 Ajax 옵션을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-200">The first parameter represents the text to display for the link, the second parameter represents the route values, and the third parameter represents the Ajax options.</span></span> <span data-ttu-id="b1a4d-201">이 경우 HTML를 가리키도록 UpdateTargetId Ajax 옵션을 사용 했습니다 &lt;div&gt; Ajax 요청이 완료 된 후 업데이트 하고자 하는 태그입니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-201">In this case, we use the UpdateTargetId Ajax option to point to the HTML &lt;div&gt; tag that we want to update after the Ajax request completes.</span></span> <span data-ttu-id="b1a4d-202">업데이트 하고자 합니다 &lt;div&gt; 새 연락처 목록 사용 하 여 태그입니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-202">We want to update the &lt;div&gt; tag with the new list of contacts.</span></span>

<span data-ttu-id="b1a4d-203">연락처 컨트롤러의 업데이트 된 index () 메서드는 목록 3에 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-203">The updated Index() method of the Contact controller is contained in Listing 3.</span></span>

<span data-ttu-id="b1a4d-204">**3-Controllers\ContactController.cs (인덱스 메서드)를 나열합니다.**</span><span class="sxs-lookup"><span data-stu-id="b1a4d-204">**Listing 3 - Controllers\ContactController.cs (Index method)**</span></span>

[!code-csharp[Main](iteration-7-add-ajax-functionality-cs/samples/sample5.cs)]

<span data-ttu-id="b1a4d-205">조건에 따라 업데이트 된 index () 작업을 두 가지 중 하나를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-205">The updated Index() action conditionally returns one of two things.</span></span> <span data-ttu-id="b1a4d-206">Index () 작업은 Ajax 요청에 의해 호출 되 면 컨트롤러 부분을 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-206">If the Index() action is invoked by an Ajax request then the controller returns a partial.</span></span> <span data-ttu-id="b1a4d-207">Index () 작업, 전체 뷰를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-207">Otherwise, the Index() action returns an entire view.</span></span>

<span data-ttu-id="b1a4d-208">알림 index () 작업 Ajax 요청에 의해 호출 될 때 많은 데이터를 반환할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-208">Notice that the Index() action does not need to return as much data when invoked by an Ajax request.</span></span> <span data-ttu-id="b1a4d-209">일반 요청 컨텍스트에서 인덱스 작업에는 모든 연락처 그룹 및 선택한 연락처 그룹의 목록을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-209">In the context of a normal request, the Index action returns a list of all of the contact groups and the selected contact group.</span></span> <span data-ttu-id="b1a4d-210">Ajax 요청의 컨텍스트에 index () 작업에는 선택한 그룹에만 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-210">In the context of an Ajax request, the Index() action returns only the selected group.</span></span> <span data-ttu-id="b1a4d-211">Ajax는 데이터베이스 서버에서 더 적은 작업을 의미합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-211">Ajax means less work on your database server.</span></span>

<span data-ttu-id="b1a4d-212">수정 된 인덱스 뷰에 상위 및 하위 브라우저의 경우 작동합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-212">Our modified Index view works in the case of both uplevel and downlevel browsers.</span></span> <span data-ttu-id="b1a4d-213">문의 그룹을 클릭 하면 브라우저에서 JavaScript를 지원 하 고 연락처 목록을 포함 하는 뷰의 지역만 업데이트 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-213">If you click a contact group, and your browser supports JavaScript, then only the region of the view that contains the list of contacts is updated.</span></span> <span data-ttu-id="b1a4d-214">반면에 브라우저가 JavaScript를 지원 하지 않습니다, 경우에 전체 뷰가 업데이트 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-214">If, on the other hand, your browser does not support JavaScript, then the entire view is updated.</span></span>


<span data-ttu-id="b1a4d-215">업데이트 된 인덱스 보기 한 가지 문제가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-215">Our updated Index view has one problem.</span></span> <span data-ttu-id="b1a4d-216">문의 그룹을 클릭 하면 선택한 그룹을 강조 표시 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-216">When you click a contact group, the selected group is not highlighted.</span></span> <span data-ttu-id="b1a4d-217">Ajax 요청 중에 업데이트 되는 지역 외부에 있는 그룹의 목록이 표시 됩니다, 때문에 올바른 그룹을 강조 표시 가져오기지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-217">Because the list of groups is displayed outside of the region that is updated during an Ajax request, the right group does not get highlighted.</span></span> <span data-ttu-id="b1a4d-218">다음 섹션에서이 문제를 해결할 예정입니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-218">We'll fix this issue in the next section.</span></span>


## <a name="adding-jquery-animation-effects"></a><span data-ttu-id="b1a4d-219">JQuery 애니메이션 효과 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-219">Adding jQuery Animation Effects</span></span>

<span data-ttu-id="b1a4d-220">일반적으로 웹 페이지의 링크를 클릭 하면 브라우저를 적극적으로 업데이트 된 콘텐츠를 페치하는 여부를 검색할 브라우저 진행률 표시줄을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-220">Normally, when you click a link in a web page, you can use the browser progress bar to detect whether or not the browser is actively fetching the updated content.</span></span> <span data-ttu-id="b1a4d-221">Ajax 요청을 수행할 때 다른 한편으로 브라우저 진행률 표시줄이 표시 되지 않습니다에 있어서 어떠한 진전이.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-221">When performing an Ajax request, on the other hand, the browser progress bar does not show any progress.</span></span> <span data-ttu-id="b1a4d-222">이 가능 사용자 우려 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-222">This can make users nervous.</span></span> <span data-ttu-id="b1a4d-223">브라우저에 고정 되어 있는지를 어떻게 알 수 있을까요?</span><span class="sxs-lookup"><span data-stu-id="b1a4d-223">How do you know whether the browser has frozen?</span></span>

<span data-ttu-id="b1a4d-224">Ajax 요청을 수행 하는 동안 작업이 수행 되는 사용자를 나타낼 수 있는 방법은 여러 가지가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-224">There are several ways that you can indicate to a user that work is being performed while performing an Ajax request.</span></span> <span data-ttu-id="b1a4d-225">한 가지 방법은 간단한 애니메이션을 표시 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-225">One approach is to display a simple animation.</span></span> <span data-ttu-id="b1a4d-226">예를 들어, Ajax 요청을 시작 하 고 요청이 완료 되 면 지역에서 페이드 인 경우 영역 아웃 페이드 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-226">For example, you can fade out a region when an Ajax request begins and fade in the region when the request completes.</span></span>

<span data-ttu-id="b1a4d-227">애니메이션 효과를 만들 Microsoft ASP.NET MVC framework에 포함 된 jQuery 라이브러리를 사용 하겠습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-227">We'll use the jQuery library which is included with the Microsoft ASP.NET MVC framework, to create the animation effects.</span></span> <span data-ttu-id="b1a4d-228">업데이트 된 인덱스 뷰 목록 4에 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-228">The updated Index view is contained in Listing 4.</span></span>

<span data-ttu-id="b1a4d-229">**Listing 4 - Views\Contact\Index.aspx**</span><span class="sxs-lookup"><span data-stu-id="b1a4d-229">**Listing 4 - Views\Contact\Index.aspx**</span></span>

[!code-aspx[Main](iteration-7-add-ajax-functionality-cs/samples/sample6.aspx)]

<span data-ttu-id="b1a4d-230">업데이트 된 인덱스 뷰 세 개의 새 JavaScript 함수에 알 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-230">Notice that the updated Index view contains three new JavaScript functions.</span></span> <span data-ttu-id="b1a4d-231">처음 두 함수 페이드 아웃 하는 새 메일 그룹을 클릭 하면 연락처 목록의 페이드 jQuery를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-231">The first two functions use jQuery to fade out and fade in the list of contacts when you click a new contact group.</span></span> <span data-ttu-id="b1a4d-232">세 번째 함수 오류가 (예: 네트워크 시간 초과)는 오류 메시지가 나타난다는 Ajax 요청 결과 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-232">The third function displays an error message when an Ajax request results in an error (for example, network timeout).</span></span>

<span data-ttu-id="b1a4d-233">또한 첫 번째 함수는 선택한 그룹을 강조 표시의 담당 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-233">The first function also takes care of highlighting the selected group.</span></span> <span data-ttu-id="b1a4d-234">클래스 = 선택한 특성은 클릭 한 요소의 상위 요소 (LI 요소)에 추가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-234">A class= selected attribute is added to the parent element (the LI element) of the element clicked.</span></span> <span data-ttu-id="b1a4d-235">다시, jQuery 쉽게 적합 한 요소를 선택 하 고 CSS 클래스를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-235">Again, jQuery makes it easy to select the right element and add the CSS class.</span></span>

<span data-ttu-id="b1a4d-236">이러한 스크립트는 Ajax.ActionLink() AjaxOptions 매개 변수를 사용 하 여 그룹 링크에 연결 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-236">These scripts are tied to the group links with the help of the Ajax.ActionLink() AjaxOptions parameter.</span></span> <span data-ttu-id="b1a4d-237">업데이트 된 Ajax.ActionLink() 메서드 호출이 다음과 유사합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-237">The updated Ajax.ActionLink() method call looks like this:</span></span>

[!code-aspx[Main](iteration-7-add-ajax-functionality-cs/samples/sample7.aspx)]

## <a name="adding-browser-history-support"></a><span data-ttu-id="b1a4d-238">브라우저 기록 지원 추가</span><span class="sxs-lookup"><span data-stu-id="b1a4d-238">Adding Browser History Support</span></span>

<span data-ttu-id="b1a4d-239">일반적으로 페이지 업데이트에 대 한 링크를 클릭 하면 브라우저 기록 업데이트 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-239">Normally, when you click a link to update a page, your browser history is updated.</span></span> <span data-ttu-id="b1a4d-240">이런 방식으로 페이지의 이전 상태 시간에서 다시 이동 하려면 브라우저의 뒤로 단추를 클릭 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-240">That way, you can click the browser Back button to move back in time to the previous state of the page.</span></span> <span data-ttu-id="b1a4d-241">예를 들어, 친구 문의 그룹을 클릭 하 고 비즈니스 연락처 그룹을 클릭 하는 경우에 친구 문의 그룹을 선택 하는 경우 페이지의 상태를 다시 탐색 하 브라우저 뒤로 단추를 클릭 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-241">For example, if you click the Friends contact group and then click the Business contact group, you can click the browser Back button to navigate back to the state of the page when the Friends contact group was selected.</span></span>

<span data-ttu-id="b1a4d-242">그러나 Ajax 요청을 수행 합니다. 업데이트 하지 않습니다 브라우저 기록을 자동으로.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-242">Unfortunately, performing an Ajax request does not update browser history automatically.</span></span> <span data-ttu-id="b1a4d-243">문의 그룹을 클릭 하 고 Ajax 요청을 사용 하 여 연락처를 일치 하는 목록을 검색 하는 경우 브라우저 기록을 업데이트 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-243">If you click a contact group, and the list of matching contacts is retrieved with an Ajax request, then the browser history is not updated.</span></span> <span data-ttu-id="b1a4d-244">브라우저의 뒤로 단추를 사용 하 여 새 연락처 그룹을 선택한 후 메일 그룹으로 이동할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-244">You cannot use the browser Back button to navigate back to a contact group after selecting a new contact group.</span></span>

<span data-ttu-id="b1a4d-245">하려는 경우 사용자가 브라우저를 다시 사용할 수 있도록 단추 Ajax 요청을 수행한 후 좀 더 많은 작업을 수행 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-245">If you want users to be able to use the browser Back button after performing Ajax requests then you need to perform a little more work.</span></span> <span data-ttu-id="b1a4d-246">ASP.NET AJAX 프레임 워크에 기본 제공 브라우저 기록 관리 기능을 활용 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-246">You need to take advantage of the browser history management functionality built in the ASP.NET AJAX Framework.</span></span>

<span data-ttu-id="b1a4d-247">ASP.NET AJAX 브라우저 기록 등에 세 가지를 수행 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-247">ASP.NET AJAX browser history, you need to do three things:</span></span>

1. <span data-ttu-id="b1a4d-248">브라우저 기록 enableBrowserHistory 속성을 true로 설정 하 여 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-248">Enable Browser History by setting the enableBrowserHistory property to true.</span></span>
2. <span data-ttu-id="b1a4d-249">뷰 상태가 변경 addHistoryPoint() 메서드를 호출 하 여 기록 점을 저장 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-249">Save history points when the state of a view changes by calling the addHistoryPoint() method.</span></span>
3. <span data-ttu-id="b1a4d-250">탐색 이벤트가 발생할 때 뷰의 상태를 다시 생성 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-250">Reconstruct the state of the view when the navigate event is raised.</span></span>

<span data-ttu-id="b1a4d-251">업데이트 된 인덱스 뷰 목록 5에 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-251">The updated Index view is contained in Listing 5.</span></span>

<span data-ttu-id="b1a4d-252">**Listing 5 - Views\Contact\Index.aspx**</span><span class="sxs-lookup"><span data-stu-id="b1a4d-252">**Listing 5 - Views\Contact\Index.aspx**</span></span>

[!code-aspx[Main](iteration-7-add-ajax-functionality-cs/samples/sample8.aspx)]

<span data-ttu-id="b1a4d-253">목록 5 브라우저 기록 pageInit() 함수에서 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-253">In Listing 5, Browser History is enabled in the pageInit() function.</span></span> <span data-ttu-id="b1a4d-254">PageInit() 함수 navigate 이벤트에 대 한 이벤트 처리기를 설정도 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-254">The pageInit() function is also used to set up the event handler for the navigate event.</span></span> <span data-ttu-id="b1a4d-255">브라우저 앞으로 또는 뒤로 단추 상태 변경 하려면 페이지를 발생 시킬 때마다 navigate 이벤트를 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-255">The navigate event is raised whenever the browser Forward or Back button causes the state of the page to change.</span></span>

<span data-ttu-id="b1a4d-256">BeginContactList() 메서드 연락처 그룹을 클릭할 때 호출 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-256">The beginContactList() method is called when you click a contact group.</span></span> <span data-ttu-id="b1a4d-257">이 메서드는 새 기록 점을 addHistoryPoint() 메서드를 호출 하 여 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-257">This method creates a new history point by calling the addHistoryPoint() method.</span></span> <span data-ttu-id="b1a4d-258">클릭 하면 연락처 그룹의 id 기록에 추가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-258">The id of the contact group clicked is added to history.</span></span>

<span data-ttu-id="b1a4d-259">그룹 id는 연락처 그룹 링크에 대 한 expando 특성에서 검색 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-259">The group id is retrieved from an expando attribute on the contact group link.</span></span> <span data-ttu-id="b1a4d-260">링크는 Ajax.ActionLink() 다음 호출을 사용 하 여 렌더링 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-260">The link is rendered with the following call to Ajax.ActionLink().</span></span>

[!code-aspx[Main](iteration-7-add-ajax-functionality-cs/samples/sample9.aspx)]

<span data-ttu-id="b1a4d-261">마지막 매개 변수는 Ajax.ActionLink() 전달할 groupid 링크 (XHTML 호환성을 위해 소문자) 라는 expando 특성을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-261">The last parameter passed to the Ajax.ActionLink() adds an expando attribute named groupid to the link (lowercase for XHTML compatibility).</span></span>

<span data-ttu-id="b1a4d-262">사용자 브라우저의 뒤로 또는 앞으로 단추에 도달 하면 탐색 이벤트가 발생 하 고 navigate() 메서드를 호출 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-262">When a user hits the browser Back or Forward button, the navigate event is raised and the navigate() method is called.</span></span> <span data-ttu-id="b1a4d-263">이 메서드는 navigate 메서드를 전달 하는 브라우저 기록 지점에 해당 하는 페이지의 상태와 일치 하도록 페이지에 표시 된 연락처를 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-263">This method updates the contacts displayed in the page to match the state of the page that corresponds to the browser history point passed to the navigate method.</span></span>

## <a name="performing-ajax-deletes"></a><span data-ttu-id="b1a4d-264">Ajax를 수행 하면 삭제</span><span class="sxs-lookup"><span data-stu-id="b1a4d-264">Performing Ajax Deletes</span></span>

<span data-ttu-id="b1a4d-265">현재 연락처를 삭제 하기 위해 해야 할 삭제 링크를 클릭 하 고 삭제 확인 페이지에 표시 된 삭제 단추를 클릭 (그림 2 참조).</span><span class="sxs-lookup"><span data-stu-id="b1a4d-265">Currently, in order to delete a contact, you need to click on the Delete link and then click the Delete button displayed in the delete confirmation page (see Figure 2).</span></span> <span data-ttu-id="b1a4d-266">이 페이지 요청 데이터베이스 레코드가 삭제와 같은 간단한 작업을 수행 하려면 많은 것 같습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-266">This seems like a lot of page requests to do something simple like deleting a database record.</span></span>


<span data-ttu-id="b1a4d-267">[![삭제 확인 페이지](iteration-7-add-ajax-functionality-cs/_static/image2.jpg)](iteration-7-add-ajax-functionality-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="b1a4d-267">[![The delete confirmation page](iteration-7-add-ajax-functionality-cs/_static/image2.jpg)](iteration-7-add-ajax-functionality-cs/_static/image3.png)</span></span>

<span data-ttu-id="b1a4d-268">**그림 02**: 삭제 확인 페이지 ([큰 이미지를 보려면 클릭](iteration-7-add-ajax-functionality-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="b1a4d-268">**Figure 02**: The delete confirmation page([Click to view full-size image](iteration-7-add-ajax-functionality-cs/_static/image4.png))</span></span>


<span data-ttu-id="b1a4d-269">삭제 확인 페이지를 건너뛰고 인덱스 보기에서 직접 연락처를 삭제 하기 쉽습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-269">It is tempting to skip the delete confirmation page and delete a contact directly from the Index view.</span></span> <span data-ttu-id="b1a4d-270">응용 프로그램 보안 취약점을 열어이 접근 방식을 때문에이 유혹을 피해 야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-270">You should avoid this temptation because taking this approach opens your application to security holes.</span></span> <span data-ttu-id="b1a4d-271">일반적으로 don t 웹 응용 프로그램의 상태를 수정 하는 작업을 호출할 때 HTTP GET 작업을 수행 하려고 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-271">In general, you don t want to perform an HTTP GET operation when invoking an action that modifies the state of your web application.</span></span> <span data-ttu-id="b1a4d-272">삭제를 수행할 때 HTTP POST를 수행 하거나 HTTP DELETE 작업 하려는 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-272">When performing a delete, you want to perform an HTTP POST, or better yet, an HTTP DELETE operation.</span></span>

<span data-ttu-id="b1a4d-273">삭제 링크를 부분 ContactList에 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-273">The Delete link is contained in the ContactList partial.</span></span> <span data-ttu-id="b1a4d-274">업데이트 된 부분 ContactList 목록 6에 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-274">An updated version of the ContactList partial is contained in Listing 6.</span></span>

<span data-ttu-id="b1a4d-275">**Listing 6 - Views\Contact\ContactList.ascx**</span><span class="sxs-lookup"><span data-stu-id="b1a4d-275">**Listing 6 - Views\Contact\ContactList.ascx**</span></span>

[!code-aspx[Main](iteration-7-add-ajax-functionality-cs/samples/sample10.aspx)]

<span data-ttu-id="b1a4d-276">삭제 링크를 Ajax.ImageActionLink() 메서드에 다음 호출을 사용 하 여 렌더링 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-276">The Delete link is rendered with the following call to the Ajax.ImageActionLink() method:</span></span>

[!code-aspx[Main](iteration-7-add-ajax-functionality-cs/samples/sample11.aspx)]

> [!NOTE] 
> 
> <span data-ttu-id="b1a4d-277">ASP.NET MVC framework의 표준 파트를 Ajax.ImageActionLink() 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-277">The Ajax.ImageActionLink() is not a standard part of the ASP.NET MVC framework.</span></span> <span data-ttu-id="b1a4d-278">Ajax.ImageActionLink() Contact Manager 프로젝트에 포함 하는 사용자 지정 도우미 메서드는입니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-278">The Ajax.ImageActionLink() is a custom helper methods included in the Contact Manager project.</span></span>


<span data-ttu-id="b1a4d-279">AjaxOptions 매개 변수는 다음과 같은 두 가지 속성이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-279">The AjaxOptions parameter has two properties.</span></span> <span data-ttu-id="b1a4d-280">먼저 확인 속성 팝업 JavaScript 확인 대화 상자를 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-280">First, the Confirm property is used to display a popup JavaScript confirmation dialog.</span></span> <span data-ttu-id="b1a4d-281">둘째, HttpMethod 속성은 HTTP DELETE 작업 수행을 위해 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-281">Second, the HttpMethod property is used to perform an HTTP DELETE operation.</span></span>

<span data-ttu-id="b1a4d-282">코드 7 연락처 컨트롤러에 추가 된 새 AjaxDelete() 동작을 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-282">Listing 7 contains a new AjaxDelete() action that has been added to the Contact controller.</span></span>

<span data-ttu-id="b1a4d-283">**7-Controllers\ContactController.cs (AjaxDelete)를 나열합니다.**</span><span class="sxs-lookup"><span data-stu-id="b1a4d-283">**Listing 7 - Controllers\ContactController.cs (AjaxDelete)**</span></span>

[!code-csharp[Main](iteration-7-add-ajax-functionality-cs/samples/sample12.cs)]

<span data-ttu-id="b1a4d-284">AjaxDelete() 작업 AcceptVerbs 특성으로 데코레이팅됩니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-284">The AjaxDelete() action is decorated with an AcceptVerbs attribute.</span></span> <span data-ttu-id="b1a4d-285">이 특성의 HTTP 삭제 작업 외의 모든 HTTP 작업에서 제외 하 고 호출 될 작업을 방지 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-285">This attribute prevents the action from being invoked except by any HTTP operation other than an HTTP DELETE operation.</span></span> <span data-ttu-id="b1a4d-286">특히 HTTP GET을 사용 하 여이 작업을 호출할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-286">In particular, you cannot invoke this action with an HTTP GET.</span></span>

<span data-ttu-id="b1a4d-287">데이터베이스 레코드를 삭제 하면 삭제 된 레코드는 포함 되지 않은 연락처의 업데이트 된 목록을 표시 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-287">After you delete database record, you need to display the updated list of contacts that does not contain the deleted record.</span></span> <span data-ttu-id="b1a4d-288">AjaxDelete() 메서드는 부분 ContactList 및 업데이트 된 연락처 목록을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-288">The AjaxDelete() method returns the ContactList partial and the updated list of contacts.</span></span>

## <a name="summary"></a><span data-ttu-id="b1a4d-289">요약</span><span class="sxs-lookup"><span data-stu-id="b1a4d-289">Summary</span></span>

<span data-ttu-id="b1a4d-290">이 반복에서 연락처 관리자 응용 프로그램에 Ajax 기능을 추가 했습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-290">In this iteration, we added Ajax functionality to our Contact Manager application.</span></span> <span data-ttu-id="b1a4d-291">응용 프로그램의 성능과 응답성을 개선 하기 위해 Ajax를 사용 했습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-291">We used Ajax to improve the responsiveness and performance of our application.</span></span>

<span data-ttu-id="b1a4d-292">첫째, 두 번 클릭 하면 연락처 전체 보기를 업데이트 하지 않습니다 있도록 인덱스 보기를 리팩터링 했습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-292">First, we refactored the Index view so that clicking a contact group does not update the entire view.</span></span> <span data-ttu-id="b1a4d-293">대신, 연락처 목록을 업데이트만 연락처 그룹을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-293">Instead, clicking a contact group only updates the list of contacts.</span></span>

<span data-ttu-id="b1a4d-294">다음으로, jQuery 애니메이션 효과 연락처 목록에 페이드 인 및 페이드 아웃을 사용 했습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-294">Next, we used jQuery animation effects to fade out and fade in the list of contacts.</span></span> <span data-ttu-id="b1a4d-295">Ajax 응용 프로그램에 애니메이션 추가 브라우저 진행률 표시줄의 해당 하는 응용 프로그램의 사용자에 게 제공 하려면 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-295">Adding animation to an Ajax application can be used to provide users of the application with the equivalent of a browser progress bar.</span></span>

<span data-ttu-id="b1a4d-296">또한 브라우저 기록 지원 Ajax 응용 프로그램을 추가 했습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-296">We also added browser history support to our Ajax application.</span></span> <span data-ttu-id="b1a4d-297">사용자가 브라우저의 뒤로 클릭 합니다. 앞으로 인덱스 뷰의 상태를 변경 하는 단추를 사용 하도록 설정 했습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-297">We enabled users to click the browser Back and Forward buttons to change the state of the Index view.</span></span>

<span data-ttu-id="b1a4d-298">마지막으로, HTTP DELETE 작업을 지 원하는 삭제 링크를 만들었습니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-298">Finally, we created a delete link that supports HTTP DELETE operations.</span></span> <span data-ttu-id="b1a4d-299">Ajax 삭제를 수행 하 여 사용자 추가 삭제 확인 페이지를 요청 하도록 요구 하지 않고 데이터베이스 레코드를 삭제 하는 사용자 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="b1a4d-299">By performing Ajax deletes, we enable users to delete database records without requiring the user to request an additional delete confirmation page.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="b1a4d-300">[이전](iteration-6-use-test-driven-development-cs.md)
> [다음](iteration-1-create-the-application-vb.md)</span><span class="sxs-lookup"><span data-stu-id="b1a4d-300">[Previous](iteration-6-use-test-driven-development-cs.md)
[Next](iteration-1-create-the-application-vb.md)</span></span>
